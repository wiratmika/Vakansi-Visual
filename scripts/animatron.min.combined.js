/*
 * Copyright Â© 2011-2015 by Animatron.
 * All rights are reserved.
 *
 * Animatron Player is licensed under the MIT License.
 *
 * v1.4, built at Wed Oct 14 2015 14:48:44 GMT-0400 (EDT) / 2015-10-14T18:48:44.685Z
 */
(function e$$0(y,v,b){function f(d,e){if(!v[d]){if(!y[d]){var h="function"==typeof require&&require;if(!e&&h)return h(d,!0);if(a)return a(d,!0);h=Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h;}h=v[d]={exports:{}};y[d][0].call(h.exports,function(a){var b=y[d][1][a];return f(b?b:a)},h,h.exports,e$$0,y,v,b)}return v[d].exports}for(var a="function"==typeof require&&require,e=0;e<b.length;e++)f(b[e]);return f})({1:[function(c,y,v){y.exports={createLink:function(b,f){var a=document.head||
document.getElementsByTagName("head")[0],e=document.createElement("link");e.href=b;e.rel="stylesheet";for(var d in f)f.hasOwnProperty(d)&&e.setAttribute("data-"+d,f[d]);a.appendChild(e)},createStyle:function(b,f){var a=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css";for(var d in f)f.hasOwnProperty(d)&&e.setAttribute("data-"+d,f[d]);e.sheet?(e.innerHTML=b,e.sheet.cssText=b,a.appendChild(e)):e.styleSheet?(a.appendChild(e),e.styleSheet.cssText=
b):(e.appendChild(document.createTextNode(b)),a.appendChild(e))}}},{}],2:[function(c,y,v){c("browserify-css").createStyle(".anm-wrapper {\n  position: relative;\n}\n.anm-controls {\n  position: absolute;\n  left: 0;\n  top: 0;\n  vertical-align: top;\n  z-index: 100;\n  cursor: pointer;\n  background-color: rgba(0,0,0,0);\n}\n#anm-text-measurer-container {\n  position: absolute;\n  visibility: hidden;\n  left: -10000px;\n  top: -10000px;\n}\n",{href:"res/player.css"});y.exports=".anm-wrapper {\n  position: relative;\n}\n.anm-controls {\n  position: absolute;\n  left: 0;\n  top: 0;\n  vertical-align: top;\n  z-index: 100;\n  cursor: pointer;\n  background-color: rgba(0,0,0,0);\n}\n#anm-text-measurer-container {\n  position: absolute;\n  visibility: hidden;\n  left: -10000px;\n  top: -10000px;\n}\n"},
{"browserify-css":1}],3:[function(c,y,v){function b(){this.id=f.guid();this.tree=[];this.hash={};this.name="";this.duration=void 0;this.bgfill=null;this.height=this.width=void 0;this.factor=this.speed=this.zoom=1;this.repeat=!1;this.meta={};this.targets={};this.$prefix=null;this.__informEnabled=!0;this.__lastOverElm=null;this._laters=[];this._initHandlers()}var f=c("../utils.js"),a=f.is,e=f.iter;v=c("../constants.js");var d=c("engine"),n=c("../resource_manager.js"),h=c("../../vendor/font_detector.js"),
w=c("./element.js"),m=c("../graphics/brush.js"),r=c("../events.js"),z=r.provideEvents,x=c("../errors.js"),t=c("../loc.js").Errors,B=c("./search.js"),p={click:v.X_MCLICK,dblclick:v.X_MDCLICK,mouseup:v.X_MUP,mousedown:v.X_MDOWN,mousemove:v.X_MMOVE,mouseover:v.X_MOVER,mouseout:v.X_MOUT,keypress:v.X_KPRESS,keyup:v.X_KUP,keydown:v.X_KDOWN};b.DEFAULT_DURATION=10;z(b,[v.A_START,v.A_PAUSE,v.A_STOP,v.X_MCLICK,v.X_MDCLICK,v.X_MUP,v.X_MDOWN,v.X_MMOVE,v.X_MOVER,v.X_MOUT,v.X_KPRESS,v.X_KUP,v.X_KDOWN,v.X_ERROR]);
b.prototype.add=function(b,d,r){d?(b=new w(b,d),r&&b.changeTransform(r),this.addToTree(b)):a.arr(b)?((new w).add(b),this.addToTree(_clip)):this.addToTree(b);return this};b.prototype.remove=function(a){a.parent?a.parent.remove(a):this._unregister(a);return this};b.prototype.traverse=function(a,b){f.keys(this.hash,function(d,k){return a(k,b)});return this};b.prototype.each=function(a,b){for(var d=0,k=this.tree.length;d<k&&!1!==a(this.tree[d],b);d++);return this};b.prototype.reverseEach=function(a,b){for(var d=
this.tree.length;d--&&!1!==a(this.tree[d],b););return this};b.prototype.iter=function(a,b){e(this.tree).each(a,b);return this};b.prototype.render=function(a,b,d){a.save();this.time=b;var k=this.zoom;1!=k&&a.scale(k,k);this.bgfill&&(this.bgfill instanceof m||(this.bgfill=m.fill(this.bgfill)),this.bgfill.apply(a),a.fillRect(0,0,this.width,this.height));b=this.$prefix?this.$prefix(b,a):b;this.each(function(g){g.render(a,b,d)});a.restore()};b.prototype.jump=function(a){this.jumping||(this.jumping=!0,
f.keys(this.targets,function(b,d){d&&d.seek(a)}),this.jumping=!1)};b.prototype.jumpTo=function(b){(b=a.str(b)?this.find(b):b)&&this.jump(b.gband[0])};b.prototype.getFittingDuration=function(){var a=-Infinity;this.each(function(b){b=b._max_tpos();b>a&&(a=b)});return a};b.prototype.reset=function(){this.__informEnabled=!0;this.time=null;this.each(function(a){a.reset()});return this};b.prototype.playedIn=function(a){this.targets[a.id]=a;return this};b.prototype.dispose=function(a){a&&(this.targets[a.id]=
null);this.disposeHandlers();var b=this;this.iter(function(a){b._unregister_no_rm(a);a.dispose();return!1});return this};b.prototype.isEmpty=function(){return 0===this.tree.length};b.prototype.toString=function(){return"[ Animation "+(this.name?"'"+this.name+"'":"")+"]"};b.prototype.subscribeEvents=function(a){d.subscribeAnimationToEvents(a,this,p)};b.prototype.unsubscribeEvents=function(a){d.unsubscribeAnimationFromEvents(a,this)};b.prototype.filterEvent=function(b,d){function h(q,g){return q.firstParent(function(q){return q.subscribedTo(g)})}
var k=this;if(r.mouse(b)){var g=k.adapt(d.pos.x,d.pos.y),q=!1;k.reverseEach(function(D){D.inside(g,function(q){return a.defined(q.cur_t)&&q.fits(q.cur_t)},function(g,a){q=!0;if("mousemove"!==b){var D=h(g,b);D&&D.fire(b,d)}else if(D=h(g,"mousemove"),k.__lastOverElm)if(g.id===k.__lastOverElm.id)D&&D.fire(b,d);else{m=h(g,"mouseover");if(k.__lastOverElm){var r=h(k.__lastOverElm,"mouseout");r&&r.fire("mouseout",d);k.__lastOverElm=null}k.__lastOverElm=g;m&&m.fire("mouseover",d);D&&D.fire("mousemove",d)}else{k.__lastOverElm=
g;var m=h(g,"mouseover");m&&m.fire("mouseover",d);D&&D.fire("mousemove",d)}return!1});if(q)return!1});if("mousemove"===b&&!q&&k.__lastOverElm){var D=!1;k.__lastOverElm.inside(g,null,function(){D=!0});if(!D){var m=h(k.__lastOverElm,"mouseout");k.__lastOverElm=null;m&&m.fire("mouseout",d)}}return!1}return!0};b.prototype.addToTree=function(a){if(!a.children)throw x.animation(t.A.OBJECT_IS_NOT_ELEMENT,this);this._register(a);this.tree.push(a)};b.prototype._register=function(a){if(this.hash[a.id])throw x.animation(t.A.ELEMENT_IS_REGISTERED,
this);a.registered=!0;a.anim=this;this.hash[a.id]=a;var b=this;a.each(function(a){b._register(a)})};b.prototype._unregister_no_rm=function(a){this._unregister(a,!0)};b.prototype._unregister=function(a,b){if(!a.registered)throw x.animation(t.A.ELEMENT_IS_NOT_REGISTERED,this);var d=this;a.each(function(g){d._unregister(g)});var k=-1;if(!b)for(;0<=(k=this.tree.indexOf(a));)this.tree.splice(k,1);delete this.hash[a.id];a.registered=!1;a.anim=null};b.prototype._collectRemoteResources=function(a){var b=
[],d=this;this.traverse(function(k){k._hasRemoteResources(d,a)&&(b=b.concat(k._collectRemoteResources(d,a)))});this.fonts&&this.fonts.length&&(b=b.concat(this.fonts.map(function(a){return a.url})));return b};b.prototype._loadRemoteResources=function(a){var b=this;this.traverse(function(d){d._hasRemoteResources(b,a)&&d._loadRemoteResources(b,a)});b.loadFonts(a)};b.prototype.find=function(a,b){return B.one(a).over(b?b.children:this.tree)};b.prototype.findAll=function(a,b){return B.all(a).over(b?b.children:
this.tree)};b.prototype.findById=function(a){return this.hash[a]};b.prototype.prefix=function(a){this.$prefix=a};b.prototype.adapt=function(a,b){return{x:a/this.factor,y:b/this.factor}};b.prototype.invokeAllLaters=function(){for(var a=0;a<this._laters.length;a++)this._laters[a].call(this)};b.prototype.clearAllLaters=function(){this._laters=[]};b.prototype.invokeLater=function(a){this._laters.push(a)};var A=d.isHttps;b.prototype.loadFonts=function(a){if(this.fonts&&this.fonts.length){for(var b=this.fonts,
r=d.getWebfontStyleObject(),k="",g=[],q=new h,D=0;D<b.length;D++){var m=b[D];if(m.url&&m.face){var e=m.url,p=m.woff;A&&(e=e.replace("http:","https:"),p&&(p=p.replace("http:","https:")));e=d.fixLocalUrl(e);g.push(m);k+='@font-face {\nfont-family: "'+m.face+'";\nsrc:'+(p?' url("'+p+'") format("woff"),\n':"")+' url("'+e+'") format("truetype");\n'+(m.style?"font-style: "+m.style+";\n":"")+(m.weight?"font-weight: "+m.weight+";\n":"")+"}\n"}}if(0!==g.length)for(r.innerHTML+=k,b=function(a){var b=g[a];return function(g){var a=
0,d;d=setInterval(function(){a+=100;if(q.detect(b)||1E4<a)clearInterval(d),g()},100)}},D=0;D<g.length;D++)n.loadOrGet(a.id,g[D].url,b(D))}};y.exports=b},{"../../vendor/font_detector.js":42,"../constants.js":12,"../errors.js":13,"../events.js":14,"../graphics/brush.js":17,"../loc.js":27,"../resource_manager.js":35,"../utils.js":39,"./element.js":6,"./search.js":9,engine:40}],4:[function(c,y,v){var b={recalc:function(f,a){a=a||(f.parent?f.parent.gband:[0,0]);f.gband=[a[0]+f.lband[0],a[0]+f.lband[1]];
f.each(function(a){b.recalc(a,f.gband)})},wrap:function(b,a){return b?[b[0]+a[0],b[0]+a[1]<=b[1]?b[0]+a[1]:b[1]]:a},expand:function(b,a){return b?[a[0]<b[0]?a[0]:b[0],a[1]>b[1]?a[1]:b[1]]:a},reduce:function(b,a){return b?[a[0]>b[0]?a[0]:b[0],a[1]<b[1]?a[1]:b[1]]:a}};y.exports=b},{}],5:[function(c,y,v){function b(a,b){e["E_"+a]=a;var c=new d(b),f=function(a){return c.atT([0,0],a)[1]};h[a]=f;n[a]=function(){return f}}function f(a){for(var b=1,d=0,h=0,e;100>=h;h++)e=a(h/100),b=Math.min(b,e),d=Math.max(d,
e);return[b,d]}function a(a){var b=f(a);return function(d){return(a(d)-b[0])/(b[1]-b[0])}}var e=c("../constants.js"),d=c("../graphics/segments.js").CSeg,n={};n[e.E_PATH]=function(a){return function(b){return a.pointAt(b)[1]}};n[e.E_FUNC]=function(a){return a};n[e.E_CSEG]=function(a){return function(b){return a.atT([0,0],b)[1]}};n[e.E_STDF]=function(a){return w[a]};var h={};b("default",[.25,.1,.25,1,1,1]);b("in",[.42,0,1,1,1,1]);b("out",[0,0,.58,1,1,1]);b("inout",[.42,0,.58,1,1,1]);b("sinein",[.47,
0,.745,.715,1,1]);b("sineout",[.39,.575,.565,1,1,1]);b("sineinout",[.445,.05,.55,.95,1,1]);b("quadin",[.55,.085,.68,.53,1,1]);b("quadout",[.25,.46,.45,.94,1,1]);b("quadinout",[.455,.03,.515,.955,1,1]);b("cubicin",[.55,.055,.675,.19,1,1]);b("cubicout",[.215,.61,.355,1,1,1]);b("cubicinout",[.645,.045,.355,1,1,1]);b("quartin",[.895,.03,.685,.22,1,1]);b("quartout",[.165,.84,.44,1,1,1]);b("quartinout",[.77,0,.175,1,1,1]);b("quintin",[.755,.05,.855,.06,1,1]);b("quintout",[.23,1,.32,1,1,1]);b("quintinout",
[.86,0,.07,1,1,1]);b("expoin",[.95,.05,.795,.035,1,1]);b("expoout",[.19,1,.22,1,1,1]);b("expoinout",[1,0,0,1,1,1]);b("circin",[.6,.04,.98,.335,1,1]);b("circout",[.075,.82,.165,1,1,1]);b("circinout",[.785,.135,.15,.86,1,1]);b("backin",[.6,-.28,.735,.045,1,1]);b("backout",[.175,.885,.32,1.275,1,1]);b("backinout",[.68,-.55,.265,1.55,1,1]);var w=[function(a){return h["default"](a)},function(a){return h["in"](a)},function(a){return h.out(a)},function(a){return h.inout(a)},function(a){return a*a},function(a){return a*
(2-a)},function(a){if(.5>a)return 2*a*a;a=2*(a-.5);return-(a*(a-2)-1)/2},function(a){return a*a*a},function(a){--a;return a*a*a+1},function(a){if(.5>a)return a*=2,a*a*a/2;a=2*(a-.5)-1;return(a*a*a+2)/2},function(a){return 1-Math.cos(Math.PI/2*a)},function(a){return Math.sin(Math.PI/2*a)},function(a){return-(Math.cos(Math.PI*a)-1)/2},function(a){return 0>=a?0:Math.pow(2,10*(a-1))},function(a){return 1<=a?1:-Math.pow(2,-10*a)+1},function(a){return 0>=a?0:1<=a?1:.5>a?Math.pow(2,10*(2*a-1))/2:(-Math.pow(2,
-20*(a-.5))+2)/2},function(a){return 1-Math.sqrt(1-a*a)},function(a){--a;return Math.sqrt(1-a*a)},function(a){return 1>(a*=2)?-(Math.sqrt(1-a*a)-1)/2:(Math.sqrt(1-(a-=2)*a)+1)/2},a(function(a){return a*a*(2.70158*a-1.70158)}),function(a){return function(b){return(a(b)- -.2)/1.4}}(function(a){return--a*a*(2.70158*a+1.70158)+1}),a(function(a){var b=1.70158;return 1>(a*=2)?a*a*(((b*=1.525)+1)*a-b)/2:((a-=2)*a*(((b*=1.525)+1)*a+b)+2)/2}),function(a){return 1-w[23](1-a)},a(function(a){return a<1/2.75?
7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),function(a){return.5>a?.5*w[22](2*a):.5*w[23](2*a-1)+.5},function(a){return 0},function(a){return 1},function(a){return.5>a?0:1}];y.exports=n},{"../constants.js":12,"../graphics/segments.js":20}],6:[function(c,y,v){function b(q){return e.roundTo(q,9)}function f(q,a){return b(q)>b(a)?1:b(q)<b(a)?-1:0}function a(q,a,g){this.id=e.guid();this.name=q||"";this.type=m.ET_EMPTY;this.children=
[];this.parent=null;this.level=0;this.anim=null;this.disabled=!1;this.visible=!0;this.$data=null;this.rendering=this.registered=this.shown=!1;this.initState();this.initVisuals();this.initTime();this.initEvents();this.$modifiers={};this.$painters={};g&&this.modify(g);a&&this.paint(a);this.__painting=this.__modifying=null;this.__modifiers_hash={};this.__painters_hash={};this.__detachQueue=[];this.__frameProcessors=[];this._initHandlers();var b=this,k=this.on;this.on=function(q,a){return k.call(b,q,
a)};this.addSysModifiers();this.addSysPainters();d.liveDebug&&this.addDebugRender()}c("../log.js");var e=c("../utils.js"),d=c("../global_opts.js"),n=e.iter,h=e.is,w=c("engine"),m=c("../constants.js");v=c("../events.js");var r=v.provideEvents,z=v.EventState,x=c("../../vendor/transform.js"),t=c("../render.js"),B=c("../graphics/brush.js"),p=c("../graphics/color.js"),A=c("../graphics/bounds.js"),C=c("./modifier.js"),E=c("./painter.js"),u=c("./band.js"),k=c("../errors.js"),g=c("../loc.js").Errors;a.DEFAULT_PVT=
[.5,.5];a.DEFAULT_REG=[0,0];a._$=function(q,g,b){return new a(q,g,b)};a.NO_TIME=null;a.NO_BAND=null;a.DEFAULT_LEN=Infinity;a._customImporters=[];r(a,[m.X_MCLICK,m.X_MDCLICK,m.X_MUP,m.X_MDOWN,m.X_MMOVE,m.X_MOVER,m.X_MOUT,m.X_START,m.X_STOP]);a.prototype.is=function(q){return this.type==q};a.prototype.initState=function(){this.y=this.x=0;this.sy=this.sx=1;this.angle=this.hy=this.hx=0;this.alpha=1;this.matrix?this.matrix.reset():this.matrix=new x;this._y=this._x=0;this._hy=this._hx=this._sy=this._sx=
1;this._angle=0;this._alpha=1;this._matrix?this._matrix.reset():this._matrix=new x;this.$reg=a.DEFAULT_REG;this.$pivot=a.DEFAULT_PVT;return this};a.prototype.resetState=a.prototype.initState;a.prototype.initVisuals=function(){this.$video=this.$audio=this.$my_bounds=this.lastBoundsSavedAt=this.$bounds=this.$mpath=this.$mask=this.composite_op=this.$image=this.$text=this.$path=this.$shadow=this.$stroke=this.$fill=null;return this};a.prototype.resetVisuals=a.prototype.initVisuals;a.prototype.initTime=
function(){this.mode=m.R_ONCE;this.nrep=Infinity;this.lband=[0,a.DEFAULT_LEN];this.gband=[0,a.DEFAULT_LEN];this.keys={};this["switch"]=this.rt=this.t=this.key=this.tf=null;this.__resetTimeCache();return this};a.prototype.resetTime=a.prototype.initTime;a.prototype.__resetTimeCache=function(){this.__lastJump=this.cur_rt=this.cur_t=null;this.__firedStop=this.__firedStart=this.__jumpLock=!1};a.prototype.initEvents=function(){this.evts={};this.__evt_st=new z;this.__evtCache=[];return this};a.prototype.resetEvents=
a.prototype.initEvents;a.prototype.path=function(q){return q?(this.invalidate(),this.type=m.ET_PATH,this.$path=h.str(q)?new Path(q):q,this):this.$path};a.prototype.text=function(q){return q?(this.invalidate(),this.type=m.ET_TEXT,this.$text=h.str(q)||h.arr(q)?new Text(q):q,this):this.$text};a.prototype.image=function(q,a){return q?(this.invalidate(),this.type=m.ET_SHEET,this.$image=h.str(q)?new Image(q,a):q,this):this.$image};a.prototype.fill=function(q){return q?(this.$fill=q instanceof B?q:B.fill(q),
this):this.$fill};a.prototype.noFill=function(){this.$fill=p.TRANSPARENT;return this};a.prototype.stroke=function(q,a){return q?(q instanceof B?(this.$stroke=q,h.defined(a)&&(this.$stroke.width=a)):this.$stroke=B.stroke(q,a),this):this.$stroke};a.prototype.noStroke=function(){this.$stroke=null;return this};a.prototype.shadow=function(q,a,g,b){return q?(this.$shadow=q instanceof B?q:B.shadow(q,a,g,b),this):this.$shadow};a.prototype.modifiers=function(q,g,b){b=b||C.ALL_MODIFIERS;g=g||0;this.applyPrevState(this);
this.cur_t=q;this.cur_rt=q/(this.lband[1]-this.lband[0]);h.num(this.__appliedAt)&&(this._t=this.__appliedAt,this._rt=this.__appliedAt/(this.lband[1]-this.lband[0]));this.__loadEvents();for(var d=this.$modifiers,k,r,e,p,u=0,t=b.length;u<t;u++){this.__modifying=k=b[u];this.__mbefore(k);if(r=d[k])for(var c=0,f=r.length;c<f;c++)if(e=r[c],p=this.__adaptModTime(e,q),null!==p&&(!1===p||!1===e.apply(this,p[0],g,p[1])))return this.__mafter(q,this.__modifying,!1),this.__modifying=null,!1;this.__mafter(q,k,
!0)}this.matrix=a.getMatrixOf(this,this.matrix);this.__modifying=null;this.__appliedAt=q;this.resetEvents();return!0};a.prototype.painters=function(q,a){for(var g=a||E.ALL_PAINTERS,b=this.$painters,d,k,r,h=0,e=g.length;h<e;h++){this.__painting=d=g[h];this.__pbefore(q,d);if(k=b[d])for(var p=0,u=k.length;p<u;p++)r=k[p],r.apply(this,q);this.__pafter(q,d)}this.__painting=null};a.prototype.forAllModifiers=function(q){for(var a=C.ALL_MODIFIERS,g=this.$modifiers,b,d,k=0,h=a.length;k<h;k++)if(b=a[k],d=g[b])for(var r=
0,e=d.length;r<e;r++)q(d[r],b)};a.prototype.forAllPainters=function(q){for(var a=E.ALL_PAINTERS,g=this.$painters,b,d,k=0,r=a.length;k<r;k++)if(b=a[k],d=g[b])for(var h=0,e=d.length;h<e;h++)q(d[h],b)};a.prototype.draw=a.prototype.painters;a.prototype.transform=function(q){q.globalAlpha*=this.alpha;this.matrix.apply(q);return this.matrix};a.prototype.invTransform=function(q){var g=a.getIMatrixOf(this);q.globalAlpha*=this.alpha;g.apply(q);return g};a.prototype.render=function(q,g,b){if(!this.disabled){this.rendering=
!0;var d=!1,k=this.ltime(g);if(k!==a.NO_TIME){this.cur_rt=this.cur_t=null;d=this.__preRender(g,k,q);this.anim&&this.anim.__informEnabled&&this.inform(k);d&&(d=this.fits(k)&&this.modifiers(k,b)&&this.visible);if(d){q.save();g=this.gtime(k);var h=this.$mask,r=!1,e,p;h&&(e=h.ltime(k),p=h.gtime(e),r=h.fits(e)&&h.modifiers(e,b)&&h.visible);if(r){h.ensureHasMaskCanvas();var k=h.__maskCvs,u=h.__maskCtx,r=h.__backCvs,t=h.__backCtx,c=h.bounds(e).toPoints(),f=Number.MAX_VALUE;e=Number.MAX_VALUE;for(var x=Number.MIN_VALUE,
z=Number.MIN_VALUE,m,n=0,B=c.length;n<B;n++)m=c[n],m.x<f&&(f=m.x),m.y<e&&(e=m.y),m.x>x&&(x=m.x),m.y>z&&(z=m.y);c=w.PX_RATIO;m=f;n=e;f=Math.round(x-f);e=Math.round(z-e);z=this._maskCvsSize||w.getCanvasSize(k);z[0]<f||z[1]<e?(this._maskCvsSize=w.setCanvasSize(k,f,e),w.setCanvasSize(r,f,e)):this._maskCvsSize=z;t.clearRect(0,0,f*c,e*c);u.clearRect(0,0,f*c,e*c);t.save();u.save();t.setTransform(c,0,0,c,-m*c,-n*c);u.setTransform(c,0,0,c,-m*c,-n*c);this.transform(t);this.painters(t);this.each(function(q){q.render(t,
g,b)});h.transform(u);h.painters(u);h.each(function(q){q.render(u,p,b)});t.globalCompositeOperation="destination-in";t.setTransform(1,0,0,1,0,0);t.drawImage(k,0,0);q.drawImage(r,0,0,Math.floor(f*c),Math.floor(e*c),m,n,f,e);u.restore();t.restore()}else this.transform(q),this.painters(q),this.each(function(a){a.render(q,g,b)});q.restore()}this.shown=d;this.__postRender();this.rendering=!1;return this}}};a.prototype.pivot=function(q,a){this.$pivot=[q,a];return this};a.prototype.reg=function(q,a){this.$reg=
[q,a];return this};a.prototype.move=function(q,a){this.x=q;this.y=a;return this};a.prototype.rotate=function(q){this.angle=q;return this};a.prototype.rotateInDeg=function(q){return this.rotate(q/180*Math.PI)};a.prototype.scale=function(q,a){this.sx=q;this.sy=a;return this};a.prototype.skew=function(q,a){this.hx=q;this.hy=a;return this};a.prototype.repeat=function(a,g){this.mode=a;this.nrep=h.num(g)?g:Infinity;return this};a.prototype.once=function(){this.mode=m.R_ONCE;this.nrep=Infinity;return this};
a.prototype.stay=function(){this.mode=m.R_STAY;this.nrep=Infinity;return this};a.prototype.loop=function(a){this.mode=m.R_LOOP;this.nrep=h.num(a)?a:Infinity;return this};a.prototype.bounce=function(a){this.mode=m.R_BOUNCE;this.nrep=h.num(a)?a:Infinity;return this};a.prototype.jump=function(a){this.t=a;return this};a.prototype.jumpTo=function(a){if(a=h.str(selector)?this.find(selector):selector)return this.anim?this.anim.jump(a.gband[0]):this.jump(a.lband[0]),this};a.prototype.freeze=function(){if(this.frozen)return this;
this.frozen=!0;this.__m_freeze=function(a){this.frozen&&(h.defined(this.pausedAt)?this.t=this.pausedAt:this.pausedAt=a)};this.modify(this.__m_freeze);return this};a.prototype.unfreeze=function(){this.frozen=!1;this.t=null;this.pausedAt=void 0;this.__m_freeze&&this.unmodify(this.__m_freeze);return this};a.prototype.modify=function(a,g){h.arr(a)||(g=a,a=null);if(!g)throw k.element("No modifier was passed to .modify() method",this);if(!h.modifier(g)&&h.fun(g))g=new C(g,m.MOD_USER);else if(!h.modifier(g))throw k.element("Modifier should be either a function or a Modifier instance",
this);if(!g.type)throw k.element("Modifier should have a type defined",this);a&&(g.$band=a);if(g.__applied_to&&g.__applied_to[this.id])throw k.element("This modifier is already applied to this Element",this);this.$modifiers[g.type]||(this.$modifiers[g.type]=[]);this.$modifiers[g.type].push(g);this.__modifiers_hash[g.id]=g;g.__applied_to||(g.__applied_to={});g.__applied_to[this.id]=this.$modifiers[g.type].length;return this};a.prototype.removeModifier=function(a){if(!h.modifier(a))throw k.element("Please pass Modifier instance to removeModifier",
this);if(!this.__modifiers_hash[a.id])throw k.element("Modifier wasn't applied to this element",this);if(!a.__applied_to||!a.__applied_to[this.id])throw k.element(g.A.MODIFIER_NOT_ATTACHED,this);e.removeElement(this.__modifiers_hash,a.id);e.removeElement(this.$modifiers[a.type],a);e.removeElement(a.__applied_to,this.id);return this};a.prototype.paint=function(a){if(!a)throw k.element("No painter was passed to .paint() method",this);if(!h.painter(a)&&h.fun(a))a=new E(a,m.MOD_USER);else if(!h.painter(a))throw k.element("Painter should be either a function or a Painter instance",
this);if(!a.type)throw k.element("Painter should have a type defined",this);if(a.__applied_to&&a.__applied_to[this.id])throw k.element("This painter is already applied to this Element",this);this.$painters[a.type]||(this.$painters[a.type]=[]);this.$painters[a.type].push(a);this.__painters_hash[a.id]=a;a.__applied_to||(a.__applied_to={});a.__applied_to[this.id]=this.$painters[a.type].length;return this};a.prototype.removePainter=function(a){if(!h.painter(a))throw k.element("Please pass Painter instance to removePainter",
this);if(!this.__painters_hash[a.id])throw k.element("Painter wasn't applied to this element",this);if(!a.__applied_to||!a.__applied_to[this.id])throw k.element(g.A.PAINTER_NOT_ATTACHED,this);e.removeElement(this.__painters_hash,a.id);e.removeElement(this.$painters[a.type],a);e.removeElement(a.__applied_to,this.id);return this};a.prototype.tween=function(a){if(!h.tween(a))throw k.element("Please pass Tween instance to .tween() method",this);return this.modify(a)};a.prototype.removeTween=function(a){if(!h.tween(a))throw k.element("Please pass Tween instance to .removeTween() method",
this);return this.removeModifier(a)};a.prototype.add=function(q,g,b){if(g)q=new a(q,g),b&&q.changeTransform(b),this._addChild(q);else if(h.arr(q))for(b=0,q=elms.length;b<q;b++)this._addChild(elms[b]);else this._addChild(q);this.invalidate();return this};a.prototype.remove=function(a){if(!a)throw k.element(g.A.NO_ELEMENT_TO_REMOVE);if(0===this.__safeDetach(a))throw k.element(g.A.NO_ELEMENT);this.invalidate();return this};a.prototype._unbind=function(){if(this.parent.__unsafeToRemove||this.__unsafeToRemove)throw k.element(g.A.UNSAFE_TO_REMOVE);
this.parent=null;this.anim&&this.anim._unregister(this)};a.prototype.detach=function(){if(0===this.parent.__safeDetach(this))throw k.element(g.A.ELEMENT_NOT_ATTACHED,this);};a.prototype.makeBandFit=function(){var a=this.findWrapBand();this.gband=a;this.lband[1]=a[1]-a[0]};a.prototype.fits=function(q){return 0>q||q===a.NO_TIME?!1:0>=f(q,this.lband[1]-this.lband[0])};a.prototype.gtime=function(a){return this.gband[0]+a};a.prototype.ltime=function(q){return this.__checkJump(a.checkRepeatMode(this.__checkSwitcher(q),
this.gband,this.mode,this.nrep))};a.prototype.inform=function(a){if(0<=f(a,0)){var g=this.lband[1]-this.lband[0],b=f(a,g);this.__firedStart||(this.fire(m.X_START,a,g),this.__firedStart=!0);0<=b&&!this.__firedStop&&(this.fire(m.X_STOP,a,g),this.traverse(function(b){b.__firedStop||(b.fire(m.X_STOP,a,g),b.__firedStop=!0)}),this.__firedStop=!0)}};a.prototype.band=function(a,g){if(!h.defined(a))return this.lband;h.arr(a)&&(a=a[0],g=a[1]);h.defined(g)||(g=Infinity);this.lband=[a,g];if(this.parent){var b=
this.parent;this.gband=[b.gband[0]+a,b.gband[0]+g]}return this};a.prototype.duration=function(a){if(!h.defined(a))return this.lband[1]-this.lband[0];this.gband=[this.gband[0],this.gband[0]+a];this.lband=[this.lband[0],this.lband[0]+a];return this};a.prototype._max_tpos=function(){return 0<=this.gband[1]?this.gband[1]:0};a.prototype.m_on=function(a,g){this.modify(new C(function(b){if(this.__evt_st.check(a))for(var d=this.evts[a],k=0,h=d.length;k<h;k++)if(!1===g.call(this,d[k],b))return!1},m.MOD_EVENT))};
a.prototype.findWrapBand=function(){if(0===this.children.length)return this.gband;var a=[Infinity,0];this.each(function(g){a=u.expand(a,g.gband)});return Infinity!==a[0]?a:null};a.prototype.dispose=function(){this.disposeHandlers();this.disposeVisuals();this.each(function(a){a.dispose()})};a.prototype.disposeVisuals=function(){this.$path&&this.$path.dispose();this.$text&&this.$text.dispose();this.$image&&this.$image.dispose();this.$video&&this.$video.dispose();this.$mpath&&this.$mpath.dispose()};
a.prototype.reset=function(){this.resetEvents();this.__resetTimeCache();var a=this;this.forAllModifiers(function(g){g.__wasCalled&&(g.__wasCalled[a.id]=!1);h.defined(g.__wasCalledAt)&&(g.__wasCalledAt[a.id]=-1)});this.each(function(a){a.reset()})};a.prototype.each=function(a){var g=this.children;this.__unsafeToRemove=!0;for(var b=0,d=g.length;b<d&&!1!==a(g[b]);b++);this.__unsafeToRemove=!1;return this};a.prototype.reverseEach=function(a){var g=this.children;this.__unsafeToRemove=!0;for(var b=g.length;b--&&
!1!==a(g[b]););this.__unsafeToRemove=!1;return this};a.prototype.firstParent=function(a){if(a(this))return this;for(var g=this.parent;g&&!a(g);)g=g.parent;return g};a.prototype.traverse=function(a){var g=this.children;this.__unsafeToRemove=!0;for(var b=0,d=g.length;b<d;b++){var k=g[b];if(!1===a(k))break;k.traverse(a)}this.__unsafeToRemove=!1;return this};a.prototype.iter=function(a,g){this.__unsafeToRemove=!0;n(this.children).each(a,g);this.__unsafeToRemove=!1;return this};a.prototype.hasChildren=
function(){return 0<this.children.length};a.prototype.deepIterateChildren=function(a,g){this.__unsafeToRemove=!0;n(this.children).each(function(b){b.deepIterateChildren(a,g);return a(b)},g);this.__unsafeToRemove=!1};a.prototype.__performDetach=function(){var a=this.children;n(this.__detachQueue).each(function(g){0<=(idx=a.indexOf(g))&&(a.splice(idx,1),g._unbind())});this.__detachQueue=[]};a.prototype.clear=function(){if(this.__unsafeToRemove)throw k.element(g.A.UNSAFE_TO_REMOVE,this);if(this.rendering)this.__detachQueue=
this.__detachQueue.concat(this.children);else{var a=this.children;this.children=[];n(a).each(function(a){a._unbind()})}return this};a.prototype.lock=function(){this.__jumpLock=!0;this.__state=this.extractState();this.__pstate=this.extractPrevState()};a.prototype.unlock=function(a){a=a?this.extractState():void 0;this.applyState(this.__state);this.applyPrevState(this.__pstate);this.__pstate=this.__state=null;this.__jumpLock=!1;return a};a.prototype.extractState=function(){return{x:this.x,y:this.y,sx:this.sx,
sy:this.sy,hx:this.hx,hy:this.hy,angle:this.angle,alpha:this.alpha,t:this.t,rt:this.rt,key:this.key}};a.prototype.extractPrevState=function(){return{x:this._x,y:this._y,sx:this._sx,sy:this._sy,hx:this._hx,hy:this._hy,angle:this._angle,alpha:this._alpha,t:this._t,rt:this._rt,key:this._key}};a.prototype.applyState=function(a){this.x=a.x;this.y=a.y;this.sx=a.sx;this.sy=a.sy;this.hx=a.hx;this.hy=a.hy;this.angle=a.angle;this.alpha=a.alpha;this.t=a.t;this.rt=a.rt;this.key=a.key};a.prototype.applyPrevState=
function(a){this._x=a.x;this._y=a.y;this._sx=a.sx;this._sy=a.sy;this._hx=a.hx;this._hy=a.hy;this._angle=a.angle;this._alpha=a.alpha;this._t=a.t;this._rt=a.rt;this._key=a.key};a.prototype.stateAt=function(g){this.lock();return this.unlock(this.modifiers(g,0,a.NOEVT_MODIFIERS))};a.prototype.pos=function(a,g){return h.defined(a)?this.move(a,g):{x:this.x,y:this.y}};a.prototype.offset=function(){for(var a=0,g=0,b=this.parent;b;)a+=b.x,g+=b.y,b=b.parent;return[a,g]};a.prototype.invalidate=function(){this.lastBoundsSavedAt=
this.$bounds=this.$my_bounds=null;this.parent&&this.parent.invalidate();return this};a.prototype.invalidateVisuals=function(){var a=this.$path||this.$text||this.$image||this.$video;a&&a.invalidate()};a.prototype.bounds=function(a){if(h.defined(this.lastBoundsSavedAt)&&0==f(this.lastBoundsSavedAt,a))return this.$bounds;var g=this.myBounds();this.children.length&&(g=g.clone(),this.each(function(b){g.add(b.bounds(a))}));g=this.adaptBounds(g);this.lastBoundsSavedAt=a;return this.$bounds=g};a.prototype.myBounds=
function(){if(this.$my_bounds)return this.$my_bounds;var a=this.$path||this.$text||this.$image||this.$video;return a?this.$my_bounds=a.bounds():this.$my_bounds=A.NONE};a.prototype.inside=function(a,g,b){if(!g||g(this)){var d=this.adapt(a.x,a.y);if(this.myBounds().inside(d)&&(a=this.$path||this.$text||this.$image||this.$video)&&a.inside(d))return b(this,d);this.reverseEach(function(a){return a.inside(d,g,b)})}};a.prototype.adapt=function(a,g){return this.matrix.transformPointInverse(a,g)};a.prototype.adaptBounds=
function(a){var g=this.matrix,b=g.transformPoint(a.x,a.y),d=g.transformPoint(a.x+a.width,a.y),k=g.transformPoint(a.x+a.width,a.y+a.height);a=g.transformPoint(a.x,a.y+a.height);var g=Math.min(b.x,d.x,a.x,k.x),h=Math.min(b.y,d.y,a.y,k.y);return new A(g,h,Math.max(b.x,d.x,a.x,k.x)-g,Math.max(b.y,d.y,a.y,k.y)-h)};a.prototype.inverseAdaptBounds=function(a){var g=this.matrix,b=g.transformPointInverse(a.x,a.y),d=g.transformPointInverse(a.x+a.width,a.y),k=g.transformPointInverse(a.x+a.width,a.y+a.height);
a=g.transformPointInverse(a.x,a.y+a.height);var g=Math.min(b.x,d.x,a.x,k.x),h=Math.min(b.y,d.y,a.y,k.y);return new A(g,h,Math.max(b.x,d.x,a.x,k.x)-g,Math.max(b.y,d.y,a.y,k.y)-h)};a.prototype.isEmpty=function(){var a=this.myBounds();return 0===a.width&&0===a.height};a.prototype.applyVisuals=function(a){var g=this.$path||this.$text||this.$image||this.$video;g&&g.apply(a,this.$fill,this.$stroke,this.$shadow)};a.prototype.applyBrushes=function(a){this.$shadow&&this.$shadow.apply(a);this.$fill&&(this.$fill.apply(a),
a.fill());this.$shadow&&B.clearShadow(a);this.$stroke&&(this.$stroke.apply(a),a.stroke())};a.prototype.applyAComp=function(a){this.composite_op&&(a.globalCompositeOperation=m.AC_NAMES[this.composite_op])};a.prototype.mask=function(a){if(!a)return this.$mask;this.$mask=a;return this};a.prototype.noMask=function(){this.$mask=null;return this};a.prototype.ensureHasMaskCanvas=function(a){this.__maskCvs&&this.__backCvs||(this.__maskCvs=w.createCanvas(1,1),this.__maskCtx=w.getContext(this.__maskCvs,"2d"),
this.__backCvs=w.createCanvas(1,1),this.__backCtx=w.getContext(this.__backCvs,"2d"))};a.prototype.removeMaskCanvases=function(){this.__maskCvs&&w.disposeElement(this.__maskCvs);this.__backCvs&&w.disposeElement(this.__backCvs);this.__backCtx=this.__maskCtx=null};a.prototype.data=function(a){if(!h.defined(a))return this.$data;this.$data=a;return this};a.prototype.toString=function(){var a=["[ Element "];a.push("'"+(this.name||this.id)+"' ");a.push("]");return a.join("")};a.prototype.find=function(a){return this.anim.find(a,
this)};a.prototype.findAll=function(a){return this.anim.findAll(a,this)};a.prototype.clone=function(){var g=new a;g.name=this.name;g.children=[].concat(this.children);g.$modifiers=[].concat(this.$modifiers);g.$painters=[].concat(this.$painters);g.level=this.level;a.transferState(this,g);a.transferVisuals(this,g);a.transferTime(this,g);g.__u_data=this.__u_data;return g};a.prototype.shallow=function(){var a=this.clone();a.children=[];for(var g=this.children,b=a.children,d=0,k=g.length;d<k;d++){var h=
g[d].shallow();h.parent=a;b.push(h)}a.$modifiers={};this.forAllModifiers(function(g,b){a.modify(g)});a.$painters={};this.forAllPainters(function(g,b){a.paint(g)});a.__u_data=e.obj_clone(this.__u_data);return a};a.prototype.asClip=function(a,g,b){if(g!=m.R_ONCE)return this.clip_band=a,this.clip_mode=g,this.clip_nrep=b,this};a.prototype._addChild=function(a){a.parent=this;a.level=this.level+1;this.children.push(a);this.anim&&this.anim._register(a);u.recalc(this)};a.prototype._stateStr=function(){return"x: "+
this.x+" y: "+this.y+"\nsx: "+this.sx+" sy: "+this.sy+"\nangle: "+this.angle+" alpha: "+this.alpha+"\np: "+this.p+" t: "+this.t+" key: "+this.key+"\n"};a.prototype.__mbefore=function(a,g){};a.prototype.__mafter=function(a,g,b){};a.prototype.__adaptModTime=function(g,d){var k=this.lband[1]-this.lband[0],r=g.$easing,e=g.$band||g.$time,p=g.$relative,u=g.is_tween;if(this.clip_band&&(d=a.checkRepeatMode(d,this.clip_band,this.clip_mode||m.R_ONCE,this.clip_nrep),0>d))return!1;if(null===e)e=d;else if(h.arr(e)){if(p&&
(e=[e[0]*k,e[1]*k]),k=e[1]-e[0],e=d-e[0],0>f(e,0)||0<f(e,k))return null}else{if(h.num(e)){if(g.__wasCalled&&g.__wasCalled[this.id]||!(0<=f(d,p?e*k:e)))return null;g.__wasCalled||(g.__wasCalled={});g.__wasCalledAt||(g.__wasCalledAt={});g.__wasCalled[this.id]=!0;g.__wasCalledAt[this.id]=d}e=d}p||u?h.finite(k)&&(e=b(e)/b(k),k=b(k)):(e=b(e),k=b(k));return r?[r(e,k),k]:[e,k]};a.prototype.__pbefore=function(a,g){};a.prototype.__pafter=function(a,g){};a.prototype.__checkJump=function(g){if(g===a.NO_TIME)return a.NO_TIME;
if(this.tf)return this.tf(g);var b=null,d=this.lband[1]-this.lband[0],b=h.defined(this.p)?this.p:null,b=null===b&&null!==this.t?this.t:b,b=null===b&&null!==this.rt&&h.finite(d)?this.rt*d:b,b=null===b&&h.defined(this.key)?this.keys[this.key]:b;if(null!==b){if(0>b||b>d)throw k.element("Failed to calculate jump",this);if(!this.__jumpLock)return this.__lastJump=[g,b],this.key=this.t=this.p=null,b}b=null!==b?b:g;return h.defined(this.__lastJump)?(h.finite(this.__lastJump[1])?this.__lastJump[1]:0)+(b-this.__lastJump[0]):
null!==b?b:a.NO_TIME};a.prototype.__checkSwitcher=function(g){if(!this.parent||!this.parent["switch"])return g;var b=this.parent;return b["switch"]===m.SWITCH_OFF?a.NO_TIME:b["switch"]===this.name&&b.switch_band?g===a.NO_TIME?a.NO_TIME:g-b.switch_band[0]:a.NO_TIME};a.prototype.filterEvent=function(a,g){if(a!=m.X_START&&a!=m.X_STOP)if(this.shown)this.__saveEvt(a,g);else return a===m.X_STOP&&this.__resetTimeCache(),!1;return!0};a.prototype.__saveEvt=function(a,g){this.__evtCache.push([a,g])};a.prototype.__loadEvents=
function(){var a=this.__evtCache,g=a.length;this.resetEvents();if(0<g){for(var b,d,k,h=0;h<g;h++)b=a[h],d=b[0],this.__evt_st.save(d),k=this.evts,k[d]||(k[d]=[]),k[d].push(b[1]);this.__evtCache=[]}};a.prototype.__preRender=function(a,g,b){for(var d=this.__frameProcessors,k=0,h=d.length;k<h;k++)if(!1===d[k].call(this,a,g,b))return!1;return!0};a.prototype.__safeDetach=function(a,b){var d=-1,h=b||0,e=this.children;if(0<=(d=e.indexOf(a))){if(this.rendering||a.rendering)this.__detachQueue.push(a);else{if(this.__unsafeToRemove)throw k.element(g.A.UNSAFE_TO_REMOVE,
this);a._unbind();e.splice(d,1)}return 1}this.each(function(g){h+=g.__safeDetach(a,h)});return h};a.prototype.__postRender=function(){this.__performDetach()};a.prototype._hasRemoteResources=function(a,g){return g.imagesEnabled&&this.$image||this.is(m.ET_AUDIO)&&g.audioEnabled||this.is(m.ET_VIDEO)&&g.videoEnabled?!0:this.$mask?this.$mask._hasRemoteResources(a,g):!1};a.prototype._collectRemoteResources=function(a,g){var b=[];g.imagesEnabled&&this.$image&&b.push(this.$image.src);g.audioEnabled&&this.is(m.ET_AUDIO)&&
b.push(this.$audio.url);g.videoEnabled&&this.is(m.ET_VIDEO)&&b.push(this.$video.url);this.$mask&&(b=b.concat(this.$mask._collectRemoteResources(a,g)));return b};a.prototype._loadRemoteResources=function(a,g){g.imagesEnabled&&this.$image&&this.$image.load(this,g.id);this.is(m.ET_AUDIO)&&g.audioEnabled&&this.$audio.load(this,g);this.is(m.ET_VIDEO)&&g.videoEnabled&&this.$video.load(this,g);this.$mask&&this.$mask._loadRemoteResources(this,g)};a.mergeStates=function(a,g,b){b.x=a.x+g.x;b.y=a.y+g.y;b.sx=
a.sx*g.sx;b.sy=a.sy*g.sy;b.hx=a.hx+g.hx;b.hy=a.hy+g.hy;b.angle=a.angle+g.angle;b.alpha=a.alpha+g.alpha};a.transferState=function(a,g){g.x=a.x;g.y=a.y;g.sx=a.sx;g.sy=a.sy;g.hx=a.hx;g.hy=a.hy;g.angle=a.angle;g.alpha=a.alpha;g.$reg=[].concat(a.$reg);g.$pivot=[].concat(a.$pivot)};a.transferVisuals=function(a,g){g.$fill=B.clone(a.$fill);g.$stroke=B.clone(a.$stroke);g.$shadow=B.clone(a.$shadow);g.$path=a.$path?a.$path.clone():null;g.$text=a.$text?a.$text.clone():null;g.$image=a.$image?a.$image.clone():
null;g.$audio=a.$audio?a.$audio.clone():null;g.$video=a.$video?a.$video.clone():null;g.$mask=a.$mask?a.$mask:null;g.$mpath=a.$mpath?a.$mpath.clone():null;g.composite_op=a.composite_op};a.transferTime=function(a,g){g.mode=a.mode;g.nrep=a.nrep;g.lband=[].concat(a.lband);g.gband=[].concat(a.gband);g.keys=[].concat(a.keys);g.tf=a.tf};a.getMatrixOf=function(a,g){var b=g?(g.reset(),g):new x;b.translate(a.x,a.y);b.rotate(a.angle);b.shear(a.hx,a.hy);b.scale(a.sx,a.sy);b.translate(-a.$reg[0],-a.$reg[1]);var d=
a.$pivot;if(0===d[0]&&0===d[1])return b;var k=a.myBounds();if(!k||k===A.NONE)return b;b.translate(-(d[0]*(k.width||0)),-(d[1]*(k.height||0)));return b};a.getIMatrixOf=function(g,b){var d=a.getMatrixOf(g,b);d.invert();return d};a.checkRepeatMode=function(g,b,d,k){if(g===a.NO_TIME)return a.NO_TIME;if(!h.finite(b[1]))return g-b[0];var e,r;switch(d){case m.R_ONCE:return g-b[0];case m.R_STAY:return 0>=f(g,b[1])?g-b[0]:b[1]-b[0];case m.R_LOOP:d=b[1]-b[0];if(0>d)return-1;e=(g-b[0])/d;r=Math.floor(e);return 0>
r||e>k?-1:g=g-b[0]-r*d;case m.R_BOUNCE:d=b[1]-b[0];if(0>d)return-1;e=(g-b[0])/d;r=Math.floor(e);if(0>r||e>k)return-1;g=g-b[0]-r*d;return 0===r%2?g:d-g}};a.prototype.addSysModifiers=function(){};a.prototype.addSysPainters=function(){this.paint(t.p_applyAComp);this.paint(t.p_drawVisuals)};a.prototype.addDebugRender=function(){this.paint(t.p_drawPivot);this.paint(t.p_drawBounds);this.paint(t.p_drawReg);this.paint(t.p_drawName);this.paint(t.p_drawMPath)};y.exports=a},{"../../vendor/transform.js":43,"../constants.js":12,
"../errors.js":13,"../events.js":14,"../global_opts.js":15,"../graphics/bounds.js":16,"../graphics/brush.js":17,"../graphics/color.js":18,"../loc.js":27,"../log.js":28,"../render.js":34,"../utils.js":39,"./band.js":4,"./modifier.js":7,"./painter.js":8,engine:40}],7:[function(c,y,v){function b(a,b){this.id=e();this.type=b||f.MOD_USER;this.func=a;this.$easing=this.$data=this.$time=this.$band=null;this.$relative=!1;this.is_tween=b==f.MOD_TWEEN}var f=c("../constants.js");v=c("../utils.js");var a=v.is,
e=v.guid,d=c("./easing.js");b.ORDER=[f.MOD_SYSTEM,f.MOD_TWEEN,f.MOD_USER,f.MOD_EVENT];b.FIRST_MOD=f.MOD_SYSTEM;b.LAST_MOD=f.MOD_EVENT;b.ALL_MODIFIERS=[f.MOD_SYSTEM,f.MOD_TWEEN,f.MOD_USER,f.MOD_EVENT];b.NOEVT_MODIFIERS=[f.MOD_SYSTEM,f.MOD_TWEEN,f.MOD_USER];b.prototype.band=function(b,d){if(!a.defined(b))return this.$band;a.arr(b)&&(d=b[1],b=b[0]);a.defined(d)||(d=Infinity);this.$band=[b,d];return this};b.prototype.start=function(b){if(!a.defined(b))return this.$band[0];this.$band=this.$band?[b,this.$band[1]]:
[b,Infinity];return this};b.prototype.stop=function(b){if(!a.defined(b))return this.$band[1];this.$band=this.$band?[this.$band[0],b]:[0,b];return this};b.prototype.time=function(b){if(!a.num(b))return this.$time;this.$time=b;return this};b.prototype.relative=function(b){if(!a.defined(b))return this.$relative;this.$relative=b;return this};b.prototype.easing=function(a,b){if(!a)return this.$easing;this.$easing=n(a,b,this.$relative||this.is_tween);return this};b.prototype.clone=function(){var a=new b(this.$func,
this.$type);a.$time=this.$time;a.$band=this.$band;a.$data=this.$data;a.$easing=this.$easing;a.$relative=this.$relative;a.is_tween=this.is_tween;return a};b.prototype.apply=function(a,b,d,e){return this.func.call(a,b,d,e)};b.prototype.data=function(a){this.$data=a};var n=function(b,e,c){if(!b)return null;var r;if(a.str(b)){if(!d[b])throw Error("Unknown easing: "+b);r=d[b](e);return c?r:function(a,b){return r(a/b,b)*b}}if(a.fun(b)&&!e)return b;if(a.fun(b)&&e)return b(e);if(b.type)return r=d[b.type](b.data||
e),c?r:function(a,b){return r(a/b,b)*b};if(b.f)return b.f(b.data||e)};y.exports=b},{"../constants.js":12,"../utils.js":39,"./easing.js":5}],8:[function(c,y,v){function b(b,d){this.id=a();this.func=b;this.type=d||f.PNT_USER}var f=c("../constants.js"),a=c("../utils.js").guid;b.ORDER=[f.PNT_SYSTEM,f.PNT_USER,f.PNT_DEBUG];b.FIRST_PNT=f.PNT_SYSTEM;b.LAST_PNT=f.PNT_DEBUG;b.ALL_PAINTERS=[f.PNT_SYSTEM,f.PNT_USER,f.PNT_DEBUG];b.NODBG_PAINTERS=[f.PNT_SYSTEM,f.PNT_USER];b.prototype.apply=function(a,b){return this.func.call(a,
b)};y.exports=b},{"../constants.js":12,"../utils.js":39}],9:[function(c,y,v){function b(a){this.selector=a.selector;this.multiple=a.multiple;this.anywhere="/"!==a.selector[0];this.tokens="/"===a.selector[0]?a.selector.split("/").slice(1):[a.selector]}function f(a,b,d){return":"===b[0]&&d===parseInt(b.slice(1))||b===a.name}function a(b,d){for(var e=0;e<b.length;e++){if(f(b[e],d,e))return b[e];var r=a(b[e].children,d);if(r)return r}return null}function e(a,b,d){for(var r=0;r<b.length;r++)f(b[r],d,r)&&
a.push(b[r]),e(a,b[r].children,d);return a}function d(a,b,e){e=e||0;if(0===b.length||e>=b.length)return null;for(var r=b[e],c=e===b.length-1,x=0;x<a.length;x++)if(f(a[x],r,x)){if(c)return a[x];var t=d(a[x].children,b,e+1);if(t)return t}return null}function n(a,b,d,e){e=e||0;if(0===d.length||e>=d.length)return a;for(var c=d[e],x=e===d.length-1,t=0;t<b.length;t++)f(b[t],c,t)&&(x?a.push(b[t]):n(a,b[t].children,d,e+1));return a}b.prototype.over=function(b){if(!this.multiple&&this.anywhere)return a(b,
this.tokens[0]);if(this.multiple&&this.anywhere)return e([],b,this.tokens[0]);if(!this.multiple&&!this.anywhere)return d(b,this.tokens);if(this.multiple&&!this.anywhere)return n([],b,this.tokens)};b.one=function(a){return new b({selector:a,multiple:!1})};b.all=function(a){return new b({selector:a,multiple:!0})};y.exports=b},{}],10:[function(c,y,v){function b(b,d){var c=new e(null,a.MOD_TWEEN),t=m[b];c.def=t;c.func=function(a,b,d){c.$tween&&c.$tween.call(this,a,b,d)};c.is_tween=!0;c.tween_type=b;h.defined(d)?
c.value(d):t.from===f&&t.to===f&&(c.$tween=t.func(void 0,c));return c}function f(){}var a=c("../constants.js"),e=c("./modifier.js"),d=c("../graphics/brush.js"),n=c("../graphics/path.js"),h=c("../utils.js").is;c("../errors.js");var w=e,m={};w.DEFAULT_FROM=function(a,b){return h.defined(b)?[a,b[1]]:[a,null]};w.DEFAULT_TO=function(a,b){return h.defined(a)?[b[0],a]:[null,a]};w.register=function(a,d){d=h.fun(d)?{func:d}:d;d.from=d.from||w.DEFAULT_FROM;d.to=d.to||w.DEFAULT_TO;m[a]=d;w[a]=function(d){return b(a,
d)}};w._$=b;w.prototype.values=function(a,b){if(!h.defined(a)&&this.$value)return this.$value;this.$value=this.def.to(b,this.def.from(a,null));this.$tween=this.def.func(this.$value,this);return this};w.prototype.value=function(a){if(!h.defined(a)&&this.$value)return this.$value;this.$value=a;this.$tween=this.def.func(this.$value,this);return this};w.prototype.from=function(a,b){this.$value=this.def.from(h.defined(b)?[a,b]:a,this.$value);this.$tween=this.def.func(this.$value,this);return this};w.prototype.to=
function(a,b){this.$value=this.def.to(h.defined(b)?[a,b]:a,this.$value);this.$tween=this.def.func(this.$value,this);return this};w.register(a.T_TRANSLATE,{func:function(a){return function(b){var d=a.pointAt(b);d&&(this.x=d[0],this.y=d[1],this.$mpath_t=b,this.$mpath=0<a.length()?a:null)}},from:function(a,b){return b?b.line(a[0],a[1]):(new n).move(a[0],a[1])},to:function(a,b){return b?b.line(a[0],a[1]):(new n).move(a[0],a[1])}});w.register(a.T_SCALE,{func:function(a){var b=a[0],d=a[1];return function(a){this.sx=
b[0]*(1-a)+d[0]*a;this.sy=b[1]*(1-a)+d[1]*a}},from:function(a,b){a=a.length?a:[a,a];return b?[a,b[1]]:[a,[1,1]]},to:function(a,b){a=a.length?a:[a,a];return b?[b[0],a]:[[1,1],a]}});w.register(a.T_ROTATE,function(a){var b=a[0],d=a[1];return function(a){this.angle=b*(1-a)+d*a}});w.register(a.T_ROT_TO_PATH,{func:function(){return function(a){if(a=this.$mpath)this.angle+=a.tangentAt(this.$mpath_t||.001)}},from:f,to:f});w.register(a.T_ALPHA,function(a){var b=a[0],d=a[1];return function(a){this.alpha=b*
(1-a)+d*a}});w.register(a.T_SHEAR,{func:function(a){var b=a[0],d=a[1];return function(a){this.hx=b[0]*(1-a)+d[0]*a;this.hy=b[1]*(1-a)+d[1]*a}},from:function(a,b){a=a.length?a:[a,a];return b?[a,b[1]]:[a,[1,1]]},to:function(a,b){a=a.length?a:[a,a];return b?[b[0],a]:[[1,1],a]}});w.register(a.T_FILL,function(a){var b=d.interpolateBrushes(a[0],a[1]);return function(a){this.$fill=b(a)}});w.register(a.T_STROKE,function(a){var b=d.interpolateBrushes(a[0],a[1]);return function(a){this.$stroke=b(a)}});w.register(a.T_SHADOW,
function(a){var b=d.interpolateBrushes(a[0],a[1]);return function(a){this.$shadow=b(a)}});w.register(a.T_VOLUME,function(a){var b=a[0],d=a[1];return function(a){this.$audio.ready&&this.$audio.setVolume(b*(1-a)+d*a)}});w.register(a.T_DISPLAY,{func:function(a){return function(b){this.visible=a}},from:function(a,b){return a},to:function(a,b){return a}});w.register(a.T_SWITCH,{func:function(a,b){return function(d){this.switch_band=b.$band;this["switch"]=a}},from:f,to:f});y.exports=w},{"../constants.js":12,
"../errors.js":13,"../graphics/brush.js":17,"../graphics/path.js":19,"../utils.js":39,"./modifier.js":7}],11:[function(c,y,v){v="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};c=c("./constants.js");c=v.__anm_conf||{logImport:!1,logResMan:!1,logEvents:!1,logLevel:c.L_ERROR|c.L_WARN|c.L_INFO,doNotLoadAudio:!1,doNotLoadImages:!1,doNotRenderShadows:!1,engine:null};v.__anm_conf=c;y.exports=c},{"./constants.js":12}],12:[function(c,y,v){c={L_DEBUG:1,
L_INFO:2,L_WARN:4,L_ERROR:8,NOTHING:-1,STOPPED:0,PLAYING:1,PAUSED:2,LOADING:3,RES_LOADING:4,ERROR:5,M_CONTROLS_ENABLED:1,M_CONTROLS_DISABLED:2,M_INFO_ENABLED:4,M_INFO_DISABLED:8,M_HANDLE_EVENTS:16,M_DO_NOT_HANDLE_EVENTS:32,M_DRAW_STILL:64,M_DO_NOT_DRAW_STILL:128,M_INFINITE_DURATION:256,M_FINITE_DURATION:512};c.M_PREVIEW=c.M_CONTROLS_DISABLED|c.M_INFO_DISABLED|c.M_DO_NOT_HANDLE_EVENTS|c.M_DRAW_STILL|c.M_FINITE_DURATION;c.M_DYNAMIC=c.M_CONTROLS_DISABLED|c.M_INFO_DISABLED|c.M_HANDLE_EVENTS|c.M_DO_NOT_DRAW_STILL|
c.M_INFINITE_DURATION;c.M_VIDEO=c.M_CONTROLS_ENABLED|c.M_INFO_DISABLED|c.M_DO_NOT_HANDLE_EVENTS|c.M_DRAW_STILL|c.M_FINITE_DURATION;c.M_SANDBOX=c.M_CONTROLS_DISABLED|c.M_INFO_DISABLED|c.M_DO_NOT_HANDLE_EVENTS|c.M_DO_NOT_DRAW_STILL|c.M_FINITE_DURATION;c.LT_ANIMATION=1;c.LT_ELEMENTS=2;c.LT_IMPORT=3;c.LT_URL=4;c.LM_ONREQUEST="onrequest";c.LM_ONPLAY="onplay";c.LM_DEFAULT=c.LM_ONREQUEST;c.ET_EMPTY="empty";c.ET_PATH="path";c.ET_TEXT="text";c.ET_SHEET="image";c.ET_AUDIO="audio";c.ET_VIDEO="video";c.R_ONCE=
0;c.R_STAY=1;c.R_LOOP=2;c.R_BOUNCE=3;c.C_SRC_OVER=1;c.C_SRC_ATOP=2;c.C_SRC_IN=3;c.C_SRC_OUT=4;c.C_DST_OVER=5;c.C_DST_ATOP=6;c.C_DST_IN=7;c.C_DST_OUT=8;c.C_LIGHTER=9;c.C_DARKER=10;c.C_COPY=11;c.C_XOR=12;c.AC_NAMES=[];c.AC_NAMES[c.C_SRC_OVER]="source-over";c.AC_NAMES[c.C_SRC_ATOP]="source-atop";c.AC_NAMES[c.C_SRC_IN]="source-in";c.AC_NAMES[c.C_SRC_OUT]="source-out";c.AC_NAMES[c.C_DST_OVER]="destination-over";c.AC_NAMES[c.C_DST_ATOP]="destination-atop";c.AC_NAMES[c.C_DST_IN]="destination-in";c.AC_NAMES[c.C_DST_OUT]=
"destination-out";c.AC_NAMES[c.C_LIGHTER]="lighter";c.AC_NAMES[c.C_DARKER]="darker";c.AC_NAMES[c.C_COPY]="copy";c.AC_NAMES[c.C_XOR]="xor";c.BT_NONE="none";c.BT_FILL="fill";c.BT_STROKE="stroke";c.BT_SHADOW="shadow";c.TA_LEFT="left";c.TA_CENTER="center";c.TA_RIGHT="right";c.BL_TOP="top";c.BL_MIDDLE="middle";c.BL_BOTTOM="bottom";c.BL_ALPHABETIC="alphabetic";c.BL_HANGING="hanging";c.BL_IDEOGRAPHIC="ideographic";c.PC_ROUND="round";c.PC_BUTT="butt";c.PC_MITER="miter";c.PC_SQUARE="square";c.PC_BEVEL="bevel";
c.E_PATH="path";c.E_FUNC="function";c.E_CSEG="segment";c.E_STDF="standard";c.T_TRANSLATE="translate";c.T_SCALE="scale";c.T_ROTATE="rotate";c.T_ROT_TO_PATH="rotatetopath";c.T_ALPHA="alpha";c.T_SHEAR="shear";c.T_FILL="fill";c.T_STROKE="stroke";c.T_SHADOW="shadow";c.T_VOLUME="volume";c.T_DISPLAY="display";c.T_SWITCH="switch";c.MOD_SYSTEM="system";c.MOD_TWEEN="tween";c.MOD_USER="user";c.MOD_EVENT="event";c.PNT_SYSTEM="system";c.PNT_USER="user";c.PNT_DEBUG="debug";c.SWITCH_OFF="[None]";y.exports=c},{}],
13:[function(c,y,v){function b(a){return function(b){Error.captureStackTrace&&Error.captureStackTrace(this,this);b=Error(b||"");b.name=a;return b}}var f=c("./constants.js"),a=b("SystemError"),e=b("PlayerError"),d=b("AnimationError");y.exports={system:function(b,d){var e=new a(b);d&&d.fire(f.S_ERROR,e);return e},player:function(a,b){var d=new e(a);b&&b.fire(f.S_ERROR,d);return d},animation:function(a,b){var e=new d(a);b&&b.fire(f.X_ERROR,e);return e},element:function(a,b){var e=new d(a);b&&b.anim&&
b.anim.fire(f.X_ERROR,e);return e},SystemError:a,PlayerError:e,AnimationError:d}},{"./constants.js":12}],14:[function(c,y,v){function b(a){return 0===a.indexOf("mouse")}function f(a){return 0===a.indexOf("key")}function a(){this.reset()}var e=c("./constants.js"),d=c("./errors.js");e.S_NEW_PLAYER="new";e.S_PLAYER_DETACH="detach";e.X_MCLICK="mouseclick";e.X_MDCLICK="mousedoubleclick";e.X_MUP="mouseup";e.X_MDOWN="mousedown";e.X_MMOVE="mousemove";e.X_MOVER="mouseover";e.X_MOUT="mouseout";e.X_KPRESS="keypress";
e.X_KUP="keyup";e.X_KDOWN="keydown";e.X_START="bandstart";e.X_STOP="bandstop";e.X_ERROR="error";e.A_START="animationstart";e.A_STOP="animationstop";e.A_PAUSE="animationpause";e.S_CHANGE_STATE="statechange";e.S_PLAY="play";e.S_PAUSE="pause";e.S_STOP="stop";e.S_COMPLETE="complete";e.S_REPEAT="repeat";e.S_IMPORT="import";e.S_LOAD="load";e.S_RES_LOAD="loadresources";e.S_LOADING_PROGRESS="loadprogress";e.S_TIME_UPDATE="timeupdate";e.S_ERROR="error";var n={mouseclick:1,mousedoubleclick:2,mouseup:4,mousedown:8,
mousemove:16,mouseover:32,mouseout:64,keypress:128,keyup:256,keydown:512};a.prototype.reset=function(){this.state=0};a.prototype.save=function(a){this.state|=n[a]};a.prototype.check=function(a){return this.state&n[a]};y.exports={mouse:b,keyboard:f,mouseOrKeyboard:function(a){return b(a)||f(a)},registerEvent:function(a,b){e[a]=b},provideEvents:function(a,b){a.prototype._initHandlers=function(a){return function(){var b={};this.handlers=b;for(var d=0,e=a.length;d<e;d++)b[a[d]]=[]}}(b);a.prototype.on=
function(a,b){if(!this.handlers)throw d.system("Instance is not initialized with handlers, call __initHandlers in its constructor");if(!this.provides(a))throw d.system("Event '"+a+"' is not provided by "+this);if(b)return this.handlers[a].push(b),this.handlers[a].length-1};a.prototype.subscribedTo=function(a){return this.handlers&&this.handlers[a]&&this.handlers[a].length};a.prototype.fire=function(a){if(!this.disabled){if(!this.handlers)throw d.system("Instance is not initialized with handlers, call __initHandlers in its constructor");
if(!this.provides(a))throw d.system("Event '"+a+"' is not provided by "+this);if(!this.filterEvent||this.filterEvent.apply(this,arguments))if(this["handle_"+a]||this.handlers[a].length){for(var b=Array(arguments.length-1),e=1;e<arguments.length;e++)b[e-1]=arguments[e];this["handle_"+a]&&this["handle_"+a].apply(this,b);for(var e=this.handlers[a],p=0,c=e.length;p<c;p++)e[p].apply(this,b)}}};a.prototype.provides=function(a){return function(b){if(!this.handlers)throw d.system("Instance is not initialized with handlers, call __initHandlers in its constructor");
return b?this.handlers.hasOwnProperty(b):a}}(b);a.prototype.unbind=function(a,b){if(!this.handlers)throw d.system("Instance is not initialized with handlers, call __initHandlers in its constructor");this.provides(a)&&this.handlers[a][b]&&this.handlers[a].splice(b,1)};a.prototype.disposeHandlers=function(){if(!this.handlers)throw d.system("Instance is not initialized with handlers, call __initHandlers in its constructor");var a=this.handlers,b;for(b in a)a.hasOwnProperty(b)&&(a[b]=[])};for(var e=function(a){return function(b){this.fire(a,
b)}},c=0,f=b.length;c<f;c++)a.prototype["e_"+b[c]]=e(b[c])},EventState:a}},{"./constants.js":12,"./errors.js":13}],15:[function(c,y,v){y.exports={liveDebug:!1,autoFocus:!0,setTabindex:!0}},{}],16:[function(c,y,v){function b(a,b,d,c){this.x=a;this.y=b;this.width=d;this.height=c}var f=c("../utils.js").is;b.prototype.load=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};b.prototype.loadDiag=function(a,b,d,c){var f;d<a&&(f=a,a=d,d=f);c<b&&(f=b,b=c,c=f);this.x=a;this.y=b;this.width=
d-a;this.height=c-b};b.prototype.minX=function(){return this.x};b.prototype.minY=function(){return this.y};b.prototype.maxX=function(){return this.x+this.width};b.prototype.maxY=function(){return this.y+this.height};b.prototype.add=function(a){a.exist()&&(this.exist()?this.loadDiag(Math.min(this.minX(),a.minX()),Math.min(this.minY(),a.minY()),Math.max(this.maxX(),a.maxX()),Math.max(this.maxY(),a.maxY())):this.load(a))};b.prototype.addPoint=function(a){this.loadDiag(Math.min(this.minX(),a.x),Math.min(this.minY(),
a.y),Math.max(this.maxX(),a.x),Math.max(this.maxY(),a.y))};b.prototype.toPoints=function(){return[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height},{x:this.x,y:this.y+this.height}]};b.prototype.exist=function(){return!f.nan(this.x)};b.prototype.inside=function(a){return this.exist()?a.x>=this.x&&a.x-this.x<=this.width&&a.y>=this.y&&a.y-this.y<=this.height:!1};b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height)};b.NONE=new b(NaN,
NaN,NaN,NaN);y.exports=b},{"../utils.js":39}],17:[function(c,y,v){function b(d){this.type=a.BT_NONE;d&&b.value(d,this)}function f(){this.$radial=!1;this.$stops={};this.$radius=null;this.$bounds=[0,0,1,1];this.$direction=[[.5,0],[.5,1]]}var a=c("../constants.js"),e=c("../conf.js"),d=c("../utils.js"),n=d.is,h=c("engine"),w=c("../errors.js"),m=c("./color.js");b.DEFAULT_CAP=a.PC_ROUND;b.DEFAULT_JOIN=a.PC_ROUND;b.DEFAULT_FILL="#ffbc05";b.DEFAULT_STROKE=m.TRANSPARENT;b.DEFAULT_SHADOW=m.TRANSPARENT;b.prototype.apply=
function(d){if(this.type!=a.BT_NONE){var c=this._style||(this._style=this.adapt(d));if(this.type==a.BT_FILL)d.fillStyle=c;else if(this.type==a.BT_STROKE)0<this.width?(d.lineWidth=this.width,d.strokeStyle=c||b.DEFAULT_STROKE,d.lineCap=this.cap||b.DEFAULT_CAP,d.lineJoin=this.join||b.DEFAULT_JOIN):b.clearStroke(d);else if(this.type==a.BT_SHADOW&&!e.doNotRenderShadows){var f=h.getAnmProps(d);f.skip_shadows||(f=h.PX_RATIO*(f.factor||1),d.shadowColor=c,d.shadowBlur=this.blurRadius*f||0,d.shadowOffsetX=
this.offsetX*f||0,d.shadowOffsetY=this.offsetY*f||0)}}};b.prototype.invalidate=function(){this._converted=!1;this._style=null};b.prototype.convertColorsToRgba=function(){if(!this._converted){if(this.color&&n.str(this.color))this.color=m.fromStr(this.color);else if(this.grad)for(var a=this.grad.stops,b=0,d=a.length;b<d;b++)n.str(a[b][1])&&(a[b][1]=m.from(a[b][1]));this._converted=!0}};b.prototype.adapt=function(a){if(this.color&&n.str(this.color))return this.color;if(this.color)return m.toRgbaStr(this.color);
if(this.grad){var b=this.grad,d=b.stops,e=b.dir||[[.5,0],[.5,1]],c=b.r||[1,1];bounds=b.bounds||[0,0,1,1];a=n.defined(b.r)?bounds?a.createRadialGradient(bounds[0]+e[0][0]*bounds[2],bounds[1]+e[0][1]*bounds[3],Math.max(bounds[2],bounds[3])*c[0],bounds[0]+e[1][0]*bounds[2],bounds[1]+e[1][1]*bounds[3],Math.max(bounds[2],bounds[3])*c[1]):a.createRadialGradient(e[0][0],e[0][1],c[0],e[1][0],e[1][1],c[1]):bounds?a.createLinearGradient(bounds[0]+e[0][0]*bounds[2],bounds[1]+e[0][1]*bounds[3],bounds[0]+e[1][0]*
bounds[2],bounds[1]+e[1][1]*bounds[3]):a.createLinearGradient(e[0][0],e[0][1],e[1][0],e[1][1]);b=0;for(e=d.length;b<e;b++)c=d[b],a.addColorStop(c[0],m.adapt(c[1]));return a}return this.pattern?(d=this.pattern.elm,b=h.createCanvas(this.pattern.w,this.pattern.h,null,1),e=b.getContext("2d"),d.pivot(0,0),d.disabled=!1,d.render(e,0,0),d.disabled=!0,a.createPattern(b,this.pattern.repeat)):null};b.prototype.clone=function(){var a=new b;a.type=this.type;this.color&&n.str(this.color)?a.color=this.color:this.color&&
(a.color={r:this.color.r,g:this.color.g,b:this.color.b,a:this.color.a||1});if(this.grad){var d=this.grad,e={stops:[]};for(i=0;i<d.stops.length;i++)e.stops[i]=[].concat(d.stops[i]);e.dir=[];for(i=0;i<d.dir.length;i++)e.dir[i]=[].concat(d.dir[i]);d.r&&(e.r=[].concat(d.r));a.grad=e}this.hasOwnProperty("width")&&(a.width=this.width);this.hasOwnProperty("cap")&&(a.cap=this.cap);this.hasOwnProperty("join")&&(a.join=this.join);this.hasOwnProperty("blurRadius")&&(a.blurRadius=this.blurRadius);this.hasOwnProperty("offsetX")&&
(a.offsetX=this.offsetX);this.hasOwnProperty("offsetY")&&(a.offsetY=this.offsetY);return a};b.fill=function(d){var e=new b;e.type=a.BT_FILL;n.obj(d)?d instanceof f?e.grad=d.get():d.stops?e.grad=d:d.elm&&(e.pattern=d):e.color=d;return e};b.stroke=function(d,e,c,f,h){d=d&&d instanceof b?d.clone():b.fill(d);d.type=a.BT_STROKE;d.width=e||0;d.cap=c||b.DEFAULT_CAP;d.join=f||b.DEFAULT_JOIN;d.mitter=h;return d};b.shadow=function(d,e,c,f){d=b.fill(d);d.type=a.BT_SHADOW;d.blurRadius=e||0;d.offsetX=c||0;d.offsetY=
f||0;return d};b.value=function(d,e){var c=e||new b;if(d)if(n.str(d))c.type=a.BT_FILL,c.color=d;else if(n.obj(d))if(d=d instanceof f?d.get():d,n.defined(d.r)&&n.defined(d.g)&&n.defined(d.b))c.type=a.BT_FILL,c.color=d;else if(d.color||d.grad){n.defined(d.width)?c.type=a.BT_STROKE:n.defined(d.blurRadius)||n.defined(d.offsetX)?c.type=a.BT_SHADOW:c.type=a.BT_FILL;for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])}else throw w.element("Unknown type of brush");else throw w.element("Use Brush.fill, Brush.stroke or Brush.shadow to create brush from values");
else c.type=a.BT_NONE};b.gradient=function(){return new f};b.qfill=function(a,b){a.fillStyle=b};b.qstroke=function(a,d,e){a.lineWidth=e||1;a.strokeStyle=d;a.lineCap=b.DEFAULT_CAP;a.lineJoin=b.DEFAULT_JOIN};b.clearFill=function(a){a.fillStyle=b.DEFAULT_FILL};b.clearStroke=function(a){a.strokeStyle=b.DEFAULT_STROKE;a.lineWidth=0;a.lineCap=b.DEFAULT_CAP;a.lineJoin=b.DEFAULT_JOIN};b.clearShadow=function(a){a.shadowColor=b.DEFAULT_SHADOW;a.shadowBlur=0;a.shadowOffsetX=0;a.shadowOffsetY=0};b.interpolateBrushes=
function(e,c){var f=n.equal(e,c);e=e instanceof b?e:b.value(e);e._converted||e.convertColorsToRgba();if(f)return function(){return e};c=c instanceof b?c:b.value(c);c._converted||c.convertColorsToRgba();var h=e.clone();return function(b){n.defined(e.width)&&n.defined(c.width)&&(h.width=d.interpolateFloat(e.width,c.width,b));e.type===a.BT_SHADOW&&(h.offsetX=d.interpolateFloat(e.offsetX,c.offsetX,b),h.offsetY=d.interpolateFloat(e.offsetY,c.offsetY,b),h.blurRadius=d.interpolateFloat(e.blurRadius,c.blurRadius,
b));if(e.color)h.grad=null,h.color=m.toRgbaStr(m.interpolate(e.color,c.color,b));else if(e.grad){h.color=null;h.grad||(h.grad={});var p=h.grad,f=e.grad,x=c.grad,w;for(w=0;w<f.dir.length;w++)p.dir[w]||(p.dir[w]=[]),p.dir[w][0]=d.interpolateFloat(f.dir[w][0],x.dir[w][0],b),p.dir[w][1]=d.interpolateFloat(f.dir[w][1],x.dir[w][1],b);p.stops&&p.stops.length===f.stops.length||(p.stops=[]);for(w=0;w<f.stops.length;w++)p.stops[w]||(p.stops[w]=[]),p.stops[w][0]=d.interpolateFloat(f.stops[w][0],x.stops[w][0],
b),p.stops[w][1]=m.toRgbaStr(m.interpolate(f.stops[w][1],x.stops[w][1],b));f.r?(p.r||(p.r=[]),p.r[0]=d.interpolateFloat(f.r[0],x.r[0],b),p.r[1]=d.interpolateFloat(f.r[1],x.r[1],b)):p.r=null}h.invalidate();return h}};f.prototype.stops=function(a){if(n.defined(a)){var b=[],d;for(d in a)b.push([parseFloat(d),a[d]]);this.$stops=b;return this}a={};b=this.$stops;for(d=0;d<b.length;d++)a[b[d][0]]=b[d][1];return a};f.prototype.radial=function(){this.$radial=!0;return this};f.prototype.radius=function(a){if(!n.defined(a))return this.$radius;
this.$radial=!0;this.$radius=a;return this};f.prototype.start=function(a,b){if(!n.defined(a))return[this.$bounds[0],this.$bounds[1]];this.$bounds[0]=a;this.$bounds[1]=b;return this};f.prototype.size=function(a,b){if(!n.defined(a))return[this.$bounds[2],this.$bounds[3]];this.$bounds[2]=a;this.$bounds[3]=b;return this};f.prototype.from=function(a,b){if(!n.defined(a))return this.$direction[0];this.$direction[0][0]=a;this.$direction[0][1]=b;return this};f.prototype.to=function(a,b){if(!n.defined(a))return this.$direction[1];
this.$direction[1][0]=a;this.$direction[1][1]=b;return this};f.prototype.get=function(){return{r:this.$radial?this.$radius||[1,1]:null,stops:this.$stops,bounds:this.$bounds,dir:this.$direction}};y.exports=b},{"../conf.js":11,"../constants.js":12,"../errors.js":13,"../utils.js":39,"./color.js":18,engine:40}],18:[function(c,y,v){var b=c("../utils.js"),f=b.is,a={TRANSPARENT:"transparent",HEX_RE:/^#?([a-fA-F\d]{2})([a-fA-F\d]{2})([a-fA-F\d]{2})$/i,HEX_SHORT_RE:/^#?([a-fA-F\d])([a-fA-F\d])([a-fA-F\d])$/i,
RGB_RE:/^rgb\s*\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)$/i,RGBA_RE:/^rgba\s*\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*(\d*[.]?\d+)\s*\)$/i,HSL_RE:/^hsl\s*\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*%\s*,\s*([0-9]{1,3})\s*%\s*\)$/i,HSLA_RE:/^hsla\s*\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*%\s*,\s*([0-9]{1,3})\s*%\s*,\s*(\d*[.]?\d+)\s*\)$/i,from:function(b){return f.str(b)?a.fromStr(b):b.r&&b},fromStr:function(b){return a.fromHex(b)||a.fromRgb(b)||a.fromRgba(b)||a.fromHsl(b)||
{r:0,g:0,b:0,a:0}},fromHex:function(b){if("#"!==b[0])return null;var d=a.HEX_RE.exec(b);return d?{r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16),a:1}:(d=a.HEX_SHORT_RE.exec(b))?{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:1}:null},fromRgb:function(b){return 0!==b.indexOf("rgb(")?null:(b=a.RGB_RE.exec(b))?{r:parseInt(b[1]),g:parseInt(b[2]),b:parseInt(b[3]),a:1}:null},fromRgba:function(b){return 0!==b.indexOf("rgba(")?null:(b=a.RGBA_RE.exec(b))?{r:parseInt(b[1]),
g:parseInt(b[2]),b:parseInt(b[3]),a:parseFloat(b[4])}:null},fromHsl:function(b){return 0!==b.indexOf("hsl(")?null:(b=a.HSL_RE.exec(b))?a.fromHslVal(parseInt(b[1])/180*Math.PI,parseInt(b[2])/100,parseInt(b[3])/100):null},fromHsla:function(b){if(0!==b.indexOf("hsla("))return null;b=a.HSLA_RE.exec(hsl);if(!b)return null;b=a.fromHslVal(parseInt(b[1])/180*Math.PI,parseInt(b[2])/100,parseInt(b[3])/100);b.a=parseFloat(b[4]);return b},fromHslVal:function(b,d,c){var f=a.hueToRgb;d=.5>=c?c*(d+1):c+d-c*d;c=
2*c-d;return{r:f(c,d,b+2),g:f(c,d,b),b:f(c,d,b-2),a:1}},hueToRgb:function(a,b,c){0>c&&(c+=6);6<=c&&(c-=6);return 1>c?(b-a)*c+a:3>c?b:4>c?(b-a)*(4-c)+a:a},rgb:function(a,b,c){return"rgb("+a+","+b+","+c+")"},rgba:function(a,b,c,h){return"rgba("+a+","+b+","+c+","+(f.defined(h)?h.toFixed(2):1)+")"},hsl:function(b,d,c){return a.dhsl(b/Math.PI*180,d,c)},dhsl:function(a,b,c){return"hsl("+Math.floor(a)+","+Math.floor(100*b)+"%,"+Math.floor(100*c)+"%)"},hsla:function(b,d,c,f){return a.dhsla(b/Math.PI*180,
d,c,f)},dhsla:function(a,b,c,h){return"hsla("+Math.floor(a)+","+Math.floor(100*b)+"%,"+Math.floor(100*c)+"%,"+(f.defined(h)?h.toFixed(2):1)+")"},adapt:function(b){if(!b)return null;if(f.str(b))return b;if(f.defined(b.g))return a.toRgbaStr(b);if(f.defined(b.h))return a.toHslaStr(b)},toRgbaStr:function(b){return a.rgba(b.r,b.g,b.b,b.a)},toHslaStr:function(b){return a.hsla(b.h,b.s,b.l,b.a)},interpolate:function(a,d,c){return{r:Math.round(b.interpolateFloat(a.r,d.r,c)),g:Math.round(b.interpolateFloat(a.g,
d.g,c)),b:Math.round(b.interpolateFloat(a.b,d.b,c)),a:b.interpolateFloat(a.a,d.a,c)}}};y.exports=a},{"../utils.js":39}],19:[function(c,y,v){function b(b){this.segs=[];this.closed=!1;a.str(b)?(this.parse(b),this.updatePath2D(b)):a.arr(b)&&(this.segs=b);this.cached_hits={}}c("../constants.js");var f=c("../utils.js"),a=f.is;v=c("./segments.js");var e=v.MSeg,d=v.LSeg,n=v.CSeg,h=v.Crossings,w=c("engine"),m=!!w.Path2D,r=c("./brush.js"),z=c("./bounds.js");b.prototype.visit=function(a,b){for(var d=this.segs,
c=0,e=d.length;c<e;c++)a(d[c],b);return this};b.prototype.length=function(){if(a.defined(this.cached_len))return this.cached_len;var b=0,d=this.start();this.visit(function(a){b+=a.length(d);d=a.last()});return this.cached_len=b};b.prototype.add=function(a){this.segs.push(a);this._p2dCurrent=!1;return this};b.prototype.move=function(a,b){return this.add(new e([a,b]))};b.prototype.line=function(a,b){return this.add(new d([a,b]))};b.prototype.curve=function(a,b,d,c,e,f){return this.add(new n([a,b,d,
c,e,f]))};b.prototype.close=function(){this.closed=!0;return this};b.prototype.apply=function(a,b,d,c){if(m)return this.updatePath2D(),c&&c.apply(a),b&&(b.apply(a),a.fill(this.path2d)),c&&r.clearShadow(a),d&&(d.apply(a),a.stroke(this.path2d)),this;a.beginPath();for(var e=this.segs,f=0,u=e.length;f<u;f++)e[f].draw(a);this.closed&&a.closePath();c&&c.apply(a);b&&(b.apply(a),a.fill());c&&r.clearShadow(a);d&&(d.apply(a),a.stroke());return this};b.prototype.parse=function(a){a&&b.parse(a,this);return this};
b.prototype.hitAt=function(b){if(a.defined(this.cached_hits[b]))return this.cached_hits[b];var d=this.length();if(0===d||0>b||1<b)return null;var c=this.start(),e=f.roundTo(b,3);if(0===b)return this.cached_hits[e]={seg:this.segs[0],start:c,slen:0,segt:0};var h=this.segs.length;if(0===h)return null;b*=d;for(var m=0,u,k=0;k<h;k++){d=this.segs[k];u=d.length(c);if(b<=m+u)return h=b-m,this.cached_hits[e]={seg:d,start:c,slen:u,segt:0!=u?d.findT(c,h):0};m+=u;c=d.last()}return null};b.prototype.pointAt=function(a){return(a=
this.hitAt(a))?a.seg.atT(a.start,a.segt):this.start()};b.prototype.inside=function(a){var b=a.x;a=a.y;var d=this.segs.length;if(2>d)return!1;for(var c=this.start(),e=c,f=0,u=0;u<d;u++)var k=this.segs[u],f=f+k.crossings(e,b,a),e=k.last();c!==e&&(f+=h.line(b,a,e[0],e[1],c[0],c[1]));return 0!==(f&-1)};b.prototype.tangentAt=function(a){return(a=this.hitAt(a))?a.seg.tangentAt(a.start,a.segt):0};b.prototype.start=function(){return 1>this.segs.length?null:[this.segs[0].pts[0],this.segs[0].pts[1]]};b.prototype.end=
function(){return 1>this.segs.length?null:this.segs[this.segs.length-1].last()};b.prototype.bounds=function(){if(this.$bounds)return this.$bounds;if(0>=this.segs.length)return z.NONE;var a=this.segs[0].pts[0],b=this.segs[0].pts[0],d=this.segs[0].pts[1],c=this.segs[0].pts[1];this.visit(function(e){e=e.pts;var f=e.length,u;for(u=0;u<f;u+=2)a=Math.min(a,e[u]),b=Math.max(b,e[u]);for(u=1;u<f;u+=2)d=Math.min(d,e[u]),c=Math.max(c,e[u])});return this.$bounds=new z(a,d,b-a,c-d)};b.prototype.vpoints=function(a){this.visit(function(b){b=
b.pts;for(var d=b.length,c=0;c<d;c+=2){var e=a(b[c],b[c+1]);e&&(b[c]=e[0],b[c+1]=e[1])}})};b.prototype.shift=function(a){this.vpoints(function(b,d){return[b+a[0],d+a[1]]});return this};b.prototype.zoom=function(a){this.vpoints(function(b,d){return[b*a[0],d*a[1]]});return this};b.prototype.normalize=function(){var a=this.bounds(),b=Math.floor(a.width/2),d=Math.floor(a.height/2),c=a.x,e=a.y;this.vpoints(function(a,f){return[a-c-b,f-e-d]});return[b,d]};b.prototype.getPoints=function(){var a=[];this.visit(function(b){a=
a.concat(b.pts)});return a};b.prototype.toString=function(){return"[ Path '"+b.toSVGString(this)+"' ]"};b.prototype.clone=function(){var a=new b;this.visit(function(b){a.add(b.clone())});clone.closed=this.closed;return a};b.prototype.invalidate=function(){this.cached_len=void 0;this.cached_hits={};this.$bounds=null};b.prototype.reset=function(){this.segs=[];this.closed=!1};b.prototype.dispose=function(){};b.prototype.updatePath2D=function(a){m&&!this._p2dCurrent&&(a=a||b.toSVGString(this),this.path2d=
new w.Path2D(a),this._p2dCurrent=!0)};b.toSVGString=function(a){var b=[];a.visit(x,b);b.push("Z");return b.join(" ")};var x=function(a,b){b.push(a.toString())};b.parse=function(a,d){d=d||new b;d.segs=[];for(var c=a.match(/[a-z][^a-z]*/ig),e=0;e<c.length;e++){var f=b.parseSegment(c[e]);f&&d.segs.push(f)}d.str=a;return d};b.parseSegment=function(a){a=a.toUpperCase();var b=a.substring(1).trim().replace(/,/g," ").split(" ").map(function(a){return parseFloat(a)});switch(a[0]){case "M":return new e(b);
case "L":return new d(b);case "C":return new n(b);default:return null}};y.exports=b},{"../constants.js":12,"../utils.js":39,"./bounds.js":16,"./brush.js":17,"./segments.js":20,engine:40}],20:[function(c,y,v){function b(a){this.pts=a}function f(a){this.pts=a}function a(a){this.pts=a;this._cachedStart=null;this._length=0}c("../constants.js");b.prototype.draw=function(a){a.moveTo(this.pts[0],this.pts[1])};b.prototype.length=function(a){return 0};b.prototype.findT=function(a,b){return 0};b.prototype.atDist=
function(a,b){return this.atT(a,null)};b.prototype.atT=function(a,b){return[this.pts[0],this.pts[1]]};b.prototype.tangentAt=function(a,b){return 0};b.prototype.crossings=function(a,b,c){return 0};b.prototype.last=function(){return[this.pts[0],this.pts[1]]};b.prototype.toString=function(){return"M"+this.pts.join(" ")};b.prototype.clone=function(){return new b(this.pts)};f.prototype.draw=function(a){a.lineTo(this.pts[0],this.pts[1])};f.prototype.length=function(a){var b=this.pts[0]-a[0];a=this.pts[1]-
a[1];return Math.sqrt(b*b+a*a)};f.prototype.findT=function(a,b){if(0>=b)return 0;var c=this.length(a);return b>=c?1:b/c};f.prototype.atDist=function(a,b){return this.atT(a,this.findT(a,b))};f.prototype.atT=function(a,b){var c=a[0],e=a[1];return[c+(this.pts[0]-c)*b,e+(this.pts[1]-e)*b]};f.prototype.tangentAt=function(a,b){return Math.atan2(this.pts[1]-a[1],this.pts[0]-a[0])};f.prototype.crossings=function(a,b,c){return e.line(b,c,a[0],a[1],this.pts[0],this.pts[1])};f.prototype.last=function(){return[this.pts[0],
this.pts[1]]};f.prototype.toString=function(){return"L"+this.pts.join(" ")};f.prototype.clone=function(){return new f(this.pts)};a.prototype.draw=function(a){a.bezierCurveTo(this.pts[0],this.pts[1],this.pts[2],this.pts[3],this.pts[4],this.pts[5])};a.prototype.length=function(a){if(this._cachedStart&&this._cachedStart[0]===a[0]&&this._cachedStart[1]===a[1])return this._length;this._cachedStart=a;return this._length=this.findLengthAndT(a,Number.MAX_VALUE)[0]};a.prototype.findT=function(a,b){return this.findLengthAndT(a,
b)[1]};a.prototype.findLengthAndT=function(a,b){for(var c=this.pts,e=a[0],f=a[1],r=c[0],z=c[1],x=c[2],t=c[3],B=c[4],p=c[5],c=Math.sqrt(Math.pow(r-e,2)+Math.pow(z-f,2))+Math.sqrt(Math.pow(x-r,2)+Math.pow(t-z,2))+Math.sqrt(Math.pow(B-x,2)+Math.pow(p-t,2))+1,A=1/c,C=3*A,v=C*A,u=A*A*A,k=2*v,g=6*u,q=e-2*r+x,D=f-2*z+t,B=3*(r-x)-e+B,p=3*(z-t)-f+p,t=e,x=f,e=(r-e)*C+q*v+u*B,f=(z-f)*C+D*v+u*p,z=q*k+B*g,k=D*k+p*g,D=B*g,g=p*g,B=q=0;B<c;B++)if(r=t,C=x,t+=e,x+=f,e+=z,f+=k,z+=D,k+=g,q+=Math.sqrt((t-r)*(t-r)+(x-
C)*(x-C)),q>=b)return[q,A*B];return[q,1]};a.prototype.atDist=function(a,b){return this.atT(a,this.findT(a,b))};a.prototype.atT=function(a,b){var c=b*b,e=c*b,f=1-b,r=f*f,z=r*f,r=3*b*r,c=3*c*f;return[a[0]*z+this.pts[0]*r+this.pts[2]*c+this.pts[4]*e,a[1]*z+this.pts[1]*r+this.pts[3]*c+this.pts[5]*e]};a.prototype.tangentAt=function(a,b){0>b&&(b=0);1<b&&(b=1);var c=3*(1-b)*(1-b),e=6*(1-b)*b,f=3*b*b;return Math.atan2(c*(this.pts[1]-a[1])+e*(this.pts[3]-this.pts[1])+f*(this.pts[5]-this.pts[3]),c*(this.pts[0]-
a[0])+e*(this.pts[2]-this.pts[0])+f*(this.pts[4]-this.pts[2]))};a.prototype.crossings=function(a,b,c){var f=this.pts;return e.curve(b,c,a[0],a[1],f[0],f[1],f[2],f[3],f[4],f[5],0)};a.prototype.last=function(){return[this.pts[4],this.pts[5]]};a.prototype._ensure_params=function(a){this._lstart&&this._lstart[0]===a[0]&&this._lstart[1]===a[1]||(this._lstart=a,this._params=this._calc_params(a))};a.prototype._calc_params=function(a){var b=this.pts,c=[],e=a[0];a=a[1];var f=b[0],r=b[1],z=b[2],x=b[3],t=b[5];
c[0]=b[4]-3*z+3*f-e;c[1]=3*z-6*f+3*e;c[2]=3*f-3*e;c[3]=e;c[4]=t-3*x+3*r-a;c[5]=3*x-6*r+3*a;c[6]=3*r-3*a;c[7]=a;return c};a.prototype.clone=function(){return new a(this.pts)};a.prototype.toString=function(){return"C"+this.pts.join(" ")};var e={curve:function(a,b,c,f,m,r,z,x,t,B,p){if(b<f&&b<r&&b<x&&b<B||b>=f&&b>=r&&b>=x&&b>=B||a>=c&&a>=m&&a>=z&&a>=t)return 0;if(a<c&&a<m&&a<z&&a<t){if(b>=f){if(b<B)return 1}else if(b>=B)return-1;return 0}if(52<p)return e.line(a,b,c,f,t,B);var A=(m+z)/2,C=(r+x)/2;m=(c+
m)/2;r=(f+r)/2;z=(z+t)/2;x=(x+B)/2;var v=(m+A)/2,u=(r+C)/2,k=(A+z)/2,g=(C+x)/2,A=(v+k)/2,C=(u+g)/2;return isNaN(A)||isNaN(C)?0:e.curve(a,b,c,f,m,r,v,u,A,C,p+1)+e.curve(a,b,A,C,k,g,z,x,t,B,p+1)},line:function(a,b,c,e,f,r){return b<e&&b<r||b>=e&&b>=r||a>=c&&a>=f?0:a<c&&a<f?e<r?1:-1:a>=c+(b-e)*(f-c)/(r-e)?0:e<r?1:-1}};y.exports={MSeg:b,LSeg:f,CSeg:a,Crossings:e}},{"../constants.js":12}],21:[function(c,y,v){v=c("../animation/element.js");var b=c("./path.js");c=c("./segments.js");var f=c.MSeg,a=c.LSeg;
v.prototype.dot=function(){var a=this;this.paint(function(b){b.beginPath();b.arc(0,0,3,0,2*Math.PI,!1);b.closePath();a.applyBrushes(b)});return this};v.prototype.rect=function(c,d){d=d||c;var n=new b;n.add(new f([0,0]));n.add(new a([0+c,0]));n.add(new a([0+c,0+d]));n.add(new a([0,0+d]));n.add(new a([0,0]));this.path(n);return this};v.prototype.oval=function(a,b){var c=this,f=a/2,w=b?b/2:f;this.paint(function(a){a.ellipse&&(a.beginPath(),a.ellipse(0,0,f,w,0,0,2*Math.PI,!1),a.closePath(),c.applyBrushes(a))});
return this};v.prototype.triangle=function(c,d){d=d||c;var n=c/2,h=new b;h.add(new f([0+n,0]));h.add(new a([0+c,0+d]));h.add(new a([0,0+d]));h.add(new a([0+n,0]));this.path(h);return this};y.exports={}},{"../animation/element.js":6,"./path.js":19,"./segments.js":20}],22:[function(c,y,v){function b(a,d,c){this.id=b.instances++;this.src=a;this._dimen=[0,0];this.regions=[[0,0,1,1]];this.regions_f=null;this.cur_region=c||0;this.wasError=this.ready=!1;this._image=null;this._callback=d;this._thumbnail=
!1}var f=c("../conf.js"),a=c("../log.js"),e=c("engine"),d=c("../resource_manager.js"),n=c("../errors.js"),h=c("./bounds.js");b.instances=0;b.MISSED_SIDE=50;var w=e.isHttps;b.prototype.load=function(b,c,h,x){h=h||this._callback;if(this._image)throw n.element("Image already loaded",b);var t=this;t.src?d.loadOrGet(c,t.src,function(a,b,d){d=t.src;w&&(d=d.replace("http:","https:"));d=e.fixLocalUrl(d);if(!t._thumbnail&&f.doNotLoadImages)b("Loading images is turned off");else{var c=new Image,h=e.getAnmProps(c);
c.onload=c.onreadystatechange=function(){h.ready||(this.readyState&&"complete"!==this.readyState&&b(this.readyState),h.ready=!0,c.isReady=!0,a(c))};c.onerror=b;c.addEventListener("error",b,!1);try{c.src=d}catch(u){b(u)}}},function(a){t._image=a;t._dimen=[a.width,a.height];t.ready=!0;h&&h.call(t,a)},function(d){a.error(d.srcElement||d.path,d.message||d);t.ready=!0;t.wasError=!0;x&&x.call(t,d);throw n.element(d?d.message:"Unknown",b);}):(a.error("Empty source URL for image"),t.ready=!0,t.wasError=!0,
x&&x.call(t,"Empty source"))};b.prototype.updateRegion=function(){if(!(0>this.cur_region)){var a;if(this.region_f)a=this.region_f(this.cur_region);else{a=this.regions[this.cur_region];var b=this._dimen;a=[a[0]*b[0],a[1]*b[1],a[2]*b[0],a[3]*b[1]]}this.region=a}};b.prototype.apply=function(a){if(this.ready)if(this.wasError)this.applyMissed(a);else{this.updateRegion();var b=this.region;a.drawImage(this._image,b[0],b[1],b[2],b[3],0,0,b[2],b[3])}};b.prototype.applyMissed=function(a){a.save();a.strokeStyle=
"#900";a.lineWidth=1;a.beginPath();var d=b.MISSED_SIDE;a.moveTo(0,0);a.lineTo(d,0);a.lineTo(0,d);a.lineTo(d,d);a.lineTo(0,0);a.lineTo(0,d);a.lineTo(d,0);a.lineTo(d,d);a.stroke();a.restore()};b.MISSED_BOUNDS=new h(0,0,b.MISSED_SIDE,b.MISSED_SIDE);b.prototype.bounds=function(){if(this.wasError)return b.MISSED_BOUNDS;if(!this.ready)return h.NONE;this.region||this.updateRegion();var a=this.region;return new h(0,0,a[2],a[3])};b.prototype.inside=function(a){return!0};b.prototype.clone=function(){return new b(this.src)};
b.prototype.invalidate=function(){};b.prototype.reset=function(){};b.prototype.dispose=function(){};y.exports=b},{"../conf.js":11,"../errors.js":13,"../log.js":28,"../resource_manager.js":35,"./bounds.js":16,engine:40}],23:[function(c,y,v){function b(d,c,e,f,n){this.lines=d;this.$font=c||b.DEFAULT_FONT;this.$align=e||b.DEFAULT_ALIGN;this.baseline=f||b.DEFAULT_BASELINE;this.underlined=a.defined(n)?n:b.DEFAULT_UNDERLINE;this.size=-1;this.$bounds=null}var f=c("../constants.js"),a=c("../utils.js").is,
e=c("../errors.js");v=c("engine");var d=c("./brush.js"),n=c("./bounds.js");b.DEFAULT_FFACE="sans-serif";b.DEFAULT_FSIZE=24;b.DEFAULT_FONT=b.DEFAULT_FSIZE+"px "+b.DEFAULT_FFACE;b.DEFAULT_ALIGN=f.TA_LEFT;b.DEFAULT_BASELINE=f.BL_MIDDLE;b.DEFAULT_UNDERLINE=!1;b.__measuring_f=v.createTextMeasurer();b.prototype.apply=function(a,c,e,f){var n=this.bounds(),x=n.height/this.lineCount(),t=this.underlined;a.font=this.$font;a.textBaseline=this.baseline||b.DEFAULT_BASELINE;a.textAlign=this.$align||b.DEFAULT_ALIGN;
var B=this.ascent(x,a.textBaseline),p=this.xOffset(n.width,a.textAlign),A;f?f.apply(a):d.clearShadow(a);c?(c.apply(a),A=0,this.visitLines(function(b){a.fillText(b,p,A+B);A+=x})):d.clearFill(a);f&&d.clearShadow(a);e?(e.apply(a),A=0,this.visitLines(function(b){a.strokeText(b,p,A+B);A+=x})):d.clearStroke(a);if(t&&c){A=0;e=d.stroke(c,1);e.apply(a);var C=null,v=0,u=this;this.visitLines(function(d){C=b.bounds(u,d);v=C.width;a.beginPath();a.moveTo(p,A+x);a.lineTo(v,A+x);a.stroke();A+=x})}};b.prototype.font=
function(a){if(!a)return this.$font;this.$font=a;return this};b.prototype.align=function(a){if(!a)return this.$align;this.$align=a;return this};b.prototype.bounds=function(){return this.$bounds?this.$bounds:this.$bounds=b.bounds(this,this.lines)};b.prototype.inside=function(a){return!0};b.prototype.ascent=function(a,b){return b==f.BL_MIDDLE?a/2:a};b.prototype.xOffset=function(a,b){return b==f.TA_LEFT?0:b==f.TA_CENTER?a/2:b==f.TA_RIGHT?a:0};b.prototype.lineCount=function(){var b=this.lines;return a.arr(b)?
b.length:1};b.prototype.visitLines=function(b,d){var c=this.lines;if(a.arr(c))for(var e,f=0,x=c.length;f<x;f++)e=c[f],b(e);else b(c.toString())};b.prototype.clone=function(){var a=new b(this.lines,this.$font);this.lines&&Array.isArray(this.lines)&&(a.lines=[].concat(this.lines));return a};b.prototype.invalidate=function(){this.$bounds=null};b.prototype.reset=function(){};b.prototype.dispose=function(){};b.bounds=function(a,d){if(!b.__measuring_f)throw e.system("no Text buffer, bounds call failed");
var c=b.__measuring_f(a,d);return new n(0,0,c[0],c[1])};y.exports=b},{"../constants.js":12,"../errors.js":13,"../utils.js":39,"./bounds.js":16,"./brush.js":17,engine:40}],24:[function(c,y,v){var b=c("./errors.js"),f={register:function(a,c){if(f[a])throw b.system("Importer "+a+" is already registered!");f[a]=c},get:function(a){if(!f[a])throw b.system("Importer "+a+" is not registered!");return f[a]},create:function(a){if(!f[a])throw b.system("Importer "+a+" is not registered!");return new f[a]},isAccessible:function(a){return"undefined"!==
typeof f[a]}};y.exports=f},{"./errors.js":13}],25:[function(c,y,v){var b=c("engine"),f=c("../constants.js"),a={play:function(){this.play()},pause:function(){this.pause()},getPaused:function(){return this.state.happens===f.PAUSED},mute:function(){this.mute()},unmute:function(){this.unmute()},isMuted:function(){return this.muted},setVolume:function(a){x.volume(a.value/100)},getVolume:function(){return 100*x.volume()},getDuration:function(){return x.state.duration},setCurrentTime:function(a){a=a.value;
this.pause().play(a)},getCurrentTime:function(){return this.state.time},setLoop:function(a){this.repeat=a.value},getLoop:function(){return this.repeat},addEventListener:function(a){var b=a.value;a=a.listener;if(e[b]&&-1===e[b].indexOf(a))return e[b].push(a),{}},removeEventListener:function(a){var b=a.value;a=a.listener;e[b]&&(a?(a=e[b].indexOf(a),-1!==a&&e[b].splice(a,1)):e[b]=[])}},e={progress:[],timeupdate:[],play:[],pause:[],ended:[]},d=["ready"],n;for(n in e)d.push(n);var h=[],w;for(w in a)h.push(w);
var m=b.getIframeOrigin();c=function(d){var c=JSON.parse(d.data);d.origin===m&&"player.js"===c.context&&a[c.method]&&x&&(d=a[c.method].call(x,c),b.postToContentWindow({context:"player.js",version:"0.0.10",event:c.method,listener:c.listener,value:d}))};b.isInIframe()&&b.addMessageListener(c);var r=function(a,d,c){d={context:"player.js",version:"0.0.10",event:a,value:d||{}};if(c)b.postToContentWindow(d);else if(e[a]&&0!==e[a].length)for(c=0;c<e[a].length;c++)d.listener=e[a][c],b.postToContentWindow(d)},
z=function(a){b.isInIframe()&&(a.on(f.S_LOAD,function(){r("ready",{src:b.getIframeSrc(),events:d,methods:h},!0)}),a.on(f.S_LOADING_PROGRESS,function(a){r("progress",{percent:100*a})}),a.on(f.S_PLAY,function(){r("play")}),a.on(f.S_PAUSE,function(){r("pause")}),a.on(f.S_COMPLETE,function(){r("ended")}),a.on(f.S_TIME_UPDATE,function(b){r("timeupdate",{seconds:b,duration:a.state.duration})}))},x;y.exports={setPlayer:function(a){x=a;z(a)}}},{"../constants.js":12,engine:40}],26:[function(c,y,v){var b=c("./utils.js"),
f=b.is,a=c("./loc.js").Errors,e=c("./errors.js"),d=c("./constants.js"),n=c("./global_opts.js"),h=c("engine"),w=c("./animation/animation.js"),m={loadAnimation:function(a,b,d){a.anim&&a.anim.dispose(a);b.playedIn(a);a.debug&&!n.liveDebug&&b.traverse(function(a){a.addDebugRender()});b.width&&b.height?a.forceAnimationSize&&a._resize(b.width,b.height):(b.width=a.width,b.height=a.height);a.anim=b;d&&d.call(a,b)},loadFromUrl:function(d,c,f,n){if(!JSON)throw e.system(a.S.NO_JSON_PARSER,d);f=f||anm.importers.create("animatron");
var p=c.split("?");c=p[0];var A=(p=p[1])&&0<p.length?b.paramsToObj(p):{};if(p=r(A))d._addOpts(p),d._checkOpts();var w=function(d){throw e.system(b.strf(a.P.SNAPSHOT_LOADING_FAILED,[d?d.message||d:"\u00bfPor qu\u00e9?"]));},p=h.getCookie("_animatronauth");h.ajax(c,function(a){try{m.loadFromObj(d,JSON.parse(a.responseText),f,function(a){n&&n.call(d,a);d._applyUrlParamsToAnimation(A)})}catch(b){w(b)}},w,"GET",p?{"Animatron-Security-Token":p}:null)},loadFromObj:function(b,c,f,h){if(!f)throw e.player(a.P.NO_IMPORTER_TO_LOAD_WITH,
b);var p=f.load(c);b.fire(d.S_IMPORT,f,p,c);m.loadAnimation(b,p,h)},loadElements:function(a,b,d){var c=new w;c.add(b);m.loadAnimation(a,c,d)}},r=function(a){function b(a){if(!a||0===a||"0"==a)return!1;if(1==a)return!0;if("false"==a)return!1;if("true"==a)return!0;if("off"==a)return!1;if("on"==a)return!0;if("no"==a)return!1;if("yes"==a)return!0}function d(){for(var c=arguments,e=0;e<c.length;e++)if(f.defined(a[c[e]]))return b(a[c[e]])}var c={};c.debug=f.defined(a.debug)?b(a.debug):void 0;c.muteErrors=
d("me","muterrors");c.repeat=d("r","repeat");c.autoPlay=d("a","auto","autoplay");c.mode=a.m||a.mode||void 0;c.zoom=a.z||a.zoom;c.speed=a.v||a.speed;c.width=a.w||a.width;c.height=a.h||a.height;c.infiniteDuration=d("i","inf","infinite");c.audioEnabled=d("s","snd","sound","audio");c.controlsEnabled=d("c","controls");c.controlsInvisible=d("controlsInvisible");c.infoEnabled=d("info");c.loadingMode=a.lm||a.lmode||a.loadingmode||void 0;c.thumbnail=a.th||a.thumb||void 0;c.bgColor=a.bg||a.bgcolor;c.ribbonsColor=
a.ribbons||a.ribcolor;return c};y.exports=m},{"./animation/animation.js":3,"./constants.js":12,"./errors.js":13,"./global_opts.js":15,"./loc.js":27,"./utils.js":39,engine:40}],27:[function(c,y,v){c={S:{},P:{},A:{}};c.S.CANVAS_NOT_SUPPORTED="Your browser does not support HTML5 canvas, so we cannot play anything for you.";c.S.SAD_SMILEY_HTML='<span style="font-size: 4em;">:(</span><br>'+c.S.CANVAS_NOT_SUPPORTED;c.S.NO_JSON_PARSER="JSON parser is not accessible";c.S.ERROR_HANDLING_FAILED="Error-handling mechanics were broken with error {0}";
c.S.NO_METHOD_FOR_PLAYER="No method '{0}' exist for player";c.P.NO_IMPORTER_TO_LOAD_WITH="Cannot load this project without importer. Please define it";c.P.NO_WRAPPER_WITH_ID="No element found with given id: {0}";c.P.NO_WRAPPER_WAS_PASSED="No element was passed to player initializer";c.P.CANVAS_NOT_VERIFIED="Canvas is not verified by the provider";c.P.CANVAS_NOT_PREPARED="Canvas is not prepared, don't forget to call 'init' method";c.P.ALREADY_PLAYING="Player is already in playing mode, please call 'stop' or 'pause' before playing again";
c.P.PAUSING_WHEN_STOPPED="Player is stopped, so it is not allowed to pause";c.P.NO_ANIMATION_PASSED="No animation passed to load method";c.P.NO_STATE="There's no player state defined, nowhere to draw, please load something in player before calling its playing-related methods";c.P.NO_ANIMATION="There's nothing at all to manage with, please load something in player before calling its playing-related methods";c.P.COULD_NOT_LOAD_WHILE_PLAYING="Could not load any animation while playing or paused, please stop player before loading";
c.P.LOAD_WAS_ALREADY_POSTPONED="Load was called while loading process was already in progress";c.P.NO_LOAD_CALL_BEFORE_PLAY="No animation was loaded into player before the request to play";c.P.BEFOREFRAME_BEFORE_PLAY="Please assign beforeFrame callback before calling play()";c.P.AFTERFRAME_BEFORE_PLAY="Please assign afterFrame callback before calling play()";c.P.BEFORERENDER_BEFORE_PLAY="Please assign beforeRender callback before calling play()";c.P.AFTERRENDER_BEFORE_PLAY="Please assign afterRender callback before calling play()";
c.P.PASSED_TIME_VALUE_IS_NO_TIME="Given time is not allowed, it is treated as no-time";c.P.PASSED_TIME_NOT_IN_RANGE="Passed time ({0}) is not in animation range";c.P.DURATION_IS_NOT_KNOWN="Duration is not known";c.P.ALREADY_ATTACHED="Player is already attached to this canvas, please use another one";c.P.INIT_TWICE="Initialization was called twice";c.P.INIT_AFTER_LOAD="Initialization was called after loading a animation";c.P.SNAPSHOT_LOADING_FAILED="Snapshot failed to load ({0})";c.P.IMPORTER_CONSTRUCTOR_PASSED=
"You've passed importer constructor to snapshot loader, but not an instance! Probably you used anm.importers.get instead of anm.importers.create.";c.P.DOM_NOT_READY="Document in not yet ready, please consider moving your initialization script to the bottom of your web page";c.A.OBJECT_IS_NOT_ELEMENT="It appears that you've passed not an instance of anm.Element";c.A.ELEMENT_IS_REGISTERED="This element is already registered in animation";c.A.ELEMENT_IS_NOT_REGISTERED="There is no such element registered in animation";
c.A.UNSAFE_TO_REMOVE="Unsafe to remove, please use iterator-based looping (with returning false from iterating function) to remove safely";c.A.NO_ELEMENT_TO_REMOVE="Please pass some element or use detach() method";c.A.NO_ELEMENT="No such element found";c.A.ELEMENT_NOT_ATTACHED="Element is not attached to something at all";c.A.MODIFIER_NOT_ATTACHED="Modifier wasn't applied to anything";c.A.NO_MODIFIER_PASSED="No modifier was passed";c.A.NO_PAINTER_PASSED="No painter was passed";c.A.MODIFIER_REGISTERED=
"Modifier was already added to this element";c.A.PAINTER_REGISTERED="Painter was already added to this element";c.A.RESOURCES_FAILED_TO_LOAD="Some of resources required to play this animation were failed to load";c.A.MASK_SHOULD_BE_ATTACHED_TO_ANIMATION="Element to be masked should be attached to animation when rendering";y.exports={Strings:{COPYRIGHT:"Animatron Player",LOADING:"Loading...",LOADING_ANIMATION:"Loading {0}..."},Errors:c}},{}],28:[function(c,y,v){(function(b){var f,a,e,d,n=c("./conf.js"),
h=c("./constants.js"),w=function(){},m=b.console||{log:w,info:w,warn:w,error:w};b.console&&(f=m.debug||m.log,a=m.info||m.log,e=m.warn||m.log,d=m.error||m.log,m.log.apply||(f=Function.prototype.bind.call(f,m),a=Function.prototype.bind.call(a,m),e=Function.prototype.bind.call(e,m),d=Function.prototype.bind.call(f,m)));y.exports={debug:function(){n.logLevel&h.L_DEBUG&&f.apply(m,arguments)},info:function(){n.logLevel&h.L_INFO&&a.apply(m,arguments)},warn:function(){n.logLevel&h.L_WARN&&e.apply(m,arguments)},
error:function(){n.logLevel&h.L_ERROR&&d.apply(m,arguments)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./conf.js":11,"./constants.js":12}],29:[function(c,y,v){(function(b){function f(a){this.url=a+r;this.canPlay=this.playing=this.ready=!1;this.volume=1;this.audio=null}function a(a,b){return function(d){b(Error("Failed to load audio file from "+a+" with error code: "+d.currentTarget.error.code))}}c("../conf.js");var e=c("../log.js");
c("../utils.js");var d=c("../constants.js"),n=c("../errors.js"),h=c("engine"),w=c("../resource_manager.js"),m=h.createAudio(),r=(m=!(!m.canPlayType||!m.canPlayType("audio/ogg;").replace(/no/,"")))?".ogg":".mp3",z=m?"audio/ogg":"audio/mp3",x=function(){if(h.isLocal)return null;var a=b.AudioContext||b.webkitAudioContext;if(!a)return null;if(b.anmAudioContext)return b.anmAudioContext;try{var d=new a;return b.anmAudioContext=d}catch(c){return null}}();f.prototype.load=function(b,d){var c=this;w.loadOrGet(d.id,
c.url,function(b,d,e){var f=c.url;h.isHttps&&(f=f.replace("http:","https:"));f=h.fixLocalUrl(f);if(anm.conf.doNotLoadAudio)d("Loading audio is turned off");else if(x){var k={},g=function(a,c){try{x.decodeAudioData(a.buf,function(a){b(a)},function(b){var d=new Uint8Array(a.buf);d.indexOf=Array.prototype.indexOf;for(b=a.sync;;){a.retry++;b=d.indexOf(255,b);if(-1==b||d[b+1]&1)break;b++}-1!=b?(d=a.buf.slice(b),delete a.buf,a.buf=null,a.buf=d,a.sync=b,b=!0):b=!1;b&&g(a,c)})}catch(k){d("Unable to load audio "+
c+": "+k.message)}};k.xhr=new XMLHttpRequest;k.xhr.open("GET",f,!0);k.xhr.responseType="arraybuffer";k.xhr.addEventListener("load",function(a){a=a.target;200==a.status?(k.buf=a.response,k.sync=0,k.retry=0,g(k)):d("Unable to load audio "+f+": "+a.statusText)},!1);k.xhr.addEventListener("error",a(f,d),!1);k.xhr.send()}else{var q=h.createAudio();q.setAttribute("preload","auto");var m=function(a){a=q.buffered;1==a.length?4===q.readyState||3===q.readyState?(h.unsubscribeElementEvents(q,{progress:H,loadedmetadata:n,
canplay:r}),b(q),e(1)):c.canPlay&&window.chrome&&(q.volume=0,q.currentTime=a.end(0),q.play(),q.pause()):c.canPlay&&1!=a.length&&(h.unsubscribeElementEvents(q,{progress:H,loadedmetadata:n,canplay:r}),b(q),e(1))},n=function(a){a=[];for(var b=0;b<q.buffered.length;b++)a.push([q.buffered.start(b),q.buffered.end(b)]);for(progress=b=0;b<q.buffered.length;b++)progress+=1/q.duration*(a[b][1]-a[b][0]);e(progress)},H=function(a){m(a);n(a)},r=function(a){c.canPlay=!0;m(a)};h.subscribeElementEvents(q,{progress:H,
loadedmetadata:n,canplay:r,error:a(f,d)});var t=function(a,b,g){var c=h.createSource();c.addEventListener("error",d,!1);c.type=g;c.src=b;a.appendChild(c)};try{h.appendToBody(q),t(q,f,z)}catch(w){d(w)}}},function(a){c.audio=a;c.ready=!0;c.shouldPlayWhenReady&&(c.play(c.shouldPlayParams.ltime,c.shouldPlayParams.duration),c.shouldPlayWhenReady=!1);d.muted&&c.mute()},function(a){e.error(a?a.message||a:"Unknown error");throw n.element(a?a.message:"Unknown",b);})};f.prototype.play=function(a,b){if(this.playing)return!1;
if(this.ready){this.playing=!0;var d=this.offset+a;x?d>this.audio.duration?this._audio_is_playing=!1:(this._source=x.createBufferSource(),this._source.buffer=this.audio,this._gain=x.createGain(),this._source.connect(this._gain),this._gain.connect(x.destination),this._gain.gain.value=this.volume,this._source.play?this._source.play(0,d):this._source.start?this._source.start(0,d,this._source.buffer.duration-d):this._source.noteGrainOn(0,d,this._source.buffer.duration-d)):(this.audio.currentTime=d,this.audio.volume=
this.volume,this.audio.play())}else this.shouldPlayWhenReady=!0,this.shouldPlayParams={ltime:a,duration:b}};f.prototype.stop=function(){if(this.playing){try{x?(this._source.stop?this._source.stop(0):this._source.noteOff(0),this._source=null):(this.audio.pause(),this.audio.volume=0)}catch(a){}this.playing=!1}};f.prototype.stopIfNotMaster=function(){this.master||this.stop()};f.prototype.setVolume=function(a){if(this.muted)this.unmuteVolume=a;else return this.volume=a,this._gain?this._gain.gain.value=
a:this.audio&&(this.audio.volume=a),this};f.prototype.mute=function(){this.muted||(this.unmuteVolume=this.volume,this.setVolume(0),this.muted=!0)};f.prototype.unmute=function(){this.muted&&(this.muted=!1,this.setVolume(this.unmuteVolume))};f.prototype.toggleMute=function(){this.muted?this.unmute():this.mute()};f.prototype.connect=function(a,b){var c=this;a.on(d.X_START,function(){c.play.apply(c,arguments)});a.on(d.X_STOP,function(){c.stopIfNotMaster()});var e=function(){c.stop()};b.on(d.A_STOP,e);
b.on(d.A_PAUSE,e)};f.prototype.clone=function(){var a=new f("");a.url=this.url;a.offset=this.offset;return a};y.exports=f}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../conf.js":11,"../constants.js":12,"../errors.js":13,"../log.js":28,"../resource_manager.js":35,"../utils.js":39,engine:40}],30:[function(c,y,v){function b(a){this.url=a;this.playing=this.ready=!1}function f(a,b){return function(d){b(Error("Failed to load video file from "+
a+" with error code: "+d.currentTarget.error.code))}}c("../conf.js");var a=c("../log.js"),e=c("../constants.js"),d=c("../errors.js"),n=c("engine"),h=c("../resource_manager.js"),w=c("../graphics/bounds.js");b.prototype.connect=function(a,b){var d=this;a.on(e.X_START,function(){d.play.apply(d,arguments)});var c=function(){d.stop()};a.on(e.X_STOP,c);b.on(e.A_STOP,c);b.on(e.A_PAUSE,c)};b.prototype.load=function(b,c){var e=this;h.loadOrGet(c.id,e.url,function(a,b,d){var c=e.url;n.isHttps&&(c=c.replace("http:",
"https:"));var c=n.fixLocalUrl(c),h=n.createVideo();h.setAttribute("preload","auto");h.style.display="none";var m=function(b){1==h.buffered.length&&4===h.readyState&&(n.unsubscribeElementEvents(h,{progress:u,loadedmetadata:r,canplay:k}),a(h),d(1))},r=function(a){a=[];for(var b=0;b<h.buffered.length;b++)a.push([h.buffered.start(b),h.buffered.end(b)]);for(var g=b=0;b<h.buffered.length;b++)g+=1/h.duration*(a[b][1]-a[b][0]);d(g)},u=function(a){m(a);r(a)},k=function(a){e.canPlay=!0;m(a)};n.subscribeElementEvents(h,
{progress:u,loadedmetadata:r,canplay:k,error:f(c,b)});var g=function(a,g,d){var c=n.createSource();c.addEventListener("error",b,!1);c.type="video/"+d;c.src=g;a.appendChild(c)};try{n.appendToBody(h),g(h,c,"mp4")}catch(q){b(q)}},function(a){e.video=a;e.ready=!0},function(c){a.error(c?c.message||c:"Unknown error");throw d.element(c?c.message:"Unknown",b);})};b.prototype.apply=function(a){a.drawImage(this.video,0,0)};b.prototype.bounds=function(){return this.$bounds?this.$bounds:this.video?this.$bounds=
new w(0,0,this.video.width,this.video.height):w.NONE};b.prototype.inside=function(a){return!0};b.prototype.play=function(a,b){if(!this.ready||this.playing)return!1;this.playing=!0;this.video.currentTime=(this.offset||0)+a;this.video.play()};b.prototype.stop=function(){this.playing&&(this.video.pause(),this.playing=!1)};b.prototype.invalidate=function(){this.$bounds=null};b.prototype.dispose=function(){};b.prototype.clone=function(){var a=new b(this.url);a.offset=this.offset;return a};y.exports=b},
{"../conf.js":11,"../constants.js":12,"../errors.js":13,"../graphics/bounds.js":16,"../log.js":28,"../resource_manager.js":35,engine:40}],31:[function(c,y,v){var b=c("./errors.js"),f={register:function(a,c){if(f[a])throw b.system("Module "+a+" is already registered!");f[a]=c},get:function(a){return f[a]},isAccessible:function(a){return"undefined"!==typeof f[a]}};y.exports=f},{"./errors.js":13}],32:[function(c,y,v){function b(){this.id="";this.controls=this.ctx=this.canvas=this.anim=this.state=null;
this.__canvasPrepared=!1;this.__instanceNum=++b.__instances;this.muted=!1}var f=c("./constants.js"),a=c("./utils.js"),e=a.is,d=c("./global_opts.js");c("./conf.js");var n=c("./log.js");v=c("./events.js").provideEvents;var h=c("./loc.js"),w=h.Strings,m=h.Errors,r=c("./errors.js"),z=c("engine"),x=c("./resource_manager.js"),t=c("./player_manager.js"),B=c("./loader.js"),p=c("./ui/controls.js"),A=c("./animation/animation.js"),C=c("./animation/element.js"),E=c("./render.js"),u=c("./graphics/sheet.js");b.__instances=
0;b.PREVIEW_POS=0;b.PEFF=0;b.NO_TIME=-1;b.DEFAULT_CONFIGURATION={debug:!1,repeat:!1,autoPlay:!1,mode:f.M_VIDEO,zoom:1,speed:1,width:void 0,height:void 0,infiniteDuration:void 0,drawStill:void 0,audioEnabled:!0,volume:1,imagesEnabled:!0,videoEnabled:!0,shadowsEnabled:!0,handleEvents:void 0,controlsEnabled:void 0,controlsInvisible:void 0,infoEnabled:void 0,loadingMode:f.LM_DEFAULT,thumbnail:void 0,bgColor:void 0,ribbonsColor:void 0,forceAnimationSize:!1,muteErrors:!1};b.EMPTY_BG="rgba(0,0,0,.05)";b.prototype.init=
function(a,d){z.isDocReady()||n.warn(m.P.DOM_NOT_READY);this._initHandlers();this.on(f.S_ERROR,this.__onerror());if(this.canvas||this.wrapper)throw r.player(m.P.INIT_TWICE,this);if(this.anim)throw r.player(m.P.INIT_AFTER_LOAD,this);this._prepare(a);this._addOpts(b.DEFAULT_CONFIGURATION);this._addOpts(z.extractUserOptions(this.canvas));this._addOpts(z.extractUserOptions(this.wrapper));try{window&&window.frameElement&&this._addOpts(z.extractUserOptions(window.frameElement))}catch(c){}this._addOpts(d||
{});this._postInit();this._checkOpts();t.fire(f.S_NEW_PLAYER,this);return this};b.prototype.load=function(b,d,c,k){var u=this,p=u.state;if(p.happens===f.PLAYING||p.happens===f.PAUSED)throw r.player(m.P.COULD_NOT_LOAD_WHILE_PLAYING,u);var h,w,t;if(b&&b.id&&u.anim&&u.anim.id==b.id)n.info("Animation with ID="+b.id+" is already loaded in player, skipping the call");else{var z=!1;if(d&&d.IMPORTER_ID||c&&c.IMPORTER_ID)throw r.player(m.P.IMPORTER_CONSTRUCTOR_PASSED,u);e.fun(d)?t=d:e.num(d)||!d?(e.num(d)&&
(h=d,z=!0),e.obj(c)?(w=c,t=k):e.fun(c)&&(t=c)):e.obj(d)&&(w=d,t=c);if(u.loadingMode!=f.LM_ONPLAY||u._playLock){if(!b)throw u.anim=null,u._reset(),u.stop(),r.player(m.P.NO_ANIMATION_PASSED,u);if(!u.__canvasPrepared)throw r.player(m.P.CANVAS_NOT_PREPARED,u);u._reset();p.happens=f.LOADING;u.fire(f.S_CHANGE_STATE,f.LOADING);d=function(b){var g=u.anim;u.__subscribePlayingEvents(g);u.handleEvents&&u.__subscribeDynamicEvents(g);var d=g._collectRemoteResources(u);d.length?(p.happens=f.RES_LOADING,u.fire(f.S_CHANGE_STATE,
f.RES_LOADING),u.fire(f.S_RES_LOAD,d),x.subscribe(u.id,d,[function(g,d){u.anim===b&&a.postpone(function(){u.state.happens=f.LOADING;u.fire(f.S_CHANGE_STATE,f.LOADING);u.fire(f.S_LOAD,b);u._updateMediaVolumes();u.handleEvents||u.stop();u._callPostpones();t&&t.call(u,b);u._applyTimeOptionsIfSet()})}],function(a,b,g,d){u.fire(f.S_LOADING_PROGRESS,b);u.controlsEnabled&&u.controls&&(u.controls.loadingProgress=g,u.controls.loadingErrors=d)}),g._loadRemoteResources(u)):(u.fire(f.S_LOAD,b),u.handleEvents||
u.stop(),t&&t.call(u,b),u._applyTimeOptionsIfSet())};u.anim&&(u.__unsubscribePlayingEvents(u.anim),u.__unsubscribeDynamicEvents(u.anim),u.anim.traverse(function(a){a.removeMaskCanvases()}));b?b instanceof A?(u._loadTarget=f.LT_ANIMATION,B.loadAnimation(u,b,d)):e.arr(b)||b instanceof C?(u._loadTarget=f.LT_ELEMENTS,B.loadElements(u,b,d)):e.str(b)?(u._loadTarget=f.LT_URL,u._loadSrc=b,B.loadFromUrl(u,b,w,d)):(u._loadTarget=f.LT_IMPORT,B.loadFromObj(u,b,w,d)):(u._loadTarget=f.LT_ANIMATION,u.anim=new A,
d(u.anim));z&&(u.anim.duration=h);return u}if(u._postponedLoad)throw r.player(m.P.LOAD_WAS_ALREADY_POSTPONED,u);u._lastReceivedAnimationId=null;u._postponedLoad=[b,h,w,t];u.stop()}};z.getRequestFrameFunc();var k=z.getCancelFrameFunc();b.prototype.play=function(a,d,c){var k=this;k._ensureHasState();var e=k.state;if(e.happens!==f.PLAYING||!k.infiniteDuration)if(k.loadingMode!==f.LM_ONPLAY||k._lastReceivedAnimationId)if(k.loadingMode===f.LM_ONREQUEST&&e.happens===f.RES_LOADING)k._postpone("play",arguments);
else{k._ensureHasAnim();var u=k.anim;u.reset();e.__lastPlayConf=[a,d,c];e.from=a||0;e.time=b.NO_TIME;e.speed=(d||1)*(k.speed||1)*(u.speed||1);e.stop="undefined"!==typeof c?c:e.stop;e.duration=k.infiniteDuration?Infinity:u.duration||(u.isEmpty()?0:A.DEFAULT_DURATION);if(void 0===e.duration)throw r.player(m.P.DURATION_IS_NOT_KNOWN,k);e.__startTime=Date.now();e.__redraws=0;e.__rsec=0;e.__prevt=0;e.happens!==f.STOPPED||k.repeating||k.reportStats();z.getAnmProps(k.ctx).factor=this.factor();e.happens=f.PLAYING;
e.__lastReq=E.loop(k.ctx,k,u,k.__beforeFrame(u),k.__afterFrame(u),k.__userBeforeRender,k.__userAfterRender);k.fire(f.S_CHANGE_STATE,f.PLAYING);k.fire(f.S_PLAY,e.from);return k}else if(!k._playLock){k._playLock=!0;var e=k._postponedLoad,p=arguments;if(!e)throw r.player(m.P.NO_LOAD_CALL_BEFORE_PLAY,k);var h=e[3];e[3]=function(){h&&h.apply(k,arguments);k._postponedLoad=null;k._playLock=!1;k._lastReceivedAnimationId=k.anim.id;b.prototype.play.apply(k,p)};b.prototype.load.apply(k,e)}};b.prototype.stop=
function(){this._ensureHasState();var a=this.state;if(a.happens===f.RES_LOADING&&this.loadingMode===f.LM_ONREQUEST)this._postpone("stop",arguments);else{a.happens!==f.PLAYING&&a.happens!==f.PAUSED||k(a.__lastReq);a.time=b.NO_TIME;a.from=0;a.stop=b.NO_TIME;var d=this.anim;d||this.loadingMode==f.LM_ONPLAY&&this._postponedLoad?(a.happens=f.STOPPED,this._drawStill(),this.fire(f.S_CHANGE_STATE,f.STOPPED)):a.happens!==f.ERROR&&(a.happens=f.NOTHING,this.controls||this._drawSplash(),this.fire(f.S_CHANGE_STATE,
f.NOTHING));this.fire(f.S_STOP);d&&d.reset();return this}};b.prototype.pause=function(){if(this.state.happens===f.RES_LOADING&&this.loadingMode===f.LM_ONREQUEST)return this._postpone("pause",arguments),this;this._ensureHasState();this._ensureHasAnim();var a=this.state;if(a.happens===f.STOPPED)return this;a.happens===f.PLAYING&&k(a.__lastReq);a.time>a.duration&&(a.time=a.duration);a.from=a.time;a.happens=f.PAUSED;a.time!==b.NO_TIME&&this.drawAt(a.time);this.fire(f.S_CHANGE_STATE,f.PAUSED);this.fire(f.S_PAUSE,
a.time);return this};b.prototype.seek=function(a){return this.state.happens===f.PAUSED?this.play(a).pause():this.pause().play(a)};b.prototype.onerror=function(a){this.__err_handler=a;return this};v(b,[f.S_IMPORT,f.S_CHANGE_STATE,f.S_LOAD,f.S_RES_LOAD,f.S_PLAY,f.S_PAUSE,f.S_STOP,f.S_COMPLETE,f.S_REPEAT,f.S_ERROR,f.S_LOADING_PROGRESS,f.S_TIME_UPDATE]);b.prototype._prepare=function(g){if(!g)throw r.player(m.P.NO_WRAPPER_PASSED,this);var d;if(e.str(g)){if(d=z.getElementById(g),!g)throw r.player(a.strf(m.P.NO_WRAPPER_WITH_ID,
[g]),this);}else g.id||(g.id="anm-player-"+b.__instances),d=g;g=z.assignPlayerToWrapper(d,this,"anm-player-"+b.__instances);this.id=g.id;this.wrapper=g.wrapper;this.canvas=g.canvas;if(!z.checkPlayerCanvas(this.canvas))throw r.player(m.P.CANVAS_NOT_VERIFIED,this);this.ctx=z.getContext(this.canvas,"2d");this.state=b.createState(this);this.fire(f.S_CHANGE_STATE,f.NOTHING);this.subscribeEvents(this.canvas);this.__canvasPrepared=!0};b.prototype._addOpts=function(a){this.debug=e.defined(a.debug)?a.debug:
this.debug;this.repeat=e.defined(a.repeat)?a.repeat:this.repeat;this.autoPlay=e.defined(a.autoPlay)?a.autoPlay:this.autoPlay;this.startFrom=e.defined(a.startFrom)?a.startFrom:this.startFrom;this.stopAt=e.defined(a.stopAt)?a.stopAt:this.stopAt;this.zoom=a.zoom||this.zoom;this.speed=a.speed||this.speed;this.bgColor=a.bgColor||this.bgColor;this.width=a.width||this.width;this.height=a.height||this.height;this.ribbonsColor=a.ribbonsColor||this.ribbonsColor;this.thumbnailSrc=a.thumbnail||this.thumbnailSrc;
this.loadingMode=e.defined(a.loadingMode)?a.loadingMode:this.loadingMode;this.audioEnabled=e.defined(a.audioEnabled)?a.audioEnabled:this.audioEnabled;this.globalVolume=e.defined(a.volume)?a.volume:this.globalVolume;this.imagesEnabled=e.defined(a.imagesEnabled)?a.imagesEnabled:this.imagesEnabled;this.videoEnabled=e.defined(a.videoEnabled)?a.videoEnabled:this.videoEnabled;this.shadowsEnabled=e.defined(a.shadowsEnabled)?a.shadowsEnabled:this.shadowsEnabled;this.controlsEnabled=e.defined(a.controlsEnabled)?
a.controlsEnabled:this.controlsEnabled;this.controlsInvisible=e.defined(a.controlsInvisible)?a.controlsInvisible:this.controlsInvisible;this.infoEnabled=e.defined(a.infoEnabled)?a.infoEnabled:this.infoEnabled;this.handleEvents=e.defined(a.handleEvents)?a.handleEvents:this.handleEvents;this.drawStill=e.defined(a.drawStill)?a.drawStill:this.drawStill;this.infiniteDuration=e.defined(a.infiniteDuration)?a.infiniteDuration:this.infiniteDuration;this.forceAnimationSize=e.defined(a.forceAnimationSize)?a.forceAnimationSize:
this.forceAnimationSize;this.muteErrors=e.defined(a.muteErrors)?a.muteErrors:this.muteErrors;e.defined(a.mode)&&this.mode(a.mode)};b.prototype._checkOpts=function(){if(this.canvas){if(!this.width||!this.height){var a=z.getCanvasSize(this.canvas);this.width=a[0];this.height=a[1]}this._resize(this.width,this.height);this.bgColor&&z.setCanvasBackground(this.canvas,this.bgColor);this.anim&&this.handleEvents&&this.__subscribeDynamicEvents(this.anim);this.controlsEnabled&&!this.controls?(this._enableControls(),
this.infoEnabled?this._enableInfo():this._disableInfo()):!this.controlsEnabled&&this.controls&&(this._disableInfo(),this._disableControls());this.ctx&&(z.getAnmProps(this.ctx).skip_shadows=!this.shadowsEnabled);this.thumbnailSrc&&this.thumbnail(this.thumbnailSrc)}};b.prototype._postInit=function(){this.stop();var a=z.hasUrlToLoad(this.wrapper);a.url||(a=z.hasUrlToLoad(this.canvas));if(a.url){var b=null;a.importer_id&&anm.importers.isAccessible(a.importer_id)&&(b=anm.importers.create(a.importer_id));
this.load(a.url,b)}};b.prototype.mode=function(a){this.infiniteDuration=a&f.M_INFINITE_DURATION||void 0;this.handleEvents=a&f.M_HANDLE_EVENTS||void 0;this.controlsEnabled=a&f.M_CONTROLS_ENABLED||void 0;this.infoEnabled=a&f.M_INFO_ENABLED||void 0;this.drawStill=a&f.M_DRAW_STILL||void 0;return this};b.prototype.rect=function(a){if(!a)return{x:this.x,y:this.y,width:this.width,height:this.height};this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;this._moveTo(a.x,a.y);this._resize(a.width,
a.height);return this};b.prototype.forceRedraw=function(){switch(this.state.happens){case f.STOPPED:this.stop();break;case f.PAUSED:this.anim&&this.drawAt(this.state.time);break;case f.PLAYING:this.anim&&this._stopAndContinue();break;case f.NOTHING:this.controls||this._drawSplash()}};b.prototype.drawAt=function(d){if(d===b.NO_TIME)throw r.player(m.P.PASSED_TIME_VALUE_IS_NO_TIME,this);if(this.state.happens===f.RES_LOADING&&this.loadingMode===f.LM_ONREQUEST)this._postpone("drawAt",arguments);else{if(0>
d||!this.infiniteDuration&&d>this.anim.duration)throw r.player(a.strf(m.P.PASSED_TIME_NOT_IN_RANGE,[d]),this);var c=this.anim,k=this.__userBeforeRender,e=this.__userAfterRender;c.reset();z.getAnmProps(this.ctx).factor=this.factor();c.__informEnabled=!1;E.at(d,0,this.ctx,this.anim,this.width,this.height,this.zoom,this.ribbonsColor,k,e);return this}};b.prototype.size=function(a,b){if(!e.defined(a))return[this.width,this.height];this.__userSize=[a,b];this._resize();return this};b.prototype.factor=function(){return this.anim?
this.anim.width===this.width&&this.anim.height===this.height?1:Math.min(this.width/this.anim.width,this.height/this.anim.height):void 0};b.prototype.factorData=function(){if(this.anim){var b=a.fit_rects(this.width,this.height,this.anim.width,this.anim.height);return{factor:b[0],anim_rect:b[1],ribbon_one:b[2]||null,ribbon_two:b[3]||null}}};b.prototype.thumbnail=function(a,b,d){if(!a)return this.thumbnailSrc;var c=this;if(!c.__thumb||c.__thumb.src!=a){if(c.ctx){var k=z.PX_RATIO,e=c.ctx;e.save();e.clearRect(0,
0,c.width*k,c.height*k);e.restore()}var p=new u(a);c.__thumbLoading=!0;p.load(c.id,function(){c.__thumbLoading=!1;c.__thumb=p;if(b||d)c.__thumbSize=[b,d];c.state.happens!==f.PLAYING&&c.state.happens!==f.PAUSED&&c._drawStill()})}};b.prototype.detach=function(){z.playerAttachedTo(this.wrapper,this)&&(this.stop(),this.controls&&this.controls.detach(this.wrapper),z.detachPlayer(this),this.ctx&&z.clearAnmProps(this.ctx),this._reset(),t.fire(f.S_PLAYER_DETACH,this))};b.prototype.attachedTo=function(a){return z.playerAttachedTo(a,
this)};b.prototype.isAttached=function(){return z.playerAttachedTo(this.wrapper,this)};b.attachedTo=function(a,b){return z.playerAttachedTo(a,b)};b.prototype.invalidate=function(){this.controls&&this.controls.update(this.canvas)};b.__invalidate=function(a){return function(b){a.invalidate()}};b.prototype.beforeFrame=function(a){if(this.state.happens===f.PLAYING)throw r.player(m.P.BEFOREFRAME_BEFORE_PLAY,this);this.__userBeforeFrame=a};b.prototype.afterFrame=function(a){if(this.state.happens===f.PLAYING)throw r.player(m.P.AFTERFRAME_BEFORE_PLAY,
this);this.__userAfterFrame=a};b.prototype.beforeRender=function(a){if(this.state.happens===f.PLAYING)throw r.player(m.P.BEFORENDER_BEFORE_PLAY,this);this.__userBeforeRender=a};b.prototype.afterRender=function(a){if(this.state.happens===f.PLAYING)throw r.player(m.P.AFTERRENDER_BEFORE_PLAY,this);this.__userAfterRender=a};b.prototype.subscribeEvents=function(a){var c=b.__invalidate(this);z.subscribeWindowEvents({load:c});z.subscribeCanvasEvents(a,{mouseover:function(a){return function(b){d.autoFocus&&
a.handleEvents&&a.canvas&&a.canvas.focus();return!0}}(this),mouseout:function(a){return function(b){d.autoFocus&&a.handleEvents&&a.canvas&&a.canvas.blur();return!0}}(this)})};b.prototype.mute=function(){this.muted||this.toggleMute()};b.prototype.unmute=function(){this.muted&&this.toggleMute()};b.prototype.toggleMute=function(){this.muted=!this.muted;this.anim&&this.anim.traverse(function(a){a.$audio&&a.$audio.toggleMute()})};b.prototype.volume=function(a){if("undefined"===typeof a)return this.globalVolume;
this.globalVolume=a;this._updateMediaVolumes()};b.prototype._updateMediaVolumes=function(){var a=this;a.anim&&a.anim.traverse(function(b){b.$audio&&b.$audio.setVolume(a.globalVolume)})};b.prototype._drawEmpty=function(){var a=this.ctx,d=this.width,c=this.height;a.save();var k=z.PX_RATIO;a.fillStyle=b.EMPTY_BG;a.fillRect(0,0,d*k,c*k);a.restore()};b.prototype._drawStill=function(){var a=this.state,d=this.anim;this.drawStill?this.__thumb?this._drawThumbnail():d&&(!this.infiniteDuration&&e.finite(d.duration)?
this.drawAt(d.duration*b.PREVIEW_POS):this.drawAt(a.from)):this._drawEmpty()};b.prototype._drawThumbnail=function(){var b=this.__thumbSize||this.__thumb.bounds(),d=b.width,c=b.height,k=this.width,e=this.height,f=z.PX_RATIO,b=this.ctx;b.save();1!=f&&b.scale(f,f);if(d!=k||c!=e){e=a.fit_rects(k,e,d,c);d=e[0];c=e[1];k=e[2];e=e[3];if(k||e)b.fillStyle=this.ribbonsColor||"#000",k&&b.fillRect(k[0],k[1],k[2],k[3]),e&&b.fillRect(e[0],e[1],e[2],e[3]);c&&(b.beginPath(),b.rect(c[0],c[1],c[2],c[3]),b.clip(),b.translate(c[0],
c[1]));1!=d&&b.scale(d,d)}this.__thumb.apply(b);b.restore()};b.prototype._drawSplash=function(){this.controls||this.__thumbLoading||this.__thumb&&this.drawStill&&this._drawThumbnail()};b.prototype._drawLoadingSplash=function(a){if(!this.controls){this._drawSplash();var b=this.ctx;b.save();b.setTransform(1,0,0,1,0,0);b.fillStyle="#006";b.font="12px sans-serif";b.fillText(a||w.LOADING,20,25);b.restore()}};b.prototype._drawErrorSplash=function(a){if(this.canvas&&this.ctx&&!this.controls){this._drawSplash();
var b=this.ctx;b.save();b.setTransform(1,0,0,1,0,0);b.fillStyle="#006";b.font="14px sans-serif";b.fillText(w.ERROR+(a?": "+(a.message||typeof Error):"")+".",20,25);b.restore()}};b.prototype.toString=function(){return"[ Player '"+this.id+"' ]"};b.prototype._reset=function(){var a=this.state;this.loadingMode===f.LM_ONREQUEST&&a.happens===f.RES_LOADING&&(this._clearPostpones(),x.cancel(this.id));a.happens=f.NOTHING;a.from=0;a.time=b.NO_TIME;a.duration=void 0;this.fire(f.S_CHANGE_STATE,f.NOTHING);this.controls&&
this.controls.reset();this.ctx.clearRect(0,0,this.width*z.PX_RATIO,this.height*z.PX_RATIO)};b.prototype._stopAndContinue=function(){var a=this.state,b=a.__lastPlayConf,a=a.time;this.stop();this.play(a,b[1],b[2])};b.prototype._moveTo=function(a,b){z.setCanvasPosition(this.canvas,a,b)};b.prototype._resize=function(a,b){var d=this.canvas,c=this.__userSize||[a,b],k=z.getCanvasParameters(d);if(!k||k[0]!==c[0]||k[1]!==c[1])return c[0]&&c[1]||(c=k),z.setWrapperSize(this.wrapper,c[0],c[1]),z.setCanvasSize(d,
c[0],c[1]),this.width=c[0],this.height=c[1],z.updateCanvasOverlays(d),this.ctx&&(z.getAnmProps(this.ctx).factor=this.factor()),this.controls&&this.controls.handleAreaChange(),this.forceRedraw(),c};b.prototype._restyle=function(a){z.setCanvasBackground(this.canvas,a);this.forceRedraw()};b.prototype._enableControls=function(){this.controls||(this.controls=new p(this));this.controls.enable()};b.prototype._disableControls=function(){this.controls&&(this.controls.disable(),this.controls=null)};b.prototype._enableInfo=
function(){this.controls&&this.controls.enableInfo()};b.prototype._disableInfo=function(){this.controls&&this.controls.disableInfo()};b.prototype.__subscribePlayingEvents=function(a){if(!this.__anim_handlers||!this.__anim_handlers[a.id]){var b={};b[f.A_START]=this.on(f.S_PLAY,function(){a.fire(f.A_START)});b[f.A_PAUSE]=this.on(f.S_PAUSE,function(){a.fire(f.A_PAUSE)});b[f.A_STOP]=this.on(f.S_STOP,function(){a.fire(f.A_STOP)});this.__anim_handlers||(this.__anim_handlers={});this.__anim_handlers[a.id]=
b}};b.prototype.__unsubscribePlayingEvents=function(a){if(this.__anim_handlers){var b=this.__anim_handlers[a.id];b&&(this.unbind(f.S_PLAY,b[f.A_START]),this.unbind(f.S_PAUSE,b[f.A_PAUSE]),this.unbind(f.S_STOP,b[f.STOP]),this.__anim_handlers[a.id]=null)}};b.prototype.__subscribeDynamicEvents=function(a){d.setTabindex&&z.setTabIndex(this.canvas,this.__instanceNum);if(a){var b=!1;if(this.__boundTo)for(var c=0,k=this.__boundTo,e=k.length;c<e;c++)a.id===k[c][0]&&this.canvas===k[c][1]&&(b=!0);else this.__boundTo=
[];b||(this.__boundTo.push([a.id,this.canvas]),a.on(f.X_ERROR,this.__onerror()),a.subscribeEvents(this.canvas))}};b.prototype.__unsubscribeDynamicEvents=function(a){d.setTabindex&&z.setTabIndex(this.canvas,void 0);if(a&&this.__boundTo){for(var b=-1,c=0,k=this.__boundTo,e=k.length;c<e;c++)a.id===k[c][0]&&(b=c,a.unsubscribeEvents(k[c][1]));0<=b&&this.__boundTo.splice(b,1)}};b.prototype._ensureHasState=function(){if(!this.state)throw r.player(m.P.NO_STATE,this);};b.prototype._ensureHasAnim=function(){if(!this.anim)throw r.player(m.P.NO_ANIMATION,
this);};b.prototype.__beforeFrame=function(a){return function(a,d,c,g){return function(k){c.clearAllLaters();if(d.happens!==f.PLAYING)return!1;if(d.stop!==b.NO_TIME&&k>=d.from+d.stop||e.finite(d.duration)&&k>d.duration+b.PEFF)return a.fire(f.S_COMPLETE),d.time=0,c.reset(),a.stop(),a.repeat||c.repeat?(a.repeating=!0,a.play(),a.fire(f.S_REPEAT)):!a.infiniteDuration&&e.finite(d.duration)&&a.drawAt(d.duration),!1;g&&g(k,a.ctx);return!0}}(this,this.state,a,this.__userBeforeFrame)};b.prototype.__afterFrame=
function(a){return function(a,b,d,c){return function(a){c&&c(a);d.invokeAllLaters();return!0}}(this,this.state,a,this.__userAfterFrame)};b.prototype.__onerror=function(){var a=this;return function(b){return a.__onerror_f(b)}};b.prototype.__onerror_f=function(a){var b=this.muteErrors,b=b&&!(a instanceof r.SystemError);try{this.state&&(this.state.happens=f.ERROR),this.__lastError=a,this.fire(f.S_CHANGE_STATE,f.ERROR),this.anim=null}catch(d){throw d;}try{!this.state||this.state.happens==f.NOTHING&&this.state.happens==
f.STOPPED||this.__unsafe_stop()}catch(d){}b=this.__err_handler&&this.__err_handler(a)||b;if(!b){try{this._drawErrorSplash(a)}catch(d){}throw a;}};b.prototype._clearPostpones=function(){this._queue=[]};b.prototype._postpone=function(a,b){this._queue||(this._queue=[]);this._queue.push([a,b])};b.prototype._callPostpones=function(){if(this._queue&&this._queue.length)for(var a=this._queue,b,d=0,c=a.length;d<c;d++)b=a[d],this[b[0]].apply(this,b[1]);this._queue=[]};b.prototype.reportStats=function(){if(this.anim&&
this.anim.meta&&this.anim.meta._anm_id){this.statImg||(this.statImg=z.createStatImg());var a=this._loadSrc,b=this.anim.meta._anm_id,d=!1,c=!1;a?(d=-1!==a.indexOf("animatron-test.com"),c=-1!==a.indexOf("animatron.com")):window&&window.location&&(a=window.location.hostname,d=-1!==a.indexOf("animatron-test.com"),c=-1!==a.indexOf("animatron.com"));d?this.statImg.src="//api.animatron-test.com/stats/report/"+b+"?"+Math.random():c&&(this.statImg.src="//api.animatron.com/stats/report/"+b+"?"+Math.random())}};
b.createState=function(a){return{happens:f.NOTHING,time:b.NO_TIME,from:0,stop:b.NO_TIME,afps:0,speed:1,duration:void 0,__startTime:-1,__redraws:0,__rsec:0}};b.forSnapshot=function(a,d,c,k,e){var f=new b;f.init(a,e);f.load(d,c,k);return f};b.prototype._applyUrlParamsToAnimation=function(a){e.defined(a.t)?(this.state.happens===f.PLAYING&&this.stop(),this.play(a.t/100)):e.defined(a.from)?(this.state.happens===f.PLAYING&&this.stop(),this.play(a.from/100)):e.defined(a.p)?(this.state.happens===f.PLAYING&&
this.stop(),this.play(a.p/100).pause()):e.defined(a.at)&&(this.state.happens===f.PLAYING&&this.stop(),this.play(a.at/100).pause())};b.prototype._applyTimeOptionsIfSet=function(){this.autoPlay?(this.state.happens===f.PLAYING&&this.stop(),this.play(this.startFrom||this.state.from||0)):this.startFrom?(this.state.happens===f.PLAYING&&this.stop(),this.play(this.startFrom)):this.stopAt&&this.pause(this.stopAt)};y.exports=b},{"./animation/animation.js":3,"./animation/element.js":6,"./conf.js":11,"./constants.js":12,
"./errors.js":13,"./events.js":14,"./global_opts.js":15,"./graphics/sheet.js":22,"./loader.js":26,"./loc.js":27,"./log.js":28,"./player_manager.js":33,"./render.js":34,"./resource_manager.js":35,"./ui/controls.js":36,"./utils.js":39,engine:40}],33:[function(c,y,v){function b(){this.hash={};this.instances=[];this._initHandlers()}v=c("./events.js");var f=c("./constants.js");c=c("engine");v.provideEvents(b,[f.S_NEW_PLAYER,f.S_PLAYER_DETACH]);b.prototype.filterEvent=function(a,b){a==f.S_NEW_PLAYER&&(this.hash[b.id]=
b,this.instances.push(b));return!0};b.prototype.getPlayer=function(a){return this.hash[a]};b.prototype.handleDocumentHiddenChange=function(a){var b,c;for(b=0;b<this.instances.length;b++)c=this.instances[b],a&&c.state.happens===f.PLAYING?(c._pausedViaHidden=!0,c.pause()):!a&&c._pausedViaHidden&&(c._pausedViaHidden=!1,c.play(c.state.from))};var a=new b;c.onDocumentHiddenChange(function(b){a.handleDocumentHiddenChange(b)});y.exports=a},{"./constants.js":12,"./events.js":14,engine:40}],34:[function(c,
y,v){function b(a,c,h,p,n,r,w){"undefined"===typeof z[c.id]&&(z[c.id]=0);var u=c.state;if(u.happens===d.PLAYING){var k=Date.now()-u.__startTime,g=k/1E3*u.speed+u.from,q=g-u.__prevt;u.time=g;u.__dt=q;u.__prevt=g;if(!p||p(g))if(0===u.__rsec&&(u.__rsec=k),1E3<=k-u.__rsec&&(u.afps=u.__redraws,u.__rsec=k,u.__redraws=0),u.__redraws++,f(g,q,a,h,c.width,c.height,c.zoom,c.ribbonsColor,r,w),c.debug&&e(a,u.afps,g),!n||n(g))return z[c.id]+=q,1<=z[c.id]&&(c.fire(d.S_TIME_UPDATE,g),z[c.id]=0),u.__lastReq=m(function(){b(a,
c,h,p,n,r,w)})}}function f(b,d,c,e,f,h,m,u,k,g){c.save();var q=w.PX_RATIO;1!==q&&c.scale(q,q);f|=0;h|=0;q=f!=e.width||h!=e.height;e.factor=1*(m||1)*(e.zoom||1);q?a(c,e,f,h,e.width,e.height,u,function(a){c.clearRect(0,0,e.width,e.height);k&&k(b,c);1!=m&&c.scale(m,m);e.render(c,b,d);g&&g(b,c);c.restore()}):(c.clearRect(0,0,e.width,e.height),k&&k(b,c),1!=m&&c.scale(m,m),e.render(c,b,d),g&&g(b,c),c.restore())}function a(a,b,d,c,e,f,h,u){f=r(d,c,e,f);d=f[0];c=f[1];e=f[2];f=f[3];a.save();if(e||f)a.save(),
a.fillStyle=h||"#000",e&&(a.clearRect(e[0],e[1],e[2],e[3]),a.fillRect(e[0],e[1],e[2],e[3])),f&&(a.clearRect(f[0],f[1],f[2],f[3]),a.fillRect(f[0],f[1],f[2],f[3])),a.restore();c&&(a.beginPath(),w.isIE10&&(c[0]=Math.floor(c[0]),c[1]=Math.floor(c[1]),c[2]=Math.ceil(c[2]),c[3]=Math.ceil(c[3])),a.rect(c[0],c[1],c[2],c[3]),a.clip(),a.translate(c[0],c[1]));b.factor*=d;1!=d&&a.scale(d,d);u(d);a.restore()}function e(a,b,d){a.fillStyle="#999";a.font="20px sans-serif";a.fillText(Math.floor(b),8,20);a.font="10px sans-serif";
a.fillText(Math.floor(1E3*d)/1E3,8,35)}var d=c("./constants.js");v=c("./animation/painter.js");var n=c("./animation/modifier.js"),h=c("./graphics/brush.js"),w=c("engine"),m=w.getRequestFrameFunc(),r=c("./utils.js").fit_rects;c={};var z={};c.loop=b;c.at=f;c.drawFPS=e;c.p_drawVisuals=new v(function(a){this.applyVisuals(a)},d.PNT_SYSTEM);c.p_applyAComp=new v(function(a){this.applyAComp(a)},d.PNT_SYSTEM);c.p_drawBounds=new v(function(a,b){var d=this.myBounds();if(d&&!this.isEmpty()){var c=this.isEmpty()?
"#f00":"#600",e=d.width,d=d.height;a.save();a.beginPath();a.lineWidth=1;a.strokeStyle=c;a.moveTo(0,0);a.lineTo(e,0);a.lineTo(e,d);a.lineTo(0,d);a.lineTo(0,0);a.closePath();a.stroke();a.restore()}},d.PNT_DEBUG);c.p_drawPivot=new v(function(a,b){if(b=b||this.$pivot){var d=this.myBounds(),c=this.isEmpty()?"#600":"#f00";a.save();d&&a.translate(b[0]*d.width,b[1]*d.height);a.beginPath();a.lineWidth=1;a.strokeStyle=c;a.moveTo(0,-10);a.lineTo(0,0);a.moveTo(3,0);a.arc(0,0,3,0,2*Math.PI,!0);a.closePath();a.stroke();
a.restore()}},d.PNT_DEBUG);c.p_drawReg=new v(function(a,b){if(b=b||this.$reg)a.save(),a.lineWidth=1,a.strokeStyle="#00f",a.fillStyle="rgba(0,0,255,.3)",a.translate(b[0],b[1]),a.beginPath(),a.moveTo(-4,-4),a.lineTo(4,-4),a.lineTo(4,4),a.lineTo(-4,4),a.lineTo(-4,-4),a.closePath(),a.stroke(),a.beginPath(),a.moveTo(0,-10),a.lineTo(0,0),a.moveTo(3,0),a.closePath(),a.stroke(),a.restore()},d.PNT_DEBUG);c.p_drawName=new v(function(a,b){if(b=b||this.name)a.save(),a.fillStyle="#666",a.font="12px sans-serif",
a.fillText(b,0,10),a.restore()},d.PNT_DEBUG);c.p_drawMPath=new v(function(a,b){if(b=b||this.$mpath)a.save(),h.qstroke(a,"#600",2),a.beginPath(),b.apply(a),a.closePath(),a.stroke(),a.restore()},d.PNT_DEBUG);c.m_checkBand=new n(function(a,b,d){if(d[0]>b*a||d[1]<b*a)return!1},d.MOD_SYSTEM);y.exports=c},{"./animation/modifier.js":7,"./animation/painter.js":8,"./constants.js":12,"./graphics/brush.js":17,"./utils.js":39,engine:40}],35:[function(c,y,v){function b(b){a.logResMan&&e.debug(b)}function f(){this._cache=
{};this._errors={};this._waiting={};this._subscriptions={};this._onprogress={};this._url_to_subjects={}}var a=c("./conf.js"),e=c("./log.js"),d=c("./utils.js").is,n=c("./errors.js");f.prototype.subscribe=function(a,c,e,f){if(!a)throw n.system("Subject ID is empty");if(this._subscriptions[a])throw n.system("This subject ('"+a+"') is already subscribed to a bunch of resources, please group them in one.");var z=[];b("subscribing "+e.length+" to "+c.length+" urls: "+c);for(var x={},t=0;t<c.length;t++)c[t]&&
!x[c[t]]&&(x[c[t]]=!0,z.push(c[t]),this._url_to_subjects[c[t]]||(this._url_to_subjects[c[t]]=[]),this._url_to_subjects[c[t]].push(a));b("filtered from "+c.length+" to "+z.length);this._subscriptions[a]=[z,d.arr(e)?e:[e]];f&&(this._onprogress[a]=function(a){var b={},d=1/a.length,c=0,e=0;return function(a,k){var g=b[a]||0;-1!==k?(c+=(k-g)*d,b[a]=k):(c-=g,e+=g);f(a,k,c,e)}}(z))};f.prototype.loadOrGet=function(a,d,c,e,f){var x=this;if(!a)throw n.system("Subject ID is empty");if(!d)throw n.system("Given URL is empty");
var t=x._onprogress[a];b("request to load "+d);x._cache[d]?(b("> already received, trigerring success"),a=x._cache[d],e&&e(a),x.trigger(d,a),t&&t(d,1)):x._errors[d]?(b("> failed to load before, notifying with error"),f&&f(x._errors[d]),t&&t(d,-1)):x._waiting[a]&&x._waiting[a]&&x._waiting[a][d]?(b("> someone is already waiting for it, subscribing"),c=a+(new Date).getTime()+Math.random(),x._onprogress[c]=x._onprogress[a],x.subscribe(c,[d],function(a){a[0]?(e(a[0]),t&&t(d,1)):(f(a[0]),t&&t(d,-1))})):
(b("> not cached, requesting"),x._waiting[a]||(x._waiting[a]={}),x._waiting[a][d]=c,c(function(a){a=a||!0;b("file at "+d+" succeeded to load, triggering success");x.trigger(d,a);e&&e(a);t&&t(d,1);x.check()},function(a){b("file at "+d+" failed to load, triggering error");x.error(d,a);f&&f(a);t&&t(d,-1);x.check()},t?function(a){t(d,a)}:function(){}))};f.prototype.trigger=function(a,d){if(this._cache[a]||this._errors[a])this.check();else{b("triggering success for url "+a);var c=this._url_to_subjects[a];
if(c)for(var e=0,f=c.length;e<f;e++)this._waiting[c[e]]&&delete this._waiting[c[e]][a];this._cache[a]=d}};f.prototype.error=function(a,d){if(this._cache[a]||this._errors[a])this.check();else{b("triggering error for url "+a);var c=this._url_to_subjects[a];if(c)for(var e=0,f=c.length;e<f;e++)this._waiting[c[e]]&&delete this._waiting[c[e]][a];this._errors[a]=d}};f.prototype.has=function(a){return"undefined"!==typeof this._cache[a]};f.prototype.check=function(){b("checking subscriptions");var a=this._subscriptions,
d=this._cache,c=this._errors,e=null,f;for(f in a){b("subscription group '"+f+"'");var n=a[f][0],t=a[f][1],v=0,p=0,A;A=0;for(ul=n.length;A<ul;A++)c[n[A]]&&v++,d[n[A]]&&p++;b("success: "+p+", errors: "+v+", ready: "+(p+v===n.length));if(p+v===n.length){p=[];A=0;for(ul=n.length;A<ul;A++)p.push(d[n[A]]||c[n[A]]);b("notifying subscribers that "+n+" are all ready");n=0;for(A=t.length;n<A;n++)t[n](p,v);e||(e=[]);e.push(f)}}if(e)for(d=0,c=e.length;d<c;d++)b("removing notified subscribers for subject '"+e[d]+
"' from queue"),delete a[e[d]]};f.prototype.cancel=function(a){if(!a)throw n.system("Subject ID is empty");if(this._waiting[a]){var b=this._subscriptions[a][0];if(b)for(var d=0,c=b.length;d<c;d++)delete this._waiting[a][b[d]]}delete this._subscriptions[a]};f.prototype.clear=function(){this._cache={};this._errors={};this._waiting={};this._loaders={};this._subscriptions={}};y.exports=new f},{"./conf.js":11,"./errors.js":13,"./log.js":28,"./utils.js":39}],36:[function(c,y,v){function b(b){this.player=
b;this.ctx=this.canvas=null;this.bounds=[];this.info=this.theme=null;this.invisible=b.controlsInvisible;this.state={happens:a.NOTHING,mpos:{x:0,y:0},alpha:1,click:!1,changed:!0,time:0,gtime:0,fadeTimer:0,fadeMode:0,mouseInteractedAt:0}}var f=c("../utils.js"),a=c("../constants.js");c("../loc.js");var e=c("engine");c("./infoblock.js");var d=b.DEFAULT_THEME=c("./controls_theme.json");b.THEME=b.DEFAULT_THEME;b.LAST_ID=0;b.prototype.update=function(a){var d=this.canvas;d?e.updateOverlay(a,d):(d=e.addCanvasOverlay("ctrls-"+
b.LAST_ID,a,[0,0,1,1],function(b){e.registerAsControlsElement(b,a)}),b.LAST_ID++,this.id=d.id,this.canvas=d,this.ctx=e.getContext(d,"2d"),this.subscribeEvents(d),this.changeTheme(b.THEME),this.setupRenderLoop());this.handleAreaChange();this.info&&this.info.update(a)};b.prototype.subscribeEvents=function(){var b=this;b.player.on(a.S_CHANGE_STATE,function(a){b.state.happens=a;b.state.changed=!0});e.subscribeCanvasEvents(b.canvas,{mouseenter:function(a){b.handleMouseEnter(a)},mousemove:function(a){b.handleMouseMove(a)},
mouseleave:function(a){b.handleMouseLeave()},mousedown:function(a){b.handleClick();e.preventDefault(a)},click:e.preventDefault,dblclick:e.preventDefault})};b.prototype.checkMouseTimeout=function(d){this.state.mouseInteracted?(this.state.mouseInteractedAt=d,this.state.mouseInteracted=!1,this.state.autoHidden=!1,this.show()):this.state.autoHidden||!(d-this.state.mouseInteractedAt>this.theme.fadeTimes.idle)||this.state.happens!==a.PLAYING&&this.state.happens!==a.PAUSED||b.isInProgressArea(this.state.mpos,
this.bounds[2],this.bounds[3])||(this.hide(),this.state.autoHidden=!0)};b.prototype.checkFade=function(a){var b=this.state,c=b.fadeMode,e=!1,f=b.alpha;0!==c&&(e=!0,b.fadeTimer-=a,f=1===c?Math.min(1,1-b.fadeTimer/d.fadeTimes.fadein):Math.max(0,b.fadeTimer/d.fadeTimes.fadeout),b.alpha=f,0>=b.fadeTimer&&(b.fadeTimer=0,b.fadeMode=0));return e};b.prototype.render=function(b){this.checkMouseTimeout(b);var c=b-this.state.gtime;this.state.gtime=b;this.state.time=this.player.state.time;if(!this.invisible&&
this.bounds&&this.state.changed){this.rendering=!0;b=this.checkFade(c);var c=this.state,h=this.player,n=c.happens,u=c.mpos,k=c.time,g=this.ctx,q=this.theme,D=this.player.state.duration,w=k/(0!==D?D:1),v=this.bounds[2],y=this.bounds[3],F=e.PX_RATIO;g.save();g.setTransform(1,0,0,1,0,0);1!=F&&g.scale(F,F);g.clearRect(0,0,v,y);g.globalAlpha=c.alpha;if(n===a.PLAYING)D&&(r(g,q,v,y,w),g.save(),F=y-d.bottomControls.height,g.fillStyle=d.button.color,g.fillRect(9,F+3,3,9),g.fillRect(15,F+3,3,9),g.restore(),
t(g,q,v,y,k,D,w,u),x(g,v,y,h.muted));else if(n===a.STOPPED)m(g,q,v,y),z(g,q,v,y,this.focused),c.changed=!1;else if(n===a.PAUSED)D&&(r(g,q,v,y,w),g.save(),F=y-d.bottomControls.height,g.strokeStyle="transparent",g.fillStyle=d.button.color,g.beginPath(),g.moveTo(9,F+3),g.lineTo(18,F+7),g.lineTo(9,F+11),g.lineTo(9,F+3),g.closePath(),g.fill(),g.restore(),t(g,q,v,y,k,D,w,u),x(g,v,y,h.muted)),m(g,q,v,y),z(g,q,v,y,this.focused),c.changed=!1;else if(n===a.NOTHING)c.changed=!1;else if(n===a.LOADING||n===a.RES_LOADING){if(q=
this.loadingProgress,h=this.loadingErrors,q||h)g.translate(0,y-d.loading.factorLineWidth),g.strokeStyle=d.loading.factorBackColor,g.lineWidth=d.loading.factorLineWidth,g.beginPath(),g.moveTo(0,0),g.lineTo(v,0),g.stroke(),g.strokeStyle=d.loading.factorDoneColor,g.beginPath(),g.moveTo(0,0),g.lineTo(v*q,0),g.stroke(),h&&(g.strokeStyle=d.loading.factorErrorColor,g.moveTo(v*q,0),g.lineTo(v*h,0),g.stroke())}else n===a.ERROR&&(m(g,q,v,y),h=h.__lastError,g.save(),g.translate(v/2,y/2),g.rotate(Math.PI/4),
g.strokeStyle="transparent",g.fillStyle=q.button.color,g.fillRect(-25,-3,50,6),g.fillRect(-3,-25,6,50),g.restore(),B(g,q,v/2,y/2*(1+q.circle.radius),1.2*q.font.statussize,h&&h.message?f.ell_text(h.message,q.error.statuslimit):h,q.error.color),c.changed=!1);g.restore();this.info&&(n!==a.NOTHING?(this._infoShown=!0,this.info.render()):this._infoShown=!1);c.changed|=b;this.rendering=!1}};b.prototype.react=function(){if(!this.hidden){var c=this.player,e=this.state.happens,h=d.progress.buttonWidth;if(e!==
a.NOTHING&&e!==a.LOADING&&e!==a.ERROR){var n=this.state.mpos,u=this.bounds[2],k=this.bounds[3];if(!this.invisible&&b.isInProgressArea(n,u,k)){if(n.x>h&&n.x<u-h){time=f.roundTo(c.state.duration*(n.x-h)/(u-2*h),1);time>c.anim.duration&&(time=c.anim.duration);c.seek(time);this.state.time=time;return}if(n.x>u-h){c.toggleMute();return}}e===a.STOPPED?c.play(0):e===a.PAUSED?c.play(this.state.time):e===a.PLAYING&&c.pause()}}};b.prototype.handleAreaChange=function(){this.player&&this.player.canvas&&(this.bounds=
e.getCanvasBounds(this.canvas))};b.prototype.handleMouseMove=function(d){this.state.mouseInteracted=!0;d=e.getEventPosition(d,this.canvas);this.state.mpos.x=d.x;this.state.mpos.y=d.y;if(this.state.happens===a.PLAYING||this.state.happens===a.PAUSED)b.isInProgressArea(this.state.mpos,this.bounds[2],this.bounds[3])?(this.state.changed=!0,this.state.mouseInProgressArea=!0):(this.state.mouseInProgressArea&&(this.state.changed=!0),this.state.mouseInProgressArea=!1)};b.prototype.handleClick=function(){this.state.changed=
!0;this.state.mouseInteracted=!0;this.show();this.react()};b.prototype.handleMouseEnter=function(){this.show();this.forceNextRedraw()};b.prototype.handleMouseLeave=function(){this.state.happens!==a.PLAYING&&this.state.happens!==a.PAUSED||this.hide()};b.prototype.hide=function(){0!==this.state.alpha&&2!==this.state.fadeMode&&(this.state.fadeMode=2,this.state.fadeTimer=d.fadeTimes.fadeout-this.state.fadeTimer,this.state.changed=!0)};b.prototype.show=function(){1!==this.state.alpha&&1!==this.state.fadeMode&&
(this.state.fadeMode=1,this.state.fadeTimer=d.fadeTimes.fadein-this.state.fadeTimer,this.state.changed=!0)};b.prototype.reset=function(){this.info&&this.info.reset()};b.prototype.detach=function(a){this.stopRenderLoop();e.detachElement(a,this.canvas);this.info&&this.info.detach(a);this.ctx&&e.clearAnmProps(this.ctx)};b.prototype.changeTheme=function(a){this.theme=a;this.state.changed=!0};b.prototype.forceNextRedraw=function(){this.state.changed=!0};b.prototype.enable=function(){this.update(this.player.canvas)};
b.prototype.disable=function(){this.hide();this.detach(this.player.wrapper)};b.prototype.enableInfo=function(){};b.prototype.disableInfo=function(){};var n=e.getRequestFrameFunc(),h=e.getCancelFrameFunc(),w=null;b.prototype.setupRenderLoop=function(){var a=this,b=function(d){a.render.call(a,d);w=n(b)};w=n(b)};b.prototype.stopRenderLoop=function(){w&&h(w)};b.isInProgressArea=function(a,b,c){return a.y<=c&&a.y>=c-d.bottomControls.height};var m=function(a,b,d,c,e){a.save();d/=2;c/=2;a.beginPath();a.fillStyle=
b.circle.color;a.arc(d,c,b.circle.radius,0,2*Math.PI);a.fill();a.restore()},r=function(a,b,d,c,e){a.save();var k=b.progress.buttonWidth,g=b.bottomControls.height;a.fillStyle=b.progress.backColor;a.fillRect(0,c-g,d,g);a.fillStyle=b.progress.inactiveColor;a.fillRect(k,c-10,d-2*k,5);d=Math.round(e*(d-2*k));a.fillStyle=b.progress.activeColor;a.fillRect(k,c-10,d,5);a.restore()},z=function(a,b,d,c,e){a.save();d/=2;c/=2;a.strokeStyle="transparent";a.fillStyle=b.button.color;a.beginPath();a.moveTo(d-12,c-
20);a.lineTo(d-12,c+20);a.lineTo(d+18,c);a.lineTo(d-12,c-20);a.closePath();a.fill();a.restore()},x=function(a,b,c,e){a.save();b-=d.progress.buttonWidth;c-=d.bottomControls.height;a.strokeStyle="transparent";a.lineWidth=1;a.fillStyle=d.button.color;a.beginPath();a.translate(b,c);a.moveTo(3,6);a.lineTo(6,6);a.lineTo(12,3);a.lineTo(12,12);a.lineTo(6,9);a.lineTo(3,9);a.lineTo(3,6);a.closePath();a.fill();a.lineWidth=1;a.strokeStyle=d.button.color;a.beginPath();if(e)a.moveTo(15,5),a.lineTo(21,10),a.moveTo(15,
10),a.lineTo(21,5),a.stroke();else for(e=0;3>e;e++)a.beginPath(),a.moveTo(15+3*e,3),a.bezierCurveTo(18+3*e,7,18+3*e,8,15+3*e,12),a.stroke();a.restore()},t=function(a,d,c,e,u,k,g,q){var h=d.progress.buttonWidth;b.isInProgressArea(q,c,e)&&q.x>h&&q.x<c-h&&(g=(q.x-h)/(c-2*h),u=Math.round(k*g));k=h+Math.round(g*(c-2*h));a.beginPath();a.fillStyle=d.progress.backColor;a.strokeStyle="transparent";a.clearRect(0,e-40,c,20);c=Math.min(Math.max(1,k-17),c-35);k=e-40;g=c+34;q=k+20;a.moveTo(c+3,k);a.lineTo(g-3,
k);a.quadraticCurveTo(g,k,g,k+3);a.lineTo(g,k+20-3);a.quadraticCurveTo(g,q,g-3,q);a.lineTo(c+3,q);a.quadraticCurveTo(c,q,c,q-3);a.lineTo(c,k+3);a.quadraticCurveTo(c,k,c+3,k);a.moveTo(c+17-3,k+20);a.lineTo(c+17,k+20+3);a.lineTo(c+17+3,k+20);a.closePath();a.fill();B(a,d,c+17,e-30,8,f.fmt_time(u))},B=function(a,b,d,c,e,k,g,f){a.save();a.font=b.font.weight+" "+Math.floor(e||15)+"pt "+b.font.face;a.textAlign=f||"center";a.textBaseline="middle";a.fillStyle=g||b.font.color;a.fillText(k,d,c);a.restore()};
y.exports=b},{"../constants.js":12,"../loc.js":27,"../utils.js":39,"./controls_theme.json":37,"./infoblock.js":38,engine:40}],37:[function(c,y,v){y.exports={font:{face:"Arial, sans-serif",weight:"bold",timesize:13.5,statussize:8.5,infosize_a:10,infosize_b:8,color:"white"},circle:{radius:40,color:"rgba(0,0,0,0.7)"},bottomControls:{height:15},progress:{backColor:"rgba(0,0,0,0.7)",activeColor:"white",inactiveColor:"rgba(255,255,255,0.5)",buttonWidth:27},button:{color:"white"},loading:{factorBackColor:"rgba(0,0,0,0.7)",
factorDoneColor:"rgba(255,255,255,0.8)",factorErrorColor:"rgba(255,0,0,0.8)",factorLineWidth:14},fadeTimes:{fadein:300,fadeout:300,idle:2500},error:{statusLimit:40,color:"darkred"}}},{}],38:[function(c,y,v){y.exports=function(b,c){}},{}],39:[function(c,y,v){(function(b){function f(){}c("./constants.js");c("./errors.js");var a={defined:function(a){return!("undefined"===typeof a||null===a||void 0===a)}};a.finite=b.isFinite;a.nan=b.isNaN;a.arr=Array.isArray;a.integer=function(b){return a.num(b)&&Math.floor(b)==
b};a.num=function(c){c=b.parseFloat(c);return!a.nan(c)&&a.finite(c)};a.fun=function(a){return"function"===typeof a};a.obj=function(a){return"object"===typeof a};a.str=function(a){return"string"===typeof a};a.not_empty=function(a){return Object.keys?0<Object.keys(a).length:0<Object.getOwnPropertyNames(a).length};a.modifier=function(a){return a instanceof anm.Modifier};a.painter=function(a){return a instanceof anm.Painter};a.tween=function(b){return a.modifier(b)&&b.is_tween};a.equal=function(b,d){if(b===
d)return!0;if(!(b instanceof Object&&d instanceof Object)||b.constructor!==d.constructor)return!1;for(var c in b)if(b.hasOwnProperty(c)&&(!d.hasOwnProperty(c)||b[c]!==d[c]&&("object"!==typeof b[c]||!a.equal(b[c],d[c]))))return!1;for(c in d)if(d.hasOwnProperty(c)&&!b.hasOwnProperty(c))return!1;return!0};y.exports={fmt_time:function(b){if(!a.finite(b))return"\u221e";var c=Math.abs(b),f=Math.floor(c/3600),h=Math.floor((c-3600*f)/60),c=Math.floor(c-3600*f-60*h);return(0>b?"-":"")+(0<f?(10>f?"0"+f:f)+
":":"")+(10>h?"0"+h:h)+":"+(10>c?"0"+c:c)},ell_text:function(a,b){if(!a)return"";var c=a.length;if(c<=b)return a;var f=Math.floor(c/2)-2;return a.slice(0,f)+"..."+a.slice(c-f)},compareFloat:function(a,b,c){0!==c&&(c=c||2);c=Math.pow(10,c);return Math.round(a*c)==Math.round(b*c)},roundTo:function(a,b){if(!b)return Math.round(a);var c=Math.pow(10,b);return Math.round(a*c)/c},interpolateFloat:function(a,b,c){return a*(1-c)+b*c},paramsToObj:function(a){var b={};a=a.split("&");for(var c=a.length,f;c--;)f=
a[c].split("="),b[f[0]]=f[1];return b},obj_clone:function(a){var b={},c;for(c in a)b[c]=a[c];return b},mrg_obj:function(b,c,f){if(!c)return b;f=f||{};for(var h in c)f[h]=a.defined(b[h])?b[h]:c[h];return f},strf:function(b,c){return b.replace(/{(\d+)}/g,function(b,e){return a.defined(c[e])?c[e]:b})},guid:function(){return Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10)},fit_rects:function(a,b,c,f){var w=a/c,m=b/f,r=Math.min(w,m);a=(a-c*r)/2;var v=(b-f*r)/2,x=c*
r,t=f*r;return 1!=w||1!=m?(f=[a,v,x,t],0!==a?[r,f,[0,0,a,b],[a+x,0,a,b]]:0!==v?[r,f,[0,0,c,v],[0,v+t,c,v]]:[r,f]):[1,[0,0,c,f]]},is:a,iter:function(a){if(a.__iter)return a.__iter.reset(),a.__iter;var b=0,c=a.length;return a.__iter={next:function(){if(b<c)return a[b++];b=0;throw new f;},hasNext:function(){return b<c},remove:function(){c--;return a.splice(--b,1)},reset:function(){b=0;c=a.length},get:function(){return a[b]},each:function(a,b){for(this.reset();this.hasNext();)!1===a(this.next())&&(b?
b(this.remove()):this.remove())}}},keys:function(a,b){if(Object.keys)for(var c=Object.keys(a),f=0;f<c.length&&!1!==b(c[f],a[c[f]]);f++);else for(c in a)if(!1===b(c,a[c]))break},removeElement:function(b,c){if(a.arr(b)){var f=array.indexOf(c);-1<f&&array.splice(f,1)}else b[c]=null},postpone:function(a){setTimeout(a,0)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./constants.js":12,"./errors.js":13}],40:[function(c,y,v){(function(b){for(var f=
"undefined"!==typeof window?window:{},a="undefined"!==typeof window?window.document:{},e="undefined"!==typeof b?b:{},d={},n=e.requestAnimationFrame,h=e.cancelAnimationFrame,v=0,m=["ms","moz","webkit","o"],r=0;r<m.length&&!e.requestAnimationFrame;++r)n=e[m[r]+"RequestAnimationFrame"],h=e[m[r]+"CancelAnimationFrame"]||e[m[r]+"CancelRequestAnimationFrame"];n||(n=function(a,b){var c=(new Date).getTime(),d=Math.max(0,16-(c-v)),e=f.setTimeout(function(){a(c+d)},d);v=c+d;return e});h||(h=function(a){clearTimeout(a)});
d.getRequestFrameFunc=function(){return n};d.getCancelFrameFunc=function(){return h};d.PX_RATIO=f.devicePixelRatio||1;d.ajax=function(a,b,c,e,h){var m;m=d.isIE9?new f.XDomainRequest:new f.XMLHttpRequest;if(!m)throw Error("Failed to create XMLHttp instance");m.onreadystatechange=function(){if(4==m.readyState)if(200==m.status)b&&b(m);else{var d=Error("AJAX request for "+a+" returned "+m.status+" instead of 200");if(c)c(d,m);else throw d;}};d.isIE9&&(m.onload=function(){b(m)},m.onerror=function(){c&&
c(Error("XDomainRequest Error"),m)});m.open(e||"GET",a,!0);if(h&&!d.isIE9)for(var p in h)m.setRequestHeader(p,h[p]);m.send(null)};d.getCookie=function(b){var c=a.cookie,d;if(c)for(d=0,c=c.split("; ");d<c.length;d++)if(c[d]=c[d].split("=",2),unescape(c[d][0])==b)return unescape(c[d][1]);return null};d.onDocReady=function(b){if(d.isDocReady())b();else{var c;a.addEventListener?c=a.addEventListener("DOMContentLoaded",function(){a.removeEventListener("DOMContentLoaded",c,!1);b()},!1):a.attachEvent&&(c=
function(){"complete"===a.readyState&&(a.detachEvent("onreadystatechange",c),b())},a.attachEvent("onreadystatechange",c))}};d.isDocReady=function(){return"complete"===a.readyState||"interactive"===a.readyState};d.__stylesTag=null;d.WRAPPER_CLASS="anm-wrapper";d.WRAPPER_INSTANCE_CLASS_PREFIX="anm-wrapper-";d.PLAYER_CLASS="anm-player";d.PLAYER_INSTANCE_CLASS_PREFIX="anm-player-";d.CONTROLS_CLASS="anm-controls";d.CONTROLS_INSTANCE_CLASS_PREFIX="anm-controls-";d.INFO_CLASS="anm-controls";d.INFO_INSTANCE_CLASS_PREFIX=
"anm-controls-";d.ensureGlobalStylesInjected=function(){if(!d.__stylesTag){var b=a.getElementById("anm-player-styles");if(!b){b=a.createElement("style");b.id="anm-player-styles";var k=c("../../res/player.css");b.innerHTML=k;a.head.appendChild(b)}d.__stylesTag=b}};d.injectElementStyles=function(a,b,c){a.classList?(a.classList.add(b),a.classList.add(c)):a.className=a.className?a.className+(b+" "+c):b+" "+c;a=d.getAnmProps(a);a.gen_class=b;a.inst_class=c};d.__textBuf=a.getElementById("anm-text-measurer");
d.createTextMeasurer=function(){var b=d.__textBuf;if(!b)d.onDocReady(function(){var c=a.createElement("div"),g=a.createElement("span");g.id="anm-text-measurer";c.id="anm-text-measurer-container";c.appendChild(g);a.body.appendChild(c);d.__textBuf=g;b=d.__textBuf});return function(a,c){var d="undefined"!==typeof c?c:a.lines;b.style.font=a.$font;b.style.whiteSpace="pre";if(anm.utils.is.arr(d)){for(var f=0,e=0,h=0,m=d.length;h<m;h++)b.textContent=d[h]||" ",f=Math.max(b.offsetWidth,f),e+=b.offsetHeight;
return[f,e]}b.textContent=d.toString()||"";return[b.offsetWidth,b.offsetHeight]}};d.getElementById=function(b){return a.getElementById(b)};d.findElementPosition=function(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),[a.left,a.top];var b=0,c=0;do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]};d.findScrollAwarePosition=function(b){var c=0,d=0;if(b.getBoundingClientRect){var f=b.getBoundingClientRect();do c+=b!==a.body?b.scrollLeft:a.documentElement.scrollLeft,
d+=b!==a.body?b.scrollTop:a.documentElement.scrollTop;while(b=b.offsetParent);return[f.left-c,f.top-d]}do c+=b.offsetLeft-(b!==a.body?b.scrollLeft:a.documentElement.scrollLeft),d+=b.offsetTop-(b!==a.body?b.scrollTop:a.documentElement.scrollTop);while(b=b.offsetParent);return[c,d]};d.moveElementTo=function(a,b,c){var f=d.hasAnmProps(a);(f&&f.inst_rule||a).style.left=0===b?"0":b+"px";(f&&f.inst_rule||a).style.top=0===c?"0":c+"px"};d.__trashBin=null;d.disposeElement=function(b){var c=d.__trashBin;c||
(c=a.createElement("div"),c.id="trash-bin",c.style.display="none",a.body.appendChild(c),d.__trashBin=c);c.appendChild(b);c.innerHTML=""};d.detachElement=function(a,b){(a||b.parentNode).removeChild(b)};d.showElement=function(a){a.style.visibility="visible"};d.hideElement=function(a){a.style.visibility="hidden"};d.clearChildren=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};d.createCanvas=function(b,c,g,f){var e=a.createElement("canvas");d.setCanvasSize(e,b,c,f);g&&d.setCanvasBackground(e,
g);return e};d.assignPlayerToWrapper=function(b,c,g){if(!b)throw Error("Element passed to anm.Player initializer does not exist.");anm.utils.is.str(b)&&(b=a.getElementById(b));var e="canvas"==b.tagName||"CANVAS"==b.tagName;e&&f.console&&console.warn("NB: A <canvas> tag was passed to the anm.Player as an element to attach to. This is not a recommended way since version 1.2; this <canvas> will be moved inside a <div>-wrapper because of it, so it may break document flow and/or CSS styles. Please pass any container such as <div> to a Player instead of <canvas> to fix it.");
var h=b.cloneNode(!1);g=e?b:a.createElement("canvas");b=e?a.createElement("div"):b;if(b.getAttribute("anm-player"))throw Error("Player is already attached to element '"+(b.id||g.id)+"'.");b.setAttribute("anm-player",!0);b.hasAttribute("anm-player-target")&&b.removeAttribute("anm-player-target");g.hasAttribute("anm-player-target")&&g.removeAttribute("anm-player-target");var m=g.id;g.id="";b.id||(b.id=m);g.id=b.id+"-cvs";m=d.getAnmProps(g);m.wrapper=b;m.was_before=h;h=b.id;m.id=h;if(e)if(e=g.parentNode||
a.body)e.replaceChild(b,g),b.appendChild(g);else throw Error("Provided canvas tag has no parent");else b.appendChild(g);d.ensureGlobalStylesInjected();d.injectElementStyles(b,d.WRAPPER_CLASS,d.WRAPPER_INSTANCE_CLASS_PREFIX+(h||"no-id"));d.injectElementStyles(g,d.PLAYER_CLASS,d.PLAYER_INSTANCE_CLASS_PREFIX+(h||"no-id"));d.subscribeWrapperToStateChanges(b,c);return{wrapper:b,canvas:g,id:h}};d.playerAttachedTo=function(a,b){if(d.hasAnmProps(a)){var c=d.getAnmProps(a);if(c.wrapper)return c.wrapper.hasAttribute("anm-player")}return a.hasAttribute("anm-player")};
d.findPotentialPlayers=function(){return a.querySelectorAll("[anm-player-target]")};d.hasAnmProps=function(a){return a.__anm};d.getAnmProps=function(a){a.__anm||(a.__anm={});return a.__anm};d.clearAnmProps=function(a){a&&a.__anm&&delete a.__anm};d.detachPlayer=function(b){var c=b.canvas,g=b.wrapper;g&&g.removeAttribute("anm-player");var f=g.parentNode||a.body,e=g.nextSibling,h=d.getAnmProps(c);d.clearChildren(g);h.was_before&&(f.removeChild(g),f.insertBefore(h.was_before,e));d.clearAnmProps(g);d.clearAnmProps(c);
b.controls&&(d.clearAnmProps(b.controls.canvas),b.controls.info&&d.clearAnmProps(b.controls.info.canvas));b.statImg&&d.detachElement(null,b.statImg)};d.getContext=function(a,b){return a.getContext(b)};d.extractUserOptions=function(a){function b(a){if("undefined"!==typeof a){if(null===a)return null;if("0"==a)return!1;if("1"==a)return!0;if("false"==a)return!1;if("true"==a)return!0;if("off"==a)return!1;if("on"==a)return!0;if("no"==a)return!1;if("yes"==a)return!0}}function c(a){return"undefined"===typeof a?
void 0:null===a?null:a?Number.parseFloat(a)/100:0}var f=d.PX_RATIO,e=a.getAttribute("anm-width");e||(e=a.hasAttribute("width")?a.getAttribute("width")/f:void 0);var h=a.getAttribute("anm-height");h||(h=a.hasAttribute("height")?a.getAttribute("height")/f:void 0);return{debug:b(a.getAttribute("anm-debug")),mode:a.getAttribute("anm-mode"),repeat:b(a.getAttribute("anm-repeat")),zoom:a.getAttribute("anm-zoom"),speed:a.getAttribute("anm-speed"),width:e,height:h,autoPlay:b(a.getAttribute("anm-autoplay")||
a.getAttribute("anm-auto-play")),startFrom:c(a.getAttribute("anm-start-from")),stopAt:c(a.getAttribute("anm-stop-at")),bgColor:a.getAttribute("anm-bgcolor")||a.getAttribute("anm-bg-color"),ribbonsColor:a.getAttribute("anm-ribbons")||a.getAttribute("anm-ribcolor")||a.getAttribute("anm-rib-color"),drawStill:b(a.getAttribute("anm-draw-still")||a.getAttribute("anm-draw-thumbnail")||a.getAttribute("anm-draw-thumb")),imagesEnabled:b(a.getAttribute("anm-images")||a.getAttribute("anm-images-enabled")),shadowsEnabled:b(a.getAttribute("anm-shadows")||
a.getAttribute("anm-shadows-enabled")),audioEnabled:b(a.getAttribute("anm-audio")||a.getAttribute("anm-audio-enabled")),controlsEnabled:b(a.getAttribute("anm-controls")||a.getAttribute("anm-controls-enabled")),infoEnabled:b(a.getAttribute("anm-info")||a.getAttribute("anm-info-enabled")),handleEvents:b(a.getAttribute("anm-events")||a.getAttribute("anm-handle-events")),infiniteDuration:b(a.getAttribute("anm-infinite")||a.getAttribute("anm-infinite-duration")),forceSceneSize:b(a.getAttribute("anm-scene-size")||
a.getAttribute("anm-force-scene-size")),inParent:void 0,muteErrors:b(a.getAttribute("anm-mute-errors")),loadingMode:a.getAttribute("anm-loading-mode"),thumbnail:a.getAttribute("anm-thumbnail")}};d.checkPlayerCanvas=function(a){return!0};d.hasUrlToLoad=function(a){return{url:a.getAttribute("anm-url")||a.getAttribute("anm-src"),importer_id:a.getAttribute("anm-importer")}};d.setTabIndex=function(a,b){a.setAttribute("tabindex",b)};d.getCanvasParameters=function(a){if(!d.hasAnmProps(a))return null;a=d.getAnmProps(a);
return a.width&&a.height?[a.width,a.height,d.PX_RATIO]:null};d.getCanvasSize=function(a){return a.getBoundingClientRect?(a=a.getBoundingClientRect(),[a.width,a.height]):[a.getAttribute("clientWidth")||a.clientWidth,a.getAttribute("clientHeight")||a.clientHeight]};d.getCanvasPosition=function(a){return d.findScrollAwarePosition(a)};d.getCanvasBounds=function(a){var b=d.getCanvasParameters(a);if(!b)return null;a=d.getCanvasPosition(a);return[a[0],a[1],b[0],b[1],b[2]]};d.setCanvasSize=function(a,b,c,
f){f=f||d.PX_RATIO;b|=0;c|=0;var e=d.getAnmProps(a);e.ratio=f;e.width=b;e.height=c;a.style.width=b+"px";a.style.height=c+"px";a.setAttribute("width",b*(f||1));a.setAttribute("height",c*(f||1));d._saveCanvasPos(a);return[b,c]};d.setCanvasPosition=function(a,b,c){var f=d.getAnmProps(a);f.usr_x=b;f.usr_y=c;d._saveCanvasPos(a)};d.setCanvasBackground=function(a,b){a.style.backgroundColor=b};d._saveCanvasPos=function(b){var c=a.defaultView&&a.defaultView.getComputedStyle,g=c?parseInt(c(b,null).paddingLeft,
10)||0:0,f=c?parseInt(c(b,null).paddingTop,10)||0:0,e=c?parseInt(c(b,null).borderLeftWidth,10)||0:0,c=c?parseInt(c(b,null).borderTopWidth,10)||0:0,h=a.body.parentNode,m=h.offsetLeft,p=h.offsetTop,n=b,h=g+e+m,r=f+c+p;if(void 0!==n.offsetParent){do h+=n.offsetLeft,r+=n.offsetTop;while(n=n.offsetParent)}h+=g+e+m;r+=f+c+p;b=d.getAnmProps(b);b.offset_left=h||b.usr_x;b.offset_top=r||b.usr_y};d.setWrapperSize=function(a,b,c){b|=0;c|=0;var f=d.getAnmProps(a);f.width=b;f.height=c;a.style.width=b+"px";a.style.height=
c+"px";return[b,c]};d.addCanvasOverlay=function(b,c,g,e){var h=d.getAnmProps(c),m=h.wrapper||c.parentNode||a.body,p=g[0],n=g[1],r=g[2],v=g[3];g=d.getCanvasSize(c);var w=g[0],x=g[1],t=f.getComputedStyle?f.getComputedStyle(c):c.currentStyle;g=parseFloat(t.getPropertyValue("border-left-width"));t=parseFloat(t.getPropertyValue("border-top-width"));r*=w;v*=x;w=a.createElement("canvas");w.id=h.id?"__"+h.id+"_"+b:"__anm_"+b;b=d.getAnmProps(w);e&&e(w,c);d.setCanvasSize(w,r,v);d.moveElementTo(w,p*r+g,n*v-
t);(m||a.body).insertBefore(w,c.nextSibling);b.ref_canvas=c;h.overlays||(h.overlays=[]);h.overlays.push(w);return w};d.updateCanvasOverlays=function(a){var b=d.getAnmProps(a),c=b.overlays;if(c)for(var f=0,e=c.length;f<e;f++)d.updateOverlay(a,c[f],b)};d.updateOverlay=function(a,b,c){c=c||d.getAnmProps(a);d.setCanvasSize(b,c.width,c.height)};d.registerAsControlsElement=function(a,b){d.injectElementStyles(a,d.CONTROLS_CLASS,d.CONTROLS_INSTANCE_CLASS_PREFIX+(b.id||"no-id"))};d.registerAsInfoElement=function(a,
b){d.injectElementStyles(a,d.INFO_CLASS,d.INFO_INSTANCE_CLASS_PREFIX+(b.id||"no-id"))};d.getEventPosition=function(a,b){if(b){var c=d.findElementPosition(b);return{x:a.clientX-c[0],y:a.clientY-c[1]}}return{x:a.x,y:a.y}};d.subscribeElementEvents=function(a,b){for(var c in b)a.addEventListener(c,b[c],!1)};d.unsubscribeElementEvents=function(a,b){for(var c in b)a.removeEventListener(c,b[c],!1)};d.subscribeWindowEvents=function(a){d.subscribeElementEvents(f,a)};d.subscribeCanvasEvents=d.subscribeElementEvents;
d.unsubscribeCanvasEvents=d.unsubscribeElementEvents;d.keyEvent=function(a){return{key:null!==a.keyCode?a.keyCode:a.which,ch:a.charCode}};d.mouseEvent=function(a,b){return{pos:d.getEventPosition(a,b)}};d.preventDefault=function(a){a.stopPropagation();a.preventDefault()};var z=d.keyEvent,x=d.mouseEvent;d.subscribeAnimationToEvents=function(a,b,c){if(!a.__anm.subscribed||!a.__anm.subscribed[b.id]){a.__anm.handlers||(a.__anm.handlers={});a.__anm.subscribed||(a.__anm.subscribed={});var f=a.__anm.subscribed[b.id]||
{click:function(d){b.fire(c.click,x(d,a))},dblclick:function(d){b.fire(c.dblclick,x(d,a))},mouseup:function(d){b.fire(c.mouseup,x(d,a))},mousedown:function(d){b.fire(c.mousedown,x(d,a))},mousemove:function(d){b.fire(c.mousemove,x(d,a))},keypress:function(a){b.fire(c.keypress,z(a))},keyup:function(a){b.fire(c.keyup,z(a))},keydown:function(a){b.fire(c.keydown,z(a))}};a.__anm.handlers[b.id]=f;a.__anm.subscribed[b.id]=!0;d.subscribeCanvasEvents(a,f)}};d.unsubscribeAnimationFromEvents=function(a,b){if(a.__anm.handlers&&
a.__anm.subscribed&&a.__anm.subscribed[b.id]){var c=a.__anm.handlers[b.id];c&&d.unsubscribeCanvasEvents(a,c)}};d.subscribeWrapperToStateChanges=function(a,b){if(a.classList){var c=anm.constants;b.on(c.S_CHANGE_STATE,function(d){var f=[];switch(d){case c.NOTHING:f=["anm-state-nothing"];break;case c.STOPPED:f=["anm-state-stopped"];break;case c.PLAYING:f=["anm-state-playing"];break;case c.PAUSED:f=["anm-state-paused"];break;case c.LOADING:f=["anm-state-loading"];break;case c.RES_LOADING:f=["anm-state-loading",
"anm-state-resources-loading"];break;case c.ERROR:f=["anm-state-error"]}if(f.length){d=a.classList;var e,h;if(b.__prev_classes&&b.__prev_classes.length){var m=b.__prev_classes;e=0;for(h=m.length;e<h;e++)d.remove(m[e])}else d.contains("anm-state-nothing")&&d.remove("anm-state-nothing");e=0;for(h=f.length;e<h;e++)d.add(f[e]);b.__prev_classes=f}})}};d.createStatImg=function(){var b=a.createElement("img");b.style.position="absolute";b.style.top="-9999px";b.style.left="-9999px";b.style.visibility="hidden";
a.body.appendChild(b);return b};d.getWebfontStyleObject=function(){var b=document.getElementById("anm-webfonts");if(b)return b;b=a.createElement("style");b.type="text/css";b.id="anm-webfonts";b.innerHTML="";document.body.appendChild(b);return b};d.createAudio=function(){return a.createElement("audio")};d.createVideo=function(){return a.createElement("video")};d.createSource=function(){return a.createElement("source")};d.appendToBody=function(b){a.body.appendChild(b)};m=a.createElement?a.createElement("canvas"):
{};d.canvasSupported=!(!m.getContext||!m.getContext("2d"));d.isHttps=f.location&&"https:"===f.location.protocol;var t=f.location&&"file:"===f.location.protocol;d.isLocal=t;d.fixLocalUrl=function(a){t&&"//"===a.substring(0,2)&&(a="http:"+a);return a};m=(new Function("/*@cc_on return @_jscript_version; @*/"))();d.isIE9=9==m;d.isIE10=10==m;var B,p;"undefined"!==typeof a.hidden?(B="hidden",p="visibilitychange"):"undefined"!==typeof a.mozHidden?(B="mozHidden",p="mozvisibilitychange"):"undefined"!==typeof a.msHidden?
(B="msHidden",p="msvisibilitychange"):"undefined"!==typeof a.webkitHidden&&(B="webkitHidden",p="webkitvisibilitychange");"undefined"===typeof a[B]&&"undefined"===typeof a.addEventListener||a.addEventListener(p,function(){A&&A(a[B])},!1);var A=null;d.onDocumentHiddenChange=function(a){A=a};d.Path2D=e.Path2D;d.isInIframe=function(){return e.self!==e.top};var C=d.isInIframe()?b:null,E=C?C.document.referrer.split("/",3).join("/"):"*";d.getIframeOrigin=function(){return E};d.getIframeSrc=function(){return C?
C.location.href:null};d.addMessageListener=function(a){e.addEventListener&&e.addEventListener("message",a,!1)};d.postToContentWindow=function(a){C&&C.top.postMessage(JSON.stringify(a),E||"*")};return y.exports=d}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../../res/player.css":2}],41:[function(c,y,v){(function(b){var f=c("./anm/constants.js"),a=c("engine"),e=c("./anm/player.js");a.onDocReady(function(){for(var b=a.findPotentialPlayers(),
c=0,d=b.length;c<d;c++)v.createPlayer(b[c])});var d=c("./anm/animation/element.js"),n=c("./anm/graphics/sheet.js"),h=c("./anm/graphics/segments.js"),v={global:b,constants:f,C:f,loc:c("./anm/loc.js"),errors:c("./anm/errors.js"),utils:c("./anm/utils.js"),conf:c("./anm/conf.js"),log:c("./anm/log.js"),modules:c("./anm/modules.js"),importers:c("./anm/importers.js"),engine:a,events:c("./anm/events.js"),resource_manager:c("./anm/resource_manager.js"),player_manager:c("./anm/player_manager.js"),Player:e,
Animation:c("./anm/animation/animation.js"),Element:d,Clip:d,Modifier:c("./anm/animation/modifier.js"),Tween:c("./anm/animation/tween.js"),Painter:c("./anm/animation/painter.js"),Brush:c("./anm/graphics/brush.js"),Color:c("./anm/graphics/color.js"),Path:c("./anm/graphics/path.js"),MSeg:h.MSeg,LSeg:h.LSeg,CSeg:h.CSeg,Text:c("./anm/graphics/text.js"),Sheet:n,Image:n,shapes:c("./anm/graphics/shapes.js"),Audio:c("./anm/media/audio.js"),Video:c("./anm/media/video.js"),interop:{playerjs:c("./anm/interop/playerjs-io.js")},
createPlayer:function(b,c){if(!a.canvasSupported)return document.getElementById(b).innerHTML=v.loc.Errors.S.SAD_SMILEY_HTML,null;var d=new e;d.init(b,c);return d},createImporter:function(a){window.console&&console.warn("anm.createImporter is deprecated and will be removed soon. Please use anm.importers.create instead");return v.importers.create(a)}};b.anm=v;y.exports=v}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./anm/animation/animation.js":3,
"./anm/animation/element.js":6,"./anm/animation/modifier.js":7,"./anm/animation/painter.js":8,"./anm/animation/tween.js":10,"./anm/conf.js":11,"./anm/constants.js":12,"./anm/errors.js":13,"./anm/events.js":14,"./anm/graphics/brush.js":17,"./anm/graphics/color.js":18,"./anm/graphics/path.js":19,"./anm/graphics/segments.js":20,"./anm/graphics/shapes.js":21,"./anm/graphics/sheet.js":22,"./anm/graphics/text.js":23,"./anm/importers.js":24,"./anm/interop/playerjs-io.js":25,"./anm/loc.js":27,"./anm/log.js":28,
"./anm/media/audio.js":29,"./anm/media/video.js":30,"./anm/modules.js":31,"./anm/player.js":32,"./anm/player_manager.js":33,"./anm/resource_manager.js":35,"./anm/utils.js":39,engine:40}],42:[function(c,y,v){"undefined"!==typeof y&&(y.exports=function(){var b=["monospace","sans-serif","serif"],c=document.getElementsByTagName("body")[0],a=document.createElement("span");a.style.fontSize="72px";a.style.position="absolute";a.style.top="-9999px";a.style.left="-9999px";a.innerHTML="mmmmmmmmmmlli";var e=
{},d={},n;for(n in b)a.style.fontFamily=b[n],c.appendChild(a),e[b[n]]=a.offsetWidth,d[b[n]]=a.offsetHeight,c.removeChild(a);this.detect=function(h){var n=!1,m;for(m in b){a.style.fontFamily=h.face+","+b[m];a.style.fontStyle=h.style;a.style.fontWeight=h.weight;c.appendChild(a);var r=a.offsetWidth!=e[b[m]]||a.offsetHeight!=d[b[m]];c.removeChild(a);n=n||r}return n}})},{}],43:[function(c,y,v){function b(){this.m=[1,0,0,1,0,0]}b.prototype.reset=function(){this.m=[1,0,0,1,0,0]};b.prototype.multiply=function(b){var a=
this.m[1]*b.m[0]+this.m[3]*b.m[1],c=this.m[0]*b.m[2]+this.m[2]*b.m[3],d=this.m[1]*b.m[2]+this.m[3]*b.m[3],n=this.m[0]*b.m[4]+this.m[2]*b.m[5]+this.m[4],h=this.m[1]*b.m[4]+this.m[3]*b.m[5]+this.m[5];this.m[0]=this.m[0]*b.m[0]+this.m[2]*b.m[1];this.m[1]=a;this.m[2]=c;this.m[3]=d;this.m[4]=n;this.m[5]=h};b.prototype.invert=function(){var b=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),a=-this.m[1]*b,c=-this.m[2]*b,d=this.m[0]*b,n=b*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),h=b*(this.m[1]*this.m[4]-this.m[0]*
this.m[5]);this.m[0]=this.m[3]*b;this.m[1]=a;this.m[2]=c;this.m[3]=d;this.m[4]=n;this.m[5]=h};b.prototype.rotate=function(b){var a=Math.cos(b);b=Math.sin(b);var c=this.m[1]*a+this.m[3]*b,d=this.m[0]*-b+this.m[2]*a,n=this.m[1]*-b+this.m[3]*a;this.m[0]=this.m[0]*a+this.m[2]*b;this.m[1]=c;this.m[2]=d;this.m[3]=n};b.prototype.rotateDegrees=function(b){var a=b*Math.PI/180;b=Math.cos(a);var a=Math.sin(a),c=this.m[1]*b+this.m[3]*a,d=this.m[0]*-a+this.m[2]*b,n=this.m[1]*-a+this.m[3]*b;this.m[0]=this.m[0]*
b+this.m[2]*a;this.m[1]=c;this.m[2]=d;this.m[3]=n};b.prototype.translate=function(b,a){this.m[4]+=this.m[0]*b+this.m[2]*a;this.m[5]+=this.m[1]*b+this.m[3]*a};b.prototype.scale=function(b,a){this.m[0]*=b;this.m[1]*=b;this.m[2]*=a;this.m[3]*=a};b.prototype.transformPoint=function(b,a){return{x:b*this.m[0]+a*this.m[2]+this.m[4],y:b*this.m[1]+a*this.m[3]+this.m[5]}};b.prototype.transformPointInverse=function(b,a){this.invert();var c=this.transformPoint(b,a);this.invert();return c};b.prototype.shear=function(b,
a){var c=this.m[1]+this.m[3]*a,d=this.m[0]*b+this.m[2],n=this.m[1]*b+this.m[3];this.m[0]+=this.m[2]*a;this.m[1]=c;this.m[2]=d;this.m[3]=n};b.prototype.apply=function(b){var a=this.m;b.transform(a[0],a[1],a[2],a[3],a[4],a[5])};b.prototype.clone=function(){var c=new b;c.m[0]=this.m[0];c.m[1]=this.m[1];c.m[2]=this.m[2];c.m[3]=this.m[3];c.m[4]=this.m[4];c.m[5]=this.m[5];return c};b.prototype.inverted=function(){var b=this.clone();b.invert();return b};"undefined"!==typeof y&&(y.exports=b)},{}]},{},[41]);
var AnimatronImporter=function(){function c(a){B.error(a)}function y(a){this.buf=a;this.bitsBuf=this.bitPos=this.pos=0}function v(){}function b(){this.hash2val={}}function f(){}var a=anm.constants,e=anm.Animation,d=anm.Element,n=anm.Path,h=anm.Text,w=anm.Brush,m=anm.Tween,r=anm.Audio,z=anm.Video,x=anm.utils.is,t=anm.utils.roundTo,B=anm.log,p={},A;p._find=function(a,b){b[a]||c("Element with index "+a+" was not found"+(b?" among "+b.length+" elements.":"."));return b[a]};p._type=function(a){return a[0]};
p.project=function(a){anm.conf.logImport&&B.debug(a);A=anm.utils.guid();anm.lastImportedProject=a;anm.lastImportId=A;var d=a.anim.scenes;d.length||c("No scenes found in given project");var f=new e,h=a.anim.elements,m=[0,0];f.__import_id=A;f.meta=p.meta(a);f.fonts=p.fonts(a);p.root=f;p.anim(a,f);a.meta.duration&&(f.duration=a.meta.duration);p._paths=a.anim.paths;p._path_cache=new b;var n;a=function(a){var b=a.gband;a.gband=[m[1]+b[0],m[1]+b[1]]};for(var r=0,u=d.length;r<u;r++){n=p._find(d[r],h);p._type(n)!=
C&&c("Given Scene ID "+d[r]+" points to something else");n=p.node(n,null,h,null,f);if(0<r){var v=n.gband;n.gband=[m[1]+v[0],m[1]+v[1]];n.lband=n.gband;n.traverse(a)}m=n.gband;f.add(n)}0<d.length&&(n.gband=[m[0],Infinity],n.lband=n.gband);p._paths=void 0;p._path_cache=void 0;return f};p.meta=function(a){a=a.meta;return{title:a.name,author:a.author,copyright:a.copyright,version:a.version,description:a.description,duration:a.duration,created:a.created,modified:a.modified,_anm_id:a.id}};p.fonts=function(a){return a.anim.fonts};
p.anim=function(a,b){var c=a.anim;b.fps=c.framerate;b.width=c.dimension?Math.floor(c.dimension[0]):void 0;b.height=c.dimension?Math.floor(c.dimension[1]):void 0;b.bgfill=c.background?p.fill(c.background):void 0;b.zoom=c.zoom||1;b.speed=c.speed||1;!c.loop||!0!==c.loop&&"true"!==c.loop||(b.repeat=!0)};var C=2;p.node=function(a,b,c,d,e){var f=p._type(a),h=null;1==f||f==C||9==f?h=p.branch(f,a,b,c,e):0!=f&&(h=p.leaf(f,a,b,d,e));h&&(h._anm_type=f,p.callCustom(h,a,f));return h};L_VISIBLE=4;p.branch=function(b,
e,f,h,n){var r=new d;r.name=e[1];var u=b==C?e[3]:e[2],v=[];b===C?(r.gband=[0,e[2]],r.lband=[0,e[2]]):(r.gband=[0,Infinity],r.lband=[0,Infinity]);for(e=u.length;e--;){var w=u[e],t=p._find(w[0],h);if(t&&(t=p.node(t,w,h,r,n))){t.name=w[1];var x=w[6];t.disabled=!(x&L_VISIBLE);var y=9===b&&f&&f[2]?f[2]:[0,0],z=p.band(w[2]);t.lband=[z[0]-y[0],z[1]-y[0]];t.gband=z;t.$pivot=[0,0];t.$reg=w[4]||[0,0];if(w[7]){for(var y=0,z=Infinity,A=0,B=w[7],E=0,I=B.length;E<I;E++){var G=p.tween(B[E]);G&&(x&1&&G.tween_type===
a.T_ROTATE&&(z=Math.min(z,G.$band[0]),A=Math.max(A,G.$band[1]),y++),t.tween(G))}x&1&&(y?(0<z&&Infinity>z&&t.tween(m.rotate().start(0).stop(z).from(0).to(0)),0<A&&Infinity>A&&t.tween(m.rotate().start(A).stop(t.lband[1]-t.lband[0]).from(0).to(0))):t.tween(m.rotate().start(0).stop(Infinity).from(0).to(0)),t.tween(m.rotatetopath().start(0).stop(Infinity)))}w[5]?(t.mode=p.mode(w[5][0]),1<w[5].length&&(t.nrep=w[5][1]||Infinity)):t.mode=p.mode(null);1===t._anm_type&&t.mode!==a.R_ONCE&&(t.asClip([0,t.lband[1]-
t.lband[0]],t.mode,t.nrep),t.lband=[t.lband[0],Infinity],t.gband=[t.gband[0],Infinity],t.mode=a.R_STAY,t.nrep=Infinity);if(w[3])for(x=t,y=w[3],z=v.length,y>z&&(c("No layers collected to apply mask, expected "+y+", got "+z),y=z);y;)v[z-y].mask(x),y--;else r.add(t),v.push(t);p.callCustom(t,w,255);t.$audio&&t.$audio.master&&(t.lband=[t.lband[0],Infinity],t.gband=[t.gband[0],Infinity],r.remove(t),n.add(t))}}return r};p.leaf=function(b,c,e,f,h){e=new d;if(!c[1]&&(8===b||14===b||26===b))return null;8==
b?e.$image=p.sheet(c):4==b?e.$text=p.text(c):14==b?(e.type=a.ET_AUDIO,e.$audio=p.audio(c),e.$audio.connect(e,h)):26==b?(e.type=a.ET_VIDEO,e.$video=p.video(c),e.$video.connect(e,h)):e.$path=p.path(c);if(e.$path||e.$text)e.$fill=p.fill(c[1]),e.$stroke=p.stroke(c[2]),e.$shadow=p.shadow(c[3]);return e};p.callCustom=function(a,b,c){if(d._customImporters&&d._customImporters.length)for(var e=d._customImporters,f=0,h=e.length;f<h;f++)e[f].call(a,b,c,"ANM",A)};p.band=function(a){if(!a||!a.length)return[0,
Infinity];if(1==a.length)return[a[0],Infinity];if(2==a.length)return a;c("Unknown format of band: "+a)};p.path=function(a){if(a=p._pathDecode(a[4]))return new n(a)};p._pathDecode=function(a){if(x.str(a))return a;if(!x.num(a)||-1==a)return null;if(a=p._paths[a]){var b=p._path_cache.get(a);if(!b){b=p._decodeBinaryPath(a);if(!b)return null;p._path_cache.put(a,b)}return b}};p._decodeBinaryPath=function(a){var b="";if(a){a=a.replace(/\s/g,"");try{var d=v.decode(a),e=new y(d),d=[0,0];if(e)for(var f=!0;f;){var h;
switch(e.readBits(2)){case 0:d=h=p._pathReadPoint(e,d);b+=" M "+h.join(",");break;case 1:d=h=p._pathReadPoint(e,d);b+=" L "+h.join(",");break;case 2:var m=" C";h=d;for(var n=0;3>n;n++)h=p._pathReadPoint(e,h),m+=" "+h.join(",");d=h;b+=m;break;default:f=!1}}else return c('Unable to decode Path "'+a+'"'),null}catch(r){return c('Unable to decode Path "'+a+'"'),null}}return b};p._pathReadPoint=function(a,b){b=b||[0,0];var c=a.readBits(5);if(0>=c)throw Error("Failed to decode path, wrong length (<= 0)");
var d=a.readSBits(c),c=a.readSBits(c);return[t(b[0]+d/1E3,2),t(b[1]+c/1E3,2)]};p.text=function(a){var b=x.arr(a[6])?a:a[6].split("\n");return new h(1<b.length?b:b[0],a[4],a[5],a[7]&2?"middle":"bottom",a[7]&1?!0:!1)};p.sheet=function(a){var b=new anm.Sheet(a[1]);a[2]&&(b._dimen=a[2]);return b};p.tween=function(a){var b=p.tweentype(a[0]);if(!b)return null;b=m[b](p.tweendata(b,a[3])).band(p.band(a[1]));(a=p.easing(a[2]))&&b.easing(a);return b};p.tweentype=function(b){if(0===b)return a.T_ALPHA;if(1===
b)return a.T_ROTATE;if(2===b)return a.T_SCALE;if(3===b)return a.T_SHEAR;if(4===b)return a.T_TRANSLATE;if(7===b)return a.T_VOLUME;if(9===b)return a.T_FILL;if(10===b)return a.T_STROKE;if(11===b)return a.T_SHADOW;if(12===b)return a.T_SWITCH};p.tweendata=function(b,c){if(null===c)return null;if(b===a.T_TRANSLATE)return p.pathval(c);if(b===a.T_ROTATE||b===a.T_ALPHA){if(2==c.length)return c;if(1==c.length)return[c[0],c[0]]}if(b===a.T_SCALE||b===a.T_SHEAR){if(4==c.length)return[[c[0],c[1]],[c[2],c[3]]];
if(2==c.length)return[[c[0],c[1]],[c[0],c[1]]];if(1==c.length)return[[c[0],c[0]],[c[0],c[0]]]}if(b===a.T_FILL)return[p.fill(c[0]),p.fill(c[1])];if(b===a.T_STROKE)return[p.stroke(c[0]),p.stroke(c[1])];if(b===a.T_SHADOW)return[p.shadow(c[0]),p.shadow(c[1])];if(b===a.T_VOLUME){if(2==c.length)return c;if(1==c.length)return[c[0],c[0]]}if(b===a.T_SWITCH)return c};p.easing=function(b){if(!b)return null;if(x.str(b))return{type:a.E_PATH,data:p.pathval("M0 0 "+b+" Z")};if(x.num(b))return{type:a.E_STDF,data:b}};
p.mode=function(b){if(!b||0===b)return a.R_ONCE;if(1===b)return a.R_LOOP;if(2===b)return a.R_BOUNCE;if(3===b)return a.R_STAY};p.fill=function(a){if(!a)return w.fill("transparent");if(x.str(a))return w.fill(a);if(x.arr(a))return x.arr(a[0])?w.fill(p.grad(a)):w.fill(p.pattern(a));c("Unknown type of brush")};p.stroke=function(b){if(!b)return null;var c;x.str(b[1])?c=b[1]:x.arr(b[1])&&(c=x.arr(b[1][0])?p.grad(b[1]):p.pattern(b[1]));return w.stroke(c,b[0],b[2]||a.PC_ROUND,b[3]||a.PC_ROUND,b[4])};p.shadow=
function(a){return a?w.shadow(a[3],a[2],a[0],a[1]):null};p.grad=function(a){var b=a[0],d=a[1];a=a[2];d.length!=a.length&&c("Number of colors do not corresponds to number of offsets in gradient");for(var e=[],f=0;f<a.length;f++)e.push([a[f],d[f]]);if(4==b.length)return{dir:[[b[0],b[1]],[b[2],b[3]]],stops:e};if(6==b.length)return{r:[b[2],b[5]],dir:[[b[0],b[1]],[b[3],b[4]]],stops:e};c("Unknown type of gradient with "+b.length+" points")};var E=["no-repeat","repeat","repeat-x","repeat-y"];p.pattern=function(a){var b=
anm.lastImportedProject.anim.elements[a[0]];if(b=p.leaf(p._type(b),b))return b.alpha=a[5],b.disabled=!0,p.root.add(b),{elm:b,repeat:E[a[1]],w:a[2],h:a[3],bounds:a[4]}};p.pathval=function(a){return new n(p._pathDecode(a))};p.audio=function(a){var b=new r(a[1]);b.offset=a[2];b.master=a[3];return b};p.video=function(a){var b=new z(a[1]);b.offset=a[2];return b};y.prototype.readBits=function(a){for(var b=0;;){var c=a-this.bitPos;if(0<c)b|=this.bitBuf<<c,a-=this.bitPos,this.bitBuf=this.readUByte(),this.bitPos=
8;else return c=-c,b|=this.bitBuf>>c,this.bitPos=c,this.bitBuf&=(1<<c)-1,b}};y.prototype.readUByte=function(){return this.buf[this.pos++]&255};y.prototype.readSBits=function(a){var b=this.readBits(a);0!==(b&1<<a-1)&&(b|=-1<<a);return b};v.decode=function(a){return v.str2ab(v._decode(a))};var u=window.Int8Array||Array;v.str2ab=function(a){for(var b=new u(a.length),c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b};v._decode=function(a){if(window.atob)return atob(a);var b,c,d,e,f,h=0,m=0;e="";var n=
[];if(!a)return a;a+="";do b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),d=b<<18|c<<12|e<<6|f,b=d>>16&255,c=d>>8&255,d&=255,64==e?n[m++]=String.fromCharCode(b):64==f?n[m++]=String.fromCharCode(b,
c):n[m++]=String.fromCharCode(b,c,d);while(h<a.length);return e=n.join("")};b.prototype.put=function(a,b){this.hash2val[this.hash(a)]=b};b.prototype.get=function(a){return this.hash2val[this.hash(a)]};b.prototype.hash=function(a){var b=0,c,d;if(0===a.length)return b;c=0;for(l=a.length;c<l;c++)d=a.charCodeAt(c),b=(b<<5)-b+d,b|=0;return b};f.prototype.load=p.project;f.Import=p;f.IMPORTER_ID="ANM";return f}();anm.importers.register("animatron",AnimatronImporter);

var star1={"meta":{"id":"5821b654103e388048d1c5db","created":1421222232582,"modified":1421402474983,"author":"Vakansi Visual","description":"","name":"Star System 1","copyright":"Copyright (c) by Vakansi Visual","duration":.9,"numberOfScenes":1,"projectAccess":{"visibility":"PUBLIC","writeAccess":[],"readAccess":["PUBLIC"]},"authorUsername":"Mika"},"anim":{"dimension":[550,450],"framerate":24,"loop":false,"background":"#ffffff","paths":["JInwJdcL1ZWN7l4AAnHS9HfAABeAAGOWvVlfISXE2z2Cvp/42MXnLVSOrpY9LNX41qySr8TMm210sfaZrznbW419P+5Oi4m5\nhPEIBMA=",
"Jqh1CodVEAAC6Eo2kpS2vGi9wAAKNF7gAARtJTaSmIAAKL3UQAAUXuilte0lMV0JAAAoroSAABFLa6W14gAAXQkhAJg=","JInwJdcL1ZWN7l4AAnHC9HfAABeAAGOWvVlfISXE2z2Gvp/42JXnLVSOrpY9LNX41qySr8TMm210sfaZrznbW419P+5O64m5\nhOkIBMA=","Ip+wSbrMAAbAZUOryyUAACZKAAAyoeodgAEoEwACUBivNQ7GwAAJjYAADFeVeWAANgIQCYA=","IqywbDjOAAFBF194ghur7wACdX3gADr7y+8cAAV984AAr73IIl945QRAAJygiAAOQREERwAAoIoQCYA=","IvjoWPxOAAFBF194giOr7wACdX3gADr7y+8cAAV984AAr73IIl945QRAAJygiAAOQREERwAAoIoQCYA=","Iu6lLIxOAAFBF194giOr7wACdX3gADr7y+8cAAV984AAr73IIl945QRAAJygiAAOQREERwAAoIoQCYA=",
"IpX4JztOAAFBF194giOr7wACdX3gADr7y+8cAAV984AAr7nIIl925QRAAJygiAAOQREERwAAoJIQCYA=","Im7jTeROAAFBF194giOr7wACdX3AADr7u+8cAAV984AAr73IIl945QSAAJygiAAOQQ0ERwAAoIoQCYA=","JJN2Em60AAAUXCF7+IQLCukAAAoV0gAAEL37vfyAAAV0hQAACukIIQLe/cFFwAACgouAAAQQgRCBYAAAouCEAmA=","KIYIh9u4ztsIYrQM","Iqj4cBOvqfgAAmUBgAMsmTbYAAv7MAAX9Ym0m2xf0ABerBAABMX9AAYm3ZKwACgOYABQGyyWyVlAYACEAmA=","IsaROlYtnvAAII8JPLH19SqAAE+pVAAB4SdpwQRbNKAAQR/j4Z/L2oADUl4AATcUsAC3lpSSqtbwAJa3gALSratYAKRLwABZ\nJ57WF+fT/DDLsgiEAmA=","IpN2StxNeoAAGsa5yrQAELBeAAKWlNAAQsGzlZyrYWAACbCzAANnLMa2gAHqC8AALS+aAAeoNY1MaGvUAACEAmA=",
"JJN1km7UAAAUXCF7+IQHCukAAAoV0gAAEL38vfyAAAV0hQAACukIIQJe/kFFwAACgouAAAQQgRCBIAAAouCEAmA=","KIYIh+tYzTCwYrQM","KIZHB/cQhMA=","BYhM","AiEw","KIYn5/UchMA=","KHf0Kyd4hMA=","KIZHDDzQhMA=","JMNQGWQITA==","KIZHB/cQzqo0XZOM","JMNQOpgITA==","FwY/+hM=","JsLTGBviEw==","KNu6AdTAhMA=","KIZHB/cQzVXMXZOM","KNu6A6mAhMA=","KKwehhaYhMA="],"fonts":[{"face":"Lato-Light","url":"http://uploads.animatron.com/ec4a36540de2c474b0a4643b.ttf","style":"normal","weight":200,"woff":"http://uploads.animatron.com/f24a3654c061e143f4334901.woff"},
{"face":"Lato-Bold","url":"http://uploads.animatron.com/cf4a36549a68d27290f2736e.ttf","style":"normal","weight":700,"woff":"http://uploads.animatron.com/d34a36547863794c929e2f98.woff"}],"elements":[[2,"$$$LIBRARY$$$",10,[],{}],[2,"Scene1",.9,[[2,"Star Color","","",[-.249,-.249],"",4,[[0,[0,.9],8,[1,0]],[0,[.9],"",[0]],[4,[],"",16]],{}],[5,"Star","","",[-.249,-.249],"",4,[[4,[],"",19]],{}],[8,"BASIC VIDEO","","",[71.165,11.5],"",4,[[4,[],"",20]],{}],[9,"for bootstrap startups","","",[95,12],"",4,[[4,
[],"",21]],{}],[10,"video/event\ndocumentation","","",[65,24],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[0,.8],8,22],[4,[.8],"",22]],{}],[11,"1","","",[.251,.251],"",4,[[4,[0,.8],8,23],[4,[.8],"",24]],{}],[20,"Line 1","","",[199.5,197.5],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",26]],{}],[21,"voice over",[.1],"",[44,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",27]],{}],[22,"2",[.1],"",[.252,.252],"",4,[[4,[0,.8],8,28],[4,[.8],"",29]],{}],[28,"Line 2",[.1],"",[352.5,199.5],"",4,
[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",30]],{}]],{}],[1,"",[[3,"Bezier1","","",[86.25,86.25],"",4,[[4,[],"",17]],{}],[4,"Bezier2","","",[86.251,86.25],"",4,[[4,[],"",18]],{}]]],[3,"#ffffff","","",0],[3,"#36a3db","","",1],[1,"",[[6,"Bezier1","","",[86.25,86.25],"",4,[[4,[],"",17]],{}],[7,"Bezier2","","",[86.251,86.25],"",4,[[4,[],"",18]],{}]]],[3,"#ffffff","","",2],[3,"#333333","","",1],[4,"#000000","","","bold 30px Lato-Bold","center","BASIC VIDEOS",2],[4,"#000000","","","20px Lato-Light","center",
"for bootstrap startups",2],[4,"#969696","","","20px Lato-Light","center","video or event\ndocumentation",2],[1,"",[[12,"Bezier1","","",[37.75,37.749],"",4,[[4,[],"",17]],{}],[13,"Composite1","","",[36.751,37.748],"",4,[[4,[],"",25]],{}],[19,"Bezier2","","",[37.751,37.749],"",4,[[4,[],"",18]],{}]]],[3,"#ffffff","","",3],[1,"",[[14,"Bezier1","","","","",4,[],{}],[15,"Bezier2","","","","",4,[],{}],[16,"Bezier3","","","","",4,[],{}],[17,"Bezier4","","","","",4,[],{}],[18,"Bezier5","","","","",4,[],{}]]],
[3,"#ffffff","","",4],[3,"#ffffff","","",5],[3,"#ffffff","","",6],[3,"#ffffff","","",7],[3,"#ffffff","","",8],[3,"#37a2db","","",9],[3,"",[2,"#9e9e9e","","",-1],"",10],[4,"#969696","","","20px Lato-Light","center","voice over",2],[1,"",[[23,"Composite1","","",[37.75,37.749],"",4,[[4,[],"",17]],{}],[27,"Bezier1","","",[37.751,37.75],"",4,[[4,[],"",18]],{}]]],[1,"",[[24,"Bezier1","","","","",4,[],{}],[25,"Bezier2","","","","",4,[],{}],[26,"Bezier3","","","","",4,[],{}]]],[3,"#ffffff","","",11],[3,"#ffffff",
"","",12],[3,"#ffffff","","",13],[3,"#37a2db","","",14],[3,"",[2,"#9e9e9e","","",-1],"",15]],"scenes":[1]}};
var star2={"meta":{"id":"8536b654a37743f7a19b6254","created":1421222230571,"modified":1421222230571,"author":"Vakansi Visual","description":"","name":"Star System 2","copyright":"Copyright (c) by Vakansi Visual","duration":1.1,"numberOfScenes":1,"projectAccess":{"visibility":"PUBLIC","writeAccess":[],"readAccess":["PUBLIC"]},"authorUsername":"Mika"},"anim":{"dimension":[550,450],"framerate":24,"loop":false,"background":"#ffffff","paths":["JLX/JdcL1ZWN7l4AAnHS9HgAABeAAGOWvVlnISXE2z2Cvp/42MXnLVSOrpY9LNX41qySr8TMm210sfaZrznbW419P/5Oi4m2\nhPEIBMA=",
"JF3fJdcL1ZSN7l4AAnHS9HfgABeAAGOWvVlfISXE2z2CvqAI2MXnLVSOrpY9LNX41aySr8TQm210shaZrznbW419P/5Oi4m3\nhPEIBMA=","Jqh1CodVEAAC6Eo2kpS2vGi9wAAKNF7gAARtJTaSmIAAKL3UQAAUXuilte0lMV0JAAAoroSAABFLa6W14gAAXQkhAJg=","IqbTHg4vUSxA/YaZskP62eNsbYCDZWE4Ew==","Ip6dUieuvL+UaCOtwyKV3CGmuTuEFNacdrK/jujRLpnIt+zI9Gh4AR/TPsByEAmA","JJN1km7UAAAUXCF7+IQHCukAAAoV0gAAEL38vfyAAAV0hQAACukIIQJe/kFFwAACgouAAAQQgRCBIAAAouCEAmA=","KIYIiALIzqRYclQM","Ip+wSbrMAAbAZUOryyUAACZKAAAyoeodgAEoEwACUBivNQ7GwAAJjYAADFeVeWAANgIQCYA=","IqyxbDlOAAFBN194ghur7QACdX3gADr7y+8cAAV9s4AAr7XIIl945QRAAJygmAAOQREERwAAoJoQCYA=",
"IvjnWPxOAAFBF194giOr7wACdX3gADr7y+8cAAV984AAr73IIl945QRAAJygiAAOQREERwAAoIoQCYA=","Iu6kLIzOAAFBJ19+giOr7AACdX4AADr7y+8cAAV984AAr73IIl945QQAAJygoAAOQQUERwAAoIoQCYA=","IpX4JzzOAAFBF194giOr7wACdX3gADr7y+8cAAV984AAr7nIIl925QRAAJygiAAOQREERwAAoJIQCYA=","Im7jTeTOAAFBF194giOr7wACdX3AADr7u+8cAAV984AAr73IIl945QSAAJygiAAOQQ0ERwAAoIoQCYA=","JJN1Em7UAAAUW+F7+IQJCukQAAoV0iAAEL38vfyAAAV0jQAACukYIQJe/kFFvAACgot4AAQQgRCBIAAAot6EAmA=","KIaFh/r4z1YUWmcM","IpN2AADQro4AAIXv4hAsAAAUW+gAACi4QQgRCBIKLkAAFBRcAAAghAd7+QAACukKAAAV0jC9/L37hXSAAAIQiKL1mIMyWgfd\nk437jJqs9JkBOFzeuliFi1cNs0x1ezapM5gtTfB7ZarhEJL0ZWAC8UwACmhgA1NDAAKaJoACPU0ABHqb/+j1SwARoTGa0uOI\n1Zcohkrk+MFcnBTTbJgdttkwOo2ySHElyVE8uRIW1ySExKjoT1SMR67siKmgAFdzQBypBv+9UfO/6ECh3+AgUO/9ECmb/4TM\nMq6UGZFab1MmvMAZLGEEyY/YybUS3qt6nWjGmkbh80v7feaj37MtTyhHpLECqV2cFKuPsoWKZUTdbqACt5wAHE8O/7onlwAJ\nE8zAAadDtU7FdvNpjcXgTG0+mWNvdxTGaO9GM4+VsZq70mOz9kMdf6XY7P2FLcN2hbkvRLcZ3yWgD2iXCwV/0QfL/intYFU+\nrAAnueABUFE8AEoKR//3QUk3/6plZTC3c2tWMVQhHroczv8=",
"KIUOh/r4zK/IWuQM","INSuz465V+AAGAAAK68uqgwABgAAFRRATA==","IpArM+MwS6krrWForldewAACoogJgA==","KIf8h/MozU/wcpKM","KIZHB/cQhMA=","BYhM","AiEw","KHJAq0qghMA=","KIZHDS8AhMA=","Jkk+EbNCEw==","KIXph/kIznlgcRuM","JkiDGHHiEw==","GtASwiEw","JrUnHKAiEw==","JqrmA6mCEw==","KIZHB/cQzzywVQgM","JqrmCmBCEw==","FwYAAhM=","JuKQFoWiEw==","KLcbAOpghMA=","KIZHB/cQzMNQVQgM","KLcbApgQhMA=","KJsHhak4hMA=","KOfvBGzQhMA=","KIZHB/cQzYagcRuM","KOfvBhqAhMA=","GvngACEw","KLH6hxxQhMA="],"fonts":[{"face":"Lato-Light","url":"http://uploads.animatron.com/ec4a36540de2c474b0a4643b.ttf",
"style":"normal","weight":200,"woff":"http://uploads.animatron.com/f24a3654c061e143f4334901.woff"},{"face":"Lato-Bold","url":"http://uploads.animatron.com/cf4a36549a68d27290f2736e.ttf","style":"normal","weight":700,"woff":"http://uploads.animatron.com/d34a36547863794c929e2f98.woff"}],"elements":[[2,"$$$LIBRARY$$$",10,[],{}],[2,"Scene1",1.1,[[2,"Star Color","","",[-.249,-.249],"",4,[[0,[0,1.1],8,[1,0]],[0,[1.1],"",[0]],[4,[],"",20]],{}],[7,"Star","","",[-.249,-.249],"",4,[[4,[],"",20]],{}],[12,"PERSONALIZED/ENHANCED VID",
"","",[99.489,23],"",4,[[4,[],"",23]],{}],[13,"for bootstrap startups","","",[153,12],"",4,[[4,[],"",24]],{}],[14,"design","","",[28,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",25]],{}],[15,"1","","",[.252,.252],"",4,[[4,[0,.8],8,26],[4,[.8],"",27]],{}],[20,"Line 1","","",[185.5,234.5],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",29]],{}],[21,"video",[.1],"",[23.5,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",30]],{}],[22,"2",[.1],"",[.253,.253],"",4,[[4,[0,.8],8,31],[4,[.8],
"",32]],{}],[31,"Line 2",[.1],"",[232,184.5],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",34]],{}],[32,"personalized music",[.2],"",[82,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",35]],{}],[33,"3",[.2],"",[-.499,-.498],"",4,[[4,[0,.8],8,36],[4,[.8],"",37]],{}],[35,"Line 3",[.2],"",[317.5,185.5],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",38]],{}],[36,"motion",[.3],"",[30.5,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",39]],{}],[37,"4",[.3],"",[.252,.252],"",4,[[4,[0,.8],
8,40],[4,[.8],"",41]],{}],[42,"Line 4",[.3],"",[364.5,233],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",43]],{}]],{}],[1,"",[[3,"Composite1","","",[86.25,86.25],"",4,[[4,[],"",21]],{}],[6,"Bezier1","","",[86.251,86.25],"",4,[[4,[],"",22]],{}]]],[1,"",[[4,"Bezier1","","","","",4,[],{}],[5,"Bezier2","","","","",4,[],{}]]],[3,"#ffffff","","",0],[3,"#ffffff","","",1],[3,"#8ec541","","",2],[1,"",[[8,"Composite1","","",[86.25,86.25],"",4,[[4,[],"",21]],{}],[11,"Bezier1","","",[86.251,86.25],"",4,[[4,
[],"",22]],{}]]],[1,"",[[9,"Bezier1","","","","",4,[],{}],[10,"Bezier2","","","","",4,[],{}]]],[3,"#ffffff","","",0],[3,"#ffffff","","",1],[3,"#333333","","",2],[4,"#000000","","","bold 30px Lato-Bold","center","PERSONALIZED/\nENHANCED VIDEOS",2],[4,"#000000","","","20px Lato-Light","center","for reasonably well-funded startups",2],[4,"#969696","","","20px Lato-Light","center","design",2],[1,"",[[16,"Composite1","","",[41.08,39.163],"",4,[[4,[],"",28]],{}],[19,"Bezier1","","",[37.751,37.75],"",4,
[[4,[],"",22]],{}]]],[1,"",[[17,"Bezier1","","","","",4,[],{}],[18,"Bezier2","","","","",4,[],{}]]],[3,"#ffffff","","",3],[3,"#ffffff","","",4],[3,"#8dc541","","",5],[3,"",[2,"#9e9e9e","","",-1],"",6],[4,"#969696","","","20px Lato-Light","center","video",2],[1,"",[[23,"Bezier1","","",[37.75,37.749],"",4,[[4,[],"",22]],{}],[24,"Composite1","","",[36.75,37.75],"",4,[[4,[],"",33]],{}],[30,"Bezier2","","",[37.751,37.75],"",4,[[4,[],"",22]],{}]]],[3,"#ffffff","","",7],[1,"",[[25,"Bezier1","","","","",
4,[],{}],[26,"Bezier2","","","","",4,[],{}],[27,"Bezier3","","","","",4,[],{}],[28,"Bezier4","","","","",4,[],{}],[29,"Bezier5","","","","",4,[],{}]]],[3,"#ffffff","","",8],[3,"#ffffff","","",9],[3,"#ffffff","","",10],[3,"#ffffff","","",11],[3,"#ffffff","","",12],[3,"#8dc541","","",13],[3,"",[2,"#9e9e9e","","",-1],"",14],[4,"#969696","","","20px Lato-Light","","personalized music",2],[1,"",[[34,"Bezier1","","",[37.749,37.749],"",4,[[2,[],"",[.993]],[4,[],"",22]],{}]]],[3,"#8dc541","","",15],[3,"",
[2,"#9e9e9e","","",-1],"",16],[4,"#969696","","","20px Lato-Light","center","motion",2],[1,"",[[38,"Composite1","","",[41.75,37.75],"",4,[[4,[],"",42]],{}],[41,"Bezier1","","",[37.751,37.75],"",4,[[4,[],"",22]],{}]]],[1,"",[[39,"Bezier1","","","","",4,[],{}],[40,"Bezier2","","","","",4,[],{}]]],[3,"#ffffff","","",17],[3,"#ffffff","","",18],[3,"#8dc541","","",5],[3,"",[2,"#9e9e9e","","",-1],"",19]],"scenes":[1]}};
var star3={"meta":{"id":"7e5cb654329d34bbcc1bb0ab","created":1421222230571,"modified":1421222230571,"author":"Vakansi Visual","description":"","name":"Star System 3","copyright":"Copyright (c) by Vakansi Visual","duration":1.8,"numberOfScenes":1,"projectAccess":{"visibility":"PUBLIC","writeAccess":[],"readAccess":["PUBLIC"]},"authorUsername":"Mika"},"anim":{"dimension":[700,550],"framerate":24,"loop":false,"background":"#ffffff","paths":["JOQEJdcL1ZSN7l4AAnHS9HfAABeAAGOWvVlXISXE2r2CvqAA2MXnLhSOrpY5LNX41iySr8TMm210sfaZrznbW419P+5Oi4m5\nhPEIBMA=",
"JInvpdcL1ZWN7l4AAnHS9HgAABeAAGOWvVlnISXE2z2Cvp/42MXnLVSOrpY1LNX41qySr8TMm210sfaZrznbW419P+5Oi4m5\nhPEIBMA=","JC/bpdcL1ZWN7l4AAnHS9HegABeAAGOWvVlfISXE272Cvp/42MXnLZSOrpZBLNX41mySr8TQm210sbaZrznbW419P95Oi4m5\nhPEIBMA=","Jqh1CodVEAAC6Eo2kpS2vGi9wAAKNF7gAARtJTaSmIAAKL3UQAAUXuilte0lMV0JAAAoroSAABFLa6W14gAAXQkhAJg=","INiUnhM5Rs09nKS/v05VsGVJSQiqplWBSA31NAVNnm/9G0TQADlmdUQZsLqp3OodT95pCEAm","InmAWSbOVwTJNyrKYsuVjjHKdf5llDoNYK6ddBb/U0ABHLaAAjhtAARNkIBM","IuJDSeXO/ZWEt21+muuucz+WbOFxmNnMY1mzEcRM5XUzZHKsGdO5YLzQ0IBM",
"IkSoSZPOAp58FxJLZAuRr8D+ayHOetYsnIGs7juk6opMmXVQhjI6oGMr0IBM","IrtGJ+ROR4yIhyE6veOC3lRObPFOJNnVHHGzMzsM4AAmxHAAE6a4AAnCkIBM","Imuqa8nOrpc052cxdBO7EqKyaxoxptY0Y02s4cR84AAZP3AADFe4AAZZEIBM","JJN1km60AAAUXCF7+IQJCukAAAoV0gAAEL38vfyAAAV0hQAACukIIQJe/kFFwAACgouAAAQQgRCBIAAAouCEAmA=","KKoqitlYztcgEFuM","IpN2AADQro8AAIXv6hAkAAAUW+gAACi4QQgNCA4KLiAAFBRcAAAghAd7+QAACukKAAAV0jC9/L37hXSAAAIQiKL1mIMyWgfd\nk437jJqs9JkBOFzeuliFi1cN00x1exapM5gtTfB7ZarhEpL0ZWAC8UwACmhgA1NbAAKaJoACPU0ABHnb/+j1SwARoTGa0uOI\n1Zcohkrk+MFcnBTTbJgdttkwOk2ySHElyVE8uRIW1ySExKjoT1SMR67siKmgAFd7QBypBv+9UhO/6ECl3+AgTO/9ECmb/4TL\nMq6UGZFab1MmvMAZLGEGyY/YqbUV3sN6nWjGmkbh80v5feaj57MtTyhHpLECqV2bVKuPsoWKZUTdbqACt5wAHE8O/7onpwAJ\nE7zAAadDtU7FdPNpjcXgDG0+mmNvdxTGaO9GM4+VsZq7xmOz9kMdf6XY7P2FLcN2hbkvRLcZ3yWgD2iXCwV/0QfL/intYFU+\nrAAnueABUFE8AEoKN//3QUU3/6poZTC3c2tWMVQhHroczv8=",
"KKweiviYzkiMdEgM","Ip+wSbrMAAbAZUOryyUAACZKAAAyoeodgAEoEwACUBivNQ7GwAAJjYAADFeVeWAANgIQCYA=","IqywbDlOAAFBN194ghur7QACdX3gADr7y+8cAAV9s4AAr7XIIl945QRAAJygmAAOQREERwAAoJoQCYA=","IvjnWPxOAAFBF194giOr7wACdX3gADr7y+8cAAV984AAr73IIl945QRAAJygiAAOQREERwAAoIoQCYA=","Iu6lLIzOAAFBJ194giOr7wACdX3gADr7y+8cAAV984AAr73IIl945QRAAJygiAAOQREERwAAoIoQCYA=","IpX4JzvOAAFBJ194giOr7wACdX3gADr7y+8cAAV984AAr7nIIl945QRAAJygiAAOQREERwAAoJIQCYA=","Im7iTeVOAAFBF196giOr7wACdX3AADr7u+8cAAV984AAr73IIl945QSAAJygiAAOQQ0ERwAAoIoQCYA=",
"JJN1km7UAAAUXCF7+IQHCukAAAoV0gAAEL38vfyAAAV0hQAACukIIQJe/kFFwAACgouAAAQQgRCBIAAAouCEAmA=","KKskitGIzocMWS6M","Ip+BN4xOVLwNJyfr2LuRGTrWav9UpuGK0vh3YmgXTduLvh11edDticgj5tKQDa2kwAkbSq+zTpi/6fdbWT5DhOObBmCryHsR\ni7KYuyB5MZlBFWEl7zP1lPZ36UrTNQxI4nKygGHMeQBDY9KBUx4P0ea419RNSLV9m/7pVU3/jMnbcxpMNlCgQJsWcCS28fi9\nbann5oQCYA==","IoK+YnVNp0AAG0OAnLaSXoOdVm+nrr0+rEcDIV484G3prHI1VxA5Xl/CJqvb8G1YV/farxBdzmOcGpckfMTju0xh1mdVt1su\nlFOZRP9xMkh+rZ8nf0wH2i6cDN2Ujc5t9d1kv75TanPt9tM0Dm2qKGYm0ZQ3Tb7atxoBJU/NAJKxmoE02jV3IraY0sMMx53z\n1iyJjcxTIuRhjbVDEv15UIBM",
"KKskiviYz1n8QjuM","InVZW+su55qwpdFOERS0XiocXoIwEmAT","IlcFXpevFpqbkXOsW7ou324/dffdftoBMA==","IsoHMZMsqYGSXjYddErFaObprNniG07FKPbxDmTzeIkyRso/E82ZOO6QgEw=","ItbhXyWx7QbfX5hDhaoVLxVEkkmKURATiATA","KKqniuj4zJpMQvcM","IqLrIfYvUSxA+YaZskPq2eRscYCDZWE4Ew==","Ip6dUicuvL+UaCOtwiKV3CGmtTuEFNacdqq/zujVLpnIuOzI9Gh4AR/TPsByEAmA","KKizivDIzYqIWHMM","IpN2a+ewroEV12Arr10Evd07ukAm","InRmdLcvoNNgSX9TiFrLz4dKMl7pg1YK90wFT9efD2ucv6m70qX0GpP3L4PEAAAJgA==","KKuhitlYzau8dIaM","Iu9ZSbrNAAKB2330ELa/IACbX5AANvv332gAK/M0ABX5aghvvtUDgAJqgcAA1BCghaAAUDoQCYA=",
"IqMsSbrNAAKB2330ELa/IACbX5AANvv332gAK/M0ABX5aghvvtUDgAJqgcAA1BCghaAAUDoQCYA=","IlvkSbrNAAKB234UELa/IACbX5AANvwX32gAK/M0ABX5aggvvtUDgAJqgcAA1A+ghaAAUDoQCYA=","KKweiuEozSjgEB0M","KKrmCuzghMA=","IrQmAAAhMA==","BYhM","I0vXAAAhMA==","AiEw","KKrG6uj4hMA=","KKAjTfcyhMA=","KKrmD8MohMA=","KKZCjvA4hMA=","KE4gC5jAhMA=","KKrmCuzgzqBwEsyM","KFMCDUZwhMA=","B+oT","KIUOi98QhMA=","JmGoHoSCEw==","KKrmCuzgzhe4cw+M","KDDUCU7QhMA=","KHUwCj0YhMA=","JoPWDqYCEw==","KKrmCuzgzlwUU1KM","JoPWFVzCEw==","FwY/+hM=","KHwGCGRwhMA=",
"Jv3oAw1CEw==","KKrmCuzg06gcLwhD","Jv3oCcQCEw==","GdxtkITA","KJZkBxxQhMA=","KNlJAMNQhMA=","KKrmCuzg0FfkLwhD","KNbYAnEAhMA=","F0KjyhM=","KL3xBxhohMA=","KL3xBxhorfQfTA==","KL5uBxxQhMA=","KonwgOhsITA=","KKrmCuzgzaPsU1KM","KonwgVXMITA=","GrDEtaEw","KNoEiHf4hMA=","KpJ8AehIITA=","KKrmCuzgzehIcw+M","KpJ8AlO0ITA=","KOEZCiHAhMA=","KoFlAuYwITA=","KKrmCuzgzV+QEsyM","KoFlA1GcITA=","BGhM","KNE6i+L4hMA="],"fonts":[{"face":"Lato-Regular","url":"http://uploads.animatron.com/f94a3654212db06b251fdc06.ttf","style":"normal",
"weight":400,"woff":"http://uploads.animatron.com/fd4a3654a5b2636902669296.woff"},{"face":"Lato-Light","url":"http://uploads.animatron.com/ec4a36540de2c474b0a4643b.ttf","style":"normal","weight":200,"woff":"http://uploads.animatron.com/f24a3654c061e143f4334901.woff"},{"face":"Lato-Bold","url":"http://uploads.animatron.com/cf4a36549a68d27290f2736e.ttf","style":"normal","weight":700,"woff":"http://uploads.animatron.com/d34a36547863794c929e2f98.woff"}],"elements":[[2,"$$$LIBRARY$$$",10,[],{}],[2,"Scene1",
1.8,[[2,"Star Color","","",[-.249,-.249],"",4,[[0,[0,1.8],8,[1,0]],[0,[1.8],"",[0]],[4,[],"",40]],{}],[7,"Star","","",[-.249,-.249],"",4,[[4,[],"",45]],{}],[12,"MEDIA KIT","","",[53.462,11.5],"",4,[[4,[],"",46]],{}],[13,"for established company","","",[104.5,12],"",4,[[4,[],"",47]],{}],[14,"YOU CHOOSE!","","",[51,8.5],"",4,[[4,[],"",48]],{}],[15,"product photo","","",[45,9],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",49]],{}],[16,"1","","",[.252,.252],"",4,[[4,[0,.8],8,50],[4,[.8],"",51]],{}],
[25,"Line 1","","",[272.5,389],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",53]],{}],[26,"jingle",[.1],"",[26,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",54]],{}],[27,"2",[.1],"",[-.498,-.499],"",4,[[4,[0,.8],8,55],[4,[.8],"",56]],{}],[29,"Line 2",[.1],"",[240,335.5],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",57]],{}],[30,"video",[.2],"",[26,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",58]],{}],[31,"3",[.2],"",[.252,.252],"",4,[[4,[0,.9],8,59],[4,[.9],"",60]],{}],[40,
"Line 3",[.2],"",[254,275],"",4,[[0,[0,.9],8,[0,1]],[0,[.9],"",[1]],[4,[],"",62]],{}],[41,"integrated\nmarketing",[.3],"",[100,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",63]],{}],[42,"4",[.3],"",[.252,.252],"",4,[[4,[0,1],8,64],[4,[1],"",65]],{}],[47,"Line 4",[.3],"",[308,233],"",4,[[0,[0,1],8,[0,1]],[0,[1],"",[1]],[4,[],"",67]],{}],[48,"viral promo",[.4],"",[55,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",68]],{}],[49,"5",[.4],"",[.252,.252],"",4,[[4,[0,1],8,69],[4,[1],"",70]],
{}],[57,"Line 5",[.4],"",[389,232.5],"",4,[[0,[0,1],8,[0,1]],[0,[1,1.1],"",[1]],[0,[1.1],"",[1]],[4,[0,1],"",72],[4,[1,1.1],"",73],[4,[1.1],"",74]],{}],[58,"design",[.5],"",[31,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",75]],{}],[59,"6",[.5],"",[.252,.252],"",4,[[4,[0,1.1],8,76],[4,[1.1],8,77]],{}],[64,"Line 6",[.5],"",[446.5,277.5],"",4,[[0,[0,1.1],8,[0,1]],[0,[1.1],8,[1]],[4,[],"",79]],{}],[65,"transmedia",[.6],"",[53.5,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[],"",80]],{}],[66,
"7",[.6],"",[.252,.252],"",4,[[4,[0,1.1],8,81],[4,[1.1],8,82]],{}],[71,"Line 7",[.6],"",[461,332],"",4,[[0,[0,1.1],"",[0,1]],[0,[1.1],"",[1]],[4,[],"",83]],{}],[72,"and more!",[.7],"",[48,12],"",4,[[0,[0,.8],8,[0,1]],[0,[.8],"",[1]],[4,[0,.8],8,84],[4,[.8],"",84]],{}],[73,"8",[.7],"",[.252,.252],"",4,[[4,[0,1.1],8,85],[4,[1.1],8,86]],{}],[79,"Line 8",[.7],"",[428.5,389.5],"",4,[[0,[0,1.1],8,[0,1]],[0,[1.1],"",[1]],[4,[],"",88]],{}]],{}],[1,"",[[3,"Bezier1","","",[132.37,86.25],"",4,[[4,[],"",41]],
{}],[4,"Bezier2","","",[86.25,86.25],"",4,[[4,[],"",42]],{}],[5,"Bezier3","","",[40.129,86.25],"",4,[[4,[],"",43]],{}],[6,"Bezier4","","",[86.251,86.25],"",4,[[4,[],"",44]],{}]]],[3,"#ffffff","","",0],[3,"#ffffff","","",1],[3,"#ffffff","","",2],[3,"#ef4645","","",3],[1,"",[[8,"Bezier1","","",[132.37,86.25],"",4,[[4,[],"",41]],{}],[9,"Bezier2","","",[86.25,86.25],"",4,[[4,[],"",42]],{}],[10,"Bezier3","","",[40.129,86.25],"",4,[[4,[],"",43]],{}],[11,"Bezier4","","",[86.251,86.25],"",4,[[4,[],"",44]],
{}]]],[3,"#ffffff","","",0],[3,"#ffffff","","",1],[3,"#ffffff","","",2],[3,"#333333","","",3],[4,"#000000","","","bold 30px Lato-Bold","center","MEDIA KIT",2],[4,"#000000","","","20px Lato-Light","center","for established company",2],[4,"#000000","","","18px Lato-Regular","","YOU CHOOSE!",2],[4,"#969696","","","20px Lato-Light","center","product photo",2],[1,"",[[17,"Composite1","","",[37.75,37.746],"",4,[[4,[],"",52]],{}],[24,"Bezier1","","",[37.751,37.749],"",4,[[4,[],"",44]],{}]]],[1,"",[[18,"Bezier1",
"","","","",4,[],{}],[19,"Bezier2","","","","",4,[],{}],[20,"Bezier3","","","","",4,[],{}],[21,"Bezier4","","","","",4,[],{}],[22,"Bezier5","","","","",4,[],{}],[23,"Bezier6","","","","",4,[],{}]]],[3,"#ffffff","","",4],[3,"#ffffff","","",5],[3,"#ffffff","","",6],[3,"#ffffff","","",7],[3,"#ffffff","","",8],[3,"#ffffff","","",9],[3,"#ee4645","","",10],[3,"",[2,"#9e9e9e","","",-1],"",11],[4,"#969696","","","bold 20px Lato-Light","center","jingle",2],[1,"",[[28,"Bezier1","","",[37.75,37.747],"",4,[[2,
[],"",[.993]],[4,[],"",44]],{}]]],[3,"#ee4645","","",12],[3,"",[2,"#9e9e9e","","",-1],"",13],[4,"#969696","","","bold 20px Lato-Light","center","video",2],[1,"",[[32,"Bezier1","","",[37.75,37.749],"",4,[[4,[],"",44]],{}],[33,"Composite1","","",[36.75,37.749],"",4,[[4,[],"",61]],{}],[39,"Bezier2","","",[37.751,37.75],"",4,[[4,[],"",44]],{}]]],[3,"#ffffff","","",14],[1,"",[[34,"Bezier1","","","","",4,[],{}],[35,"Bezier2","","","","",4,[],{}],[36,"Bezier3","","","","",4,[],{}],[37,"Bezier4","","","",
"",4,[],{}],[38,"Bezier5","","","","",4,[],{}]]],[3,"#ffffff","","",15],[3,"#ffffff","","",16],[3,"#ffffff","","",17],[3,"#ffffff","","",18],[3,"#ffffff","","",19],[3,"#ee4645","","",20],[3,"",[2,"#9e9e9e","","",-1],"",21],[4,"#969696","","","bold 20px Lato-Light","center","integrated marketing",2],[1,"",[[43,"Composite1","","",[37.466,39.487],"",4,[[4,[],"",66]],{}],[46,"Bezier1","","",[37.751,37.75],"",4,[[4,[],"",44]],{}]]],[1,"",[[44,"Bezier1","","","","",4,[],{}],[45,"Bezier2","","","","",4,
[],{}]]],[3,"#ffffff","","",22],[3,"#ffffff","","",23],[3,"#ee4645","","",20],[3,"",[2,"#9e9e9e","","",-1],"",24],[4,"#969696","","","bold 20px Lato-Light","center","viral promo",2],[1,"",[[50,"Composite1","","",[36.992,36.846],"",4,[[4,[],"",71]],{}],[56,"Bezier1","","",[37.751,37.75],"",4,[[4,[],"",44]],{}]]],[1,"",[[51,"Composite1","","","","",4,[],{}],[54,"Bezier1","","","","",4,[],{}],[55,"Bezier2","","","","",4,[],{}]]],[1,"",[[52,"Bezier1","","","","",4,[],{}],[53,"Bezier2","","","","",4,[],
{}]]],[3,"#ffffff","","",25],[3,"#ffffff","","",26],[3,"#ffffff","","",27],[3,"#ffffff","","",28],[3,"#ee4645","","",20],[3,"",[2,"#9e9e9e","","",-1],"",29],[4,"#969696","","","bold 20px Lato-Light","center","design",2],[1,"",[[60,"Composite1","","",[40.579,40.162],"",4,[[4,[],"",78]],{}],[63,"Bezier1","","",[37.751,37.75],"",4,[[4,[],"",44]],{}]]],[1,"",[[61,"Bezier1","","","","",4,[],{}],[62,"Bezier2","","","","",4,[],{}]]],[3,"#ffffff","","",30],[3,"#ffffff","","",31],[3,"#ee4645","","",20],[3,
"",[2,"#9e9e9e","","",-1],"",32],[4,"#969696","","","bold 20px Lato-Light","center","transmedia",2],[1,"",[[67,"Composite1","","",[37.75,37.751],"",4,[[4,[],"",44]],{}],[70,"Bezier1","","",[37.751,37.75],"",4,[[4,[],"",44]],{}]]],[1,"",[[68,"Bezier1","","","","",4,[],{}],[69,"Bezier2","","","","",4,[],{}]]],[3,"#ffffff","","",33],[3,"#ffffff","","",34],[3,"#ee4645","","",20],[3,"",[2,"#9e9e9e","","",-1],"",35],[4,"#969696","","","bold 20px Lato-Light","center","and more!",2],[1,"",[[74,"Composite1",
"","",[37.751,37.749],"",4,[[4,[],"",87]],{}],[78,"Bezier1","","",[37.751,37.75],"",4,[[4,[],"",44]],{}]]],[1,"",[[75,"Bezier1","","","","",4,[],{}],[76,"Bezier2","","","","",4,[],{}],[77,"Bezier3","","","","",4,[],{}]]],[3,"#ffffff","","",36],[3,"#ffffff","","",37],[3,"#ffffff","","",38],[3,"#ee4645","","",20],[3,"",[2,"#9e9e9e","","",-1],"",39]],"scenes":[1]}};var importer=anm.importers.create("animatron");var played1,played2,played3=false;
var player1=anm.createPlayer("star1",{autoPlay:false,controlsEnabled:false}).load(star1,importer);var player2=anm.createPlayer("star2",{autoPlay:false,controlsEnabled:false}).load(star2,importer);var player3=anm.createPlayer("star3",{autoPlay:false,controlsEnabled:false}).load(star3,importer);$("#star1").on("click",function(){if(!played1){player1.play();played1=true}});$("#star2").on("click",function(){if(!played2){player2.play();played2=true}});
$("#star3").on("click",function(){if(!played3){player3.play();played3=true}});player1._resize($("#star1").width(),window.innerHeight);player2._resize($("#star2").width(),window.innerHeight);player3._resize($("#star3").width(),window.innerHeight);
